!function t(e,i,r){function n(s,o){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[s]={exports:{}};e[s][0].call(f.exports,function(t){var i=e[s][1][t];return n(i||t)},f,f.exports,t,e,i,r)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){e.exports=function(t,e){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=e[9],c=e[10],p=e[11],d=e[12],m=e[13],g=e[14],_=e[15];return t[0]=o*(c*_-p*g)-h*(l*_-u*g)+m*(l*p-u*c),t[1]=-(r*(c*_-p*g)-h*(n*_-a*g)+m*(n*p-a*c)),t[2]=r*(l*_-u*g)-o*(n*_-a*g)+m*(n*u-a*l),t[3]=-(r*(l*p-u*c)-o*(n*p-a*c)+h*(n*u-a*l)),t[4]=-(s*(c*_-p*g)-f*(l*_-u*g)+d*(l*p-u*c)),t[5]=i*(c*_-p*g)-f*(n*_-a*g)+d*(n*p-a*c),t[6]=-(i*(l*_-u*g)-s*(n*_-a*g)+d*(n*u-a*l)),t[7]=i*(l*p-u*c)-s*(n*p-a*c)+f*(n*u-a*l),t[8]=s*(h*_-p*m)-f*(o*_-u*m)+d*(o*p-u*h),t[9]=-(i*(h*_-p*m)-f*(r*_-a*m)+d*(r*p-a*h)),t[10]=i*(o*_-u*m)-s*(r*_-a*m)+d*(r*u-a*o),t[11]=-(i*(o*p-u*h)-s*(r*p-a*h)+f*(r*u-a*o)),t[12]=-(s*(h*g-c*m)-f*(o*g-l*m)+d*(o*c-l*h)),t[13]=i*(h*g-c*m)-f*(r*g-n*m)+d*(r*c-n*h),t[14]=-(i*(o*g-l*m)-s*(r*g-n*m)+d*(r*l-n*o)),t[15]=i*(o*c-l*h)-s*(r*c-n*h)+f*(r*l-n*o),t}},{}],2:[function(t,e,i){e.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],3:[function(t,e,i){e.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],4:[function(t,e,i){e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],5:[function(t,e,i){e.exports=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8],f=t[9],h=t[10],c=t[11],p=t[12],d=t[13],m=t[14],g=t[15];return(e*s-i*a)*(h*g-c*m)-(e*o-r*a)*(f*g-c*d)+(e*l-n*a)*(f*m-h*d)+(i*o-r*s)*(u*g-c*p)-(i*l-n*s)*(u*m-h*p)+(r*l-n*o)*(u*d-f*p)}},{}],6:[function(t,e,i){e.exports=function(t,e){var i=e[0],r=e[1],n=e[2],a=e[3],s=i+i,o=r+r,l=n+n,u=i*s,f=r*s,h=r*o,c=n*s,p=n*o,d=n*l,m=a*s,g=a*o,_=a*l;return t[0]=1-h-d,t[1]=f+_,t[2]=c-g,t[3]=0,t[4]=f-_,t[5]=1-u-d,t[6]=p+m,t[7]=0,t[8]=c+g,t[9]=p-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],7:[function(t,e,i){e.exports=function(t,e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=r+r,l=n+n,u=a+a,f=r*o,h=r*l,c=r*u,p=n*l,d=n*u,m=a*u,g=s*o,_=s*l,v=s*u;return t[0]=1-(p+m),t[1]=h+v,t[2]=c-_,t[3]=0,t[4]=h-v,t[5]=1-(f+m),t[6]=d+g,t[7]=0,t[8]=c+_,t[9]=d-g,t[10]=1-(f+p),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}},{}],8:[function(t,e,i){e.exports=function(t,e,i,r,n,a,s){var o=1/(i-e),l=1/(n-r),u=1/(a-s);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(n+r)*l,t[10]=(s+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*a*2*u,t[15]=0,t}},{}],9:[function(t,e,i){e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],10:[function(t,e,i){e.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotationTranslation:t("./fromRotationTranslation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":1,"./clone":2,"./copy":3,"./create":4,"./determinant":5,"./fromQuat":6,"./fromRotationTranslation":7,"./frustum":8,"./identity":9,"./invert":11,"./lookAt":12,"./multiply":13,"./ortho":14,"./perspective":15,"./perspectiveFromFieldOfView":16,"./rotate":17,"./rotateX":18,"./rotateY":19,"./rotateZ":20,"./scale":21,"./str":22,"./translate":23,"./transpose":24}],11:[function(t,e,i){e.exports=function(t,e){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=e[9],c=e[10],p=e[11],d=e[12],m=e[13],g=e[14],_=e[15],v=i*o-r*s,y=i*l-n*s,b=i*u-a*s,x=r*l-n*o,w=r*u-a*o,T=n*u-a*l,S=f*m-h*d,k=f*g-c*d,P=f*_-p*d,A=h*g-c*m,O=h*_-p*m,M=c*_-p*g,D=v*M-y*O+b*A+x*P-w*k+T*S;return D?(D=1/D,t[0]=(o*M-l*O+u*A)*D,t[1]=(n*O-r*M-a*A)*D,t[2]=(m*T-g*w+_*x)*D,t[3]=(c*w-h*T-p*x)*D,t[4]=(l*P-s*M-u*k)*D,t[5]=(i*M-n*P+a*k)*D,t[6]=(g*b-d*T-_*y)*D,t[7]=(f*T-c*b+p*y)*D,t[8]=(s*O-o*P+u*S)*D,t[9]=(r*P-i*O-a*S)*D,t[10]=(d*w-m*b+_*v)*D,t[11]=(h*b-f*w-p*v)*D,t[12]=(o*k-s*A-l*S)*D,t[13]=(i*A-r*k+n*S)*D,t[14]=(m*y-d*x-g*v)*D,t[15]=(f*x-h*y+c*v)*D,t):null}},{}],12:[function(t,e,i){var r=t("./identity");e.exports=function(t,e,i,n){var a,s,o,l,u,f,h,c,p,d,m=e[0],g=e[1],_=e[2],v=n[0],y=n[1],b=n[2],x=i[0],w=i[1],T=i[2];return Math.abs(m-x)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(_-T)<1e-6?r(t):(h=m-x,c=g-w,p=_-T,d=1/Math.sqrt(h*h+c*c+p*p),h*=d,c*=d,p*=d,a=y*p-b*c,s=b*h-v*p,o=v*c-y*h,(d=Math.sqrt(a*a+s*s+o*o))?(a*=d=1/d,s*=d,o*=d):(a=0,s=0,o=0),l=c*o-p*s,u=p*a-h*o,f=h*s-c*a,(d=Math.sqrt(l*l+u*u+f*f))?(l*=d=1/d,u*=d,f*=d):(l=0,u=0,f=0),t[0]=a,t[1]=l,t[2]=h,t[3]=0,t[4]=s,t[5]=u,t[6]=c,t[7]=0,t[8]=o,t[9]=f,t[10]=p,t[11]=0,t[12]=-(a*m+s*g+o*_),t[13]=-(l*m+u*g+f*_),t[14]=-(h*m+c*g+p*_),t[15]=1,t)}},{"./identity":9}],13:[function(t,e,i){e.exports=function(t,e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],f=e[7],h=e[8],c=e[9],p=e[10],d=e[11],m=e[12],g=e[13],_=e[14],v=e[15],y=i[0],b=i[1],x=i[2],w=i[3];return t[0]=y*r+b*o+x*h+w*m,t[1]=y*n+b*l+x*c+w*g,t[2]=y*a+b*u+x*p+w*_,t[3]=y*s+b*f+x*d+w*v,y=i[4],b=i[5],x=i[6],w=i[7],t[4]=y*r+b*o+x*h+w*m,t[5]=y*n+b*l+x*c+w*g,t[6]=y*a+b*u+x*p+w*_,t[7]=y*s+b*f+x*d+w*v,y=i[8],b=i[9],x=i[10],w=i[11],t[8]=y*r+b*o+x*h+w*m,t[9]=y*n+b*l+x*c+w*g,t[10]=y*a+b*u+x*p+w*_,t[11]=y*s+b*f+x*d+w*v,y=i[12],b=i[13],x=i[14],w=i[15],t[12]=y*r+b*o+x*h+w*m,t[13]=y*n+b*l+x*c+w*g,t[14]=y*a+b*u+x*p+w*_,t[15]=y*s+b*f+x*d+w*v,t}},{}],14:[function(t,e,i){e.exports=function(t,e,i,r,n,a,s){var o=1/(e-i),l=1/(r-n),u=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*o,t[13]=(n+r)*l,t[14]=(s+a)*u,t[15]=1,t}},{}],15:[function(t,e,i){e.exports=function(t,e,i,r,n){var a=1/Math.tan(e/2),s=1/(r-n);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+r)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*r*s,t[15]=0,t}},{}],16:[function(t,e,i){e.exports=function(t,e,i,r){var n=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+o),u=2/(n+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-o)*l*.5,t[9]=(n-a)*u*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}},{}],17:[function(t,e,i){e.exports=function(t,e,i,r){var n,a,s,o,l,u,f,h,c,p,d,m,g,_,v,y,b,x,w,T,S,k,P,A,O=r[0],M=r[1],D=r[2],C=Math.sqrt(O*O+M*M+D*D);return Math.abs(C)<1e-6?null:(C=1/C,O*=C,M*=C,D*=C,n=Math.sin(i),a=Math.cos(i),s=1-a,o=e[0],l=e[1],u=e[2],f=e[3],h=e[4],c=e[5],p=e[6],d=e[7],m=e[8],g=e[9],_=e[10],v=e[11],y=O*O*s+a,b=M*O*s+D*n,x=D*O*s-M*n,w=O*M*s-D*n,T=M*M*s+a,S=D*M*s+O*n,k=O*D*s+M*n,P=M*D*s-O*n,A=D*D*s+a,t[0]=o*y+h*b+m*x,t[1]=l*y+c*b+g*x,t[2]=u*y+p*b+_*x,t[3]=f*y+d*b+v*x,t[4]=o*w+h*T+m*S,t[5]=l*w+c*T+g*S,t[6]=u*w+p*T+_*S,t[7]=f*w+d*T+v*S,t[8]=o*k+h*P+m*A,t[9]=l*k+c*P+g*A,t[10]=u*k+p*P+_*A,t[11]=f*k+d*P+v*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}},{}],18:[function(t,e,i){e.exports=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],f=e[9],h=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*n+u*r,t[5]=s*n+f*r,t[6]=o*n+h*r,t[7]=l*n+c*r,t[8]=u*n-a*r,t[9]=f*n-s*r,t[10]=h*n-o*r,t[11]=c*n-l*r,t}},{}],19:[function(t,e,i){e.exports=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],u=e[8],f=e[9],h=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*n-u*r,t[1]=s*n-f*r,t[2]=o*n-h*r,t[3]=l*n-c*r,t[8]=a*r+u*n,t[9]=s*r+f*n,t[10]=o*r+h*n,t[11]=l*r+c*n,t}},{}],20:[function(t,e,i){e.exports=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],u=e[4],f=e[5],h=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*n+u*r,t[1]=s*n+f*r,t[2]=o*n+h*r,t[3]=l*n+c*r,t[4]=u*n-a*r,t[5]=f*n-s*r,t[6]=h*n-o*r,t[7]=c*n-l*r,t}},{}],21:[function(t,e,i){e.exports=function(t,e,i){var r=i[0],n=i[1],a=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],22:[function(t,e,i){e.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},{}],23:[function(t,e,i){e.exports=function(t,e,i){var r,n,a,s,o,l,u,f,h,c,p,d,m=i[0],g=i[1],_=i[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*_+e[12],t[13]=e[1]*m+e[5]*g+e[9]*_+e[13],t[14]=e[2]*m+e[6]*g+e[10]*_+e[14],t[15]=e[3]*m+e[7]*g+e[11]*_+e[15]):(r=e[0],n=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],f=e[7],h=e[8],c=e[9],p=e[10],d=e[11],t[0]=r,t[1]=n,t[2]=a,t[3]=s,t[4]=o,t[5]=l,t[6]=u,t[7]=f,t[8]=h,t[9]=c,t[10]=p,t[11]=d,t[12]=r*m+o*g+h*_+e[12],t[13]=n*m+l*g+c*_+e[13],t[14]=a*m+u*g+p*_+e[14],t[15]=s*m+f*g+d*_+e[15]),t}},{}],24:[function(t,e,i){e.exports=function(t,e){if(t===e){var i=e[1],r=e[2],n=e[3],a=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=n,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},{}],25:[function(t,e,i){e.exports=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}},{}],26:[function(t,e,i){e.exports=function(t,e){var i=r(t[0],t[1],t[2]),s=r(e[0],e[1],e[2]);n(i,i),n(s,s);var o=a(i,s);return o>1?0:Math.acos(o)};var r=t("./fromValues"),n=t("./normalize"),a=t("./dot")},{"./dot":33,"./fromValues":35,"./normalize":44}],27:[function(t,e,i){e.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],28:[function(t,e,i){e.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},{}],29:[function(t,e,i){e.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},{}],30:[function(t,e,i){e.exports=function(t,e,i){var r=e[0],n=e[1],a=e[2],s=i[0],o=i[1],l=i[2];return t[0]=n*l-a*o,t[1]=a*s-r*l,t[2]=r*o-n*s,t}},{}],31:[function(t,e,i){e.exports=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}},{}],32:[function(t,e,i){e.exports=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}},{}],33:[function(t,e,i){e.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},{}],34:[function(t,e,i){e.exports=function(t,e,i,n,a,s){var o,l;for(e||(e=3),i||(i=0),l=n?Math.min(n*e+i,t.length):t.length,o=i;o<l;o+=e)r[0]=t[o],r[1]=t[o+1],r[2]=t[o+2],a(r,r,s),t[o]=r[0],t[o+1]=r[1],t[o+2]=r[2];return t};var r=t("./create")()},{"./create":29}],35:[function(t,e,i){e.exports=function(t,e,i){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=i,r}},{}],36:[function(t,e,i){e.exports={create:t("./create"),clone:t("./clone"),angle:t("./angle"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),add:t("./add"),subtract:t("./subtract"),multiply:t("./multiply"),divide:t("./divide"),min:t("./min"),max:t("./max"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),squaredDistance:t("./squaredDistance"),length:t("./length"),squaredLength:t("./squaredLength"),negate:t("./negate"),inverse:t("./inverse"),normalize:t("./normalize"),dot:t("./dot"),cross:t("./cross"),lerp:t("./lerp"),random:t("./random"),transformMat4:t("./transformMat4"),transformMat3:t("./transformMat3"),transformQuat:t("./transformQuat"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),forEach:t("./forEach")}},{"./add":25,"./angle":26,"./clone":27,"./copy":28,"./create":29,"./cross":30,"./distance":31,"./divide":32,"./dot":33,"./forEach":34,"./fromValues":35,"./inverse":37,"./length":38,"./lerp":39,"./max":40,"./min":41,"./multiply":42,"./negate":43,"./normalize":44,"./random":45,"./rotateX":46,"./rotateY":47,"./rotateZ":48,"./scale":49,"./scaleAndAdd":50,"./set":51,"./squaredDistance":52,"./squaredLength":53,"./subtract":54,"./transformMat3":55,"./transformMat4":56,"./transformQuat":57}],37:[function(t,e,i){e.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},{}],38:[function(t,e,i){e.exports=function(t){var e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}},{}],39:[function(t,e,i){e.exports=function(t,e,i,r){var n=e[0],a=e[1],s=e[2];return t[0]=n+r*(i[0]-n),t[1]=a+r*(i[1]-a),t[2]=s+r*(i[2]-s),t}},{}],40:[function(t,e,i){e.exports=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}},{}],41:[function(t,e,i){e.exports=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}},{}],42:[function(t,e,i){e.exports=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}},{}],43:[function(t,e,i){e.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},{}],44:[function(t,e,i){e.exports=function(t,e){var i=e[0],r=e[1],n=e[2],a=i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}},{}],45:[function(t,e,i){e.exports=function(t,e){e=e||1;var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=r*e,t}},{}],46:[function(t,e,i){e.exports=function(t,e,i,r){var n=[],a=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],a[0]=n[0],a[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),a[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t}},{}],47:[function(t,e,i){e.exports=function(t,e,i,r){var n=[],a=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],a[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),a[1]=n[1],a[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t}},{}],48:[function(t,e,i){e.exports=function(t,e,i,r){var n=[],a=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],a[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),a[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),a[2]=n[2],t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t}},{}],49:[function(t,e,i){e.exports=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}},{}],50:[function(t,e,i){e.exports=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}},{}],51:[function(t,e,i){e.exports=function(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}},{}],52:[function(t,e,i){e.exports=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}},{}],53:[function(t,e,i){e.exports=function(t){var e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}},{}],54:[function(t,e,i){e.exports=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}},{}],55:[function(t,e,i){e.exports=function(t,e,i){var r=e[0],n=e[1],a=e[2];return t[0]=r*i[0]+n*i[3]+a*i[6],t[1]=r*i[1]+n*i[4]+a*i[7],t[2]=r*i[2]+n*i[5]+a*i[8],t}},{}],56:[function(t,e,i){e.exports=function(t,e,i){var r=e[0],n=e[1],a=e[2],s=i[3]*r+i[7]*n+i[11]*a+i[15];return s=s||1,t[0]=(i[0]*r+i[4]*n+i[8]*a+i[12])/s,t[1]=(i[1]*r+i[5]*n+i[9]*a+i[13])/s,t[2]=(i[2]*r+i[6]*n+i[10]*a+i[14])/s,t}},{}],57:[function(t,e,i){e.exports=function(t,e,i){var r=e[0],n=e[1],a=e[2],s=i[0],o=i[1],l=i[2],u=i[3],f=u*r+o*a-l*n,h=u*n+l*r-s*a,c=u*a+s*n-o*r,p=-s*r-o*n-l*a;return t[0]=f*u+p*-s+h*-l-c*-o,t[1]=h*u+p*-o+c*-s-f*-l,t[2]=c*u+p*-l+f*-o-h*-s,t}},{}],58:[function(t,e,i){e.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),i=[],r=0;r<t.length-1;r++)i.push(t[r],e[r]||"");return i.push(t[r]),i.join("")}},{}],59:[function(t,e,i){(function(t){var i=void 0!==e&&e.exports&&void 0!==t?t:this||window;(i._gsQueue||(i._gsQueue=[])).push(function(){"use strict";i._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},n=function(t,e,i){var r,n,a=t.cycle;for(r in a)n=a[r],t[r]="function"==typeof n?n(i,e[i]):n[i%n.length];delete t.cycle},a=function(t,e,r){i.call(this,t,e,r),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=a.prototype.render},s=i._internals,o=s.isSelector,l=s.isArray,u=a.prototype=i.to({},.1,{}),f=[];a.version="1.20.3",u.constructor=a,u.kill()._gc=!1,a.killTweensOf=a.killDelayedCallsTo=i.killTweensOf,a.getTweensOf=i.getTweensOf,a.lagSmoothing=i.lagSmoothing,a.ticker=i.ticker,a.render=i.render,u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),i.prototype.invalidate.call(this)},u.updateTo=function(t,e){var r,n=this.ratio,a=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in t)this.vars[r]=t[r];if(this._initted||a)if(e)this._initted=!1,a&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var s=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||a)for(var o,l=1/(1-n),u=this._firstPT;u;)o=u.s+u.c,u.c*=l,u.s=o-u.c,u=u._next;return this},u.render=function(t,e,r){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,a,o,l,u,f,h,c,p,d=this._dirty?this.totalDuration():this._totalDuration,m=this._time,g=this._totalTime,_=this._cycle,v=this._duration,y=this._rawPrevTime;if(t>=d-1e-7&&t>=0?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,a="onComplete",r=r||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||r)&&(this._startTime===this._timeline._duration&&(t=0),(y<0||t<=0&&t>=-1e-7||1e-10===y&&"isPause"!==this.data)&&y!==t&&(r=!0,y>1e-10&&(a="onReverseComplete")),this._rawPrevTime=c=!e||t||y===t?t:1e-10)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==g||0===v&&y>0)&&(a="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||r)&&(y>=0&&(r=!0),this._rawPrevTime=c=!e||t||y===t?t:1e-10)),this._initted||(r=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(l=v+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&g<=t&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=v-this._time,(p=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==p||this._initted?this._yoyoEase=p=!0===p?this._ease:p instanceof Ease?p:Ease.map[p]:(p=this.vars.ease,this._yoyoEase=p=p?p instanceof Ease?p:"function"==typeof p?new Ease(p,this.vars.easeParams):Ease.map[p]||i.defaultEase:i.defaultEase)),this.ratio=p?1-p.getRatio((v-this._time)/v):0)),this._time>v?this._time=v:this._time<0&&(this._time=0)),this._easeType&&!p?(u=this._time/v,f=this._easeType,h=this._easePower,(1===f||3===f&&u>=.5)&&(u=1-u),3===f&&(u*=2),1===h?u*=u:2===h?u*=u*u:3===h?u*=u*u*u:4===h&&(u*=u*u*u*u),1===f?this.ratio=1-u:2===f?this.ratio=u:this._time/v<.5?this.ratio=u/2:this.ratio=1-u/2):p||(this.ratio=this._ease.getRatio(this._time/v))),m!==this._time||r||_!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!r&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=m,this._totalTime=g,this._rawPrevTime=y,this._cycle=_,s.lazyTweens.push(this),void(this._lazy=[t,e]);!this._time||n||p?n&&this._ease._calcEnd&&!p&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/v)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==m&&t>=0&&(this._active=!0),0===g&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,!0,r):a||(a="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==v||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,!0,r),e||(this._totalTime!==g||a)&&this._callback("onUpdate")),this._cycle!==_&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),a&&(this._gc&&!r||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,!0,r),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a),0===v&&1e-10===this._rawPrevTime&&1e-10!==c&&(this._rawPrevTime=0)))}else g!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},a.to=function(t,e,i){return new a(t,e,i)},a.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new a(t,e,i)},a.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new a(t,e,r)},a.staggerTo=a.allTo=function(t,e,s,u,h,c,p){u=u||0;var d,m,g,_,v=0,y=[],b=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),h.apply(p||s.callbackScope||this,c||f)},x=s.cycle,w=s.startAt&&s.startAt.cycle;for(l(t)||("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=r(t))),t=t||[],u<0&&((t=r(t)).reverse(),u*=-1),d=t.length-1,g=0;g<=d;g++){m={};for(_ in s)m[_]=s[_];if(x&&(n(m,t,g),null!=m.duration&&(e=m.duration,delete m.duration)),w){w=m.startAt={};for(_ in s.startAt)w[_]=s.startAt[_];n(m.startAt,t,g)}m.delay=v+(m.delay||0),g===d&&h&&(m.onComplete=b),y[g]=new a(t[g],e,m),v+=u}return y},a.staggerFrom=a.allFrom=function(t,e,i,r,n,s,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,a.staggerTo(t,e,i,r,n,s,o)},a.staggerFromTo=a.allFromTo=function(t,e,i,r,n,s,o,l){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,a.staggerTo(t,e,r,n,s,o,l)},a.delayedCall=function(t,e,i,r,n){return new a(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:n,overwrite:0})},a.set=function(t,e){return new a(t,0,e)},a.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var h=function(t,e){for(var r=[],n=0,a=t._first;a;)a instanceof i?r[n++]=a:(e&&(r[n++]=a),n=(r=r.concat(h(a,e))).length),a=a._next;return r},c=a.getAllTweens=function(e){return h(t._rootTimeline,e).concat(h(t._rootFramesTimeline,e))};a.killAll=function(t,i,r,n){null==i&&(i=!0),null==r&&(r=!0);var a,s,o,l=c(0!=n),u=l.length,f=i&&r&&n;for(o=0;o<u;o++)s=l[o],(f||s instanceof e||(a=s.target===s.vars.onComplete)&&r||i&&!a)&&(t?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},a.killChildTweensOf=function(t,e){if(null!=t){var n,u,f,h,c,p=s.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=r(t)),l(t))for(h=t.length;--h>-1;)a.killChildTweensOf(t[h],e);else{n=[];for(f in p)for(u=p[f].target.parentNode;u;)u===t&&(n=n.concat(p[f].tweens)),u=u.parentNode;for(c=n.length,h=0;h<c;h++)e&&n[h].totalTime(n[h].totalDuration()),n[h]._enabled(!1,!1)}}};var p=function(t,i,r,n){i=!1!==i,r=!1!==r;for(var a,s,o=c(n=!1!==n),l=i&&r&&n,u=o.length;--u>-1;)s=o[u],(l||s instanceof e||(a=s.target===s.vars.onComplete)&&r||i&&!a)&&s.paused(t)};return a.pauseAll=function(t,e,i){p(!0,t,e,i)},a.resumeAll=function(t,e,i){p(!1,t,e,i)},a.globalTimeScale=function(e){var r=t._rootTimeline,n=i.ticker.time;return arguments.length?(e=e||1e-10,r._startTime=n-(n-r._startTime)*r._timeScale/e,r=t._rootFramesTimeline,n=i.ticker.frame,r._startTime=n-(n-r._startTime)*r._timeScale/e,r._timeScale=t._rootTimeline._timeScale=e,e):r._timeScale},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},u.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},a},!0),i._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,r){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,n=this.vars;for(r in n)i=n[r],l(i)&&-1!==i.join("").indexOf("{self}")&&(n[r]=this._swapSelfInParams(i));l(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},a=r._internals,s=n._internals={},o=a.isSelector,l=a.isArray,u=a.lazyTweens,f=a.lazyRender,h=i._gsDefine.globals,c=function(t){var e,i={};for(e in t)i[e]=t[e];return i},p=function(t,e,i){var r,n,a=t.cycle;for(r in a)n=a[r],t[r]="function"==typeof n?n(i,e[i]):n[i%n.length];delete t.cycle},d=s.pauseCallback=function(){},m=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},g=n.prototype=new e;return n.version="1.20.3",g.constructor=n,g.kill()._gc=g._forcingPlayhead=g._hasPause=!1,g.to=function(t,e,i,n){var a=i.repeat&&h.TweenMax||r;return e?this.add(new a(t,e,i),n):this.set(t,i,n)},g.from=function(t,e,i,n){return this.add((i.repeat&&h.TweenMax||r).from(t,e,i),n)},g.fromTo=function(t,e,i,n,a){var s=n.repeat&&h.TweenMax||r;return e?this.add(s.fromTo(t,e,i,n),a):this.set(t,n,a)},g.staggerTo=function(t,e,i,a,s,l,u,f){var h,d,g=new n({onComplete:l,onCompleteParams:u,callbackScope:f,smoothChildTiming:this.smoothChildTiming}),_=i.cycle;for("string"==typeof t&&(t=r.selector(t)||t),o(t=t||[])&&(t=m(t)),(a=a||0)<0&&((t=m(t)).reverse(),a*=-1),d=0;d<t.length;d++)(h=c(i)).startAt&&(h.startAt=c(h.startAt),h.startAt.cycle&&p(h.startAt,t,d)),_&&(p(h,t,d),null!=h.duration&&(e=h.duration,delete h.duration)),g.to(t[d],e,h,d*a);return this.add(g,s)},g.staggerFrom=function(t,e,i,r,n,a,s,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,n,a,s,o)},g.staggerFromTo=function(t,e,i,r,n,a,s,o,l){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,n,a,s,o,l)},g.call=function(t,e,i,n){return this.add(r.delayedCall(0,t,e,i),n)},g.set=function(t,e,i){return i=this._parseTimeOrLabel(i,0,!0),null==e.immediateRender&&(e.immediateRender=i===this._time&&!this._paused),this.add(new r(t,0,e),i)},n.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var i,a,s,o,l=new n(t),u=l._timeline;for(null==e&&(e=!0),u._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=u._time,s=u._first;s;)o=s._next,e&&s instanceof r&&s.target===s.vars.onComplete||((a=s._startTime-s._delay)<0&&(i=1),l.add(s,a)),s=o;return u.add(l,0),i&&l.totalDuration(),l},g.add=function(i,a,s,o){var u,f,h,c,p,d;if("number"!=typeof a&&(a=this._parseTimeOrLabel(a,0,!0,i)),!(i instanceof t)){if(i instanceof Array||i&&i.push&&l(i)){for(s=s||"normal",o=o||0,u=a,f=i.length,h=0;h<f;h++)l(c=i[h])&&(c=new n({tweens:c})),this.add(c,u),"string"!=typeof c&&"function"!=typeof c&&("sequence"===s?u=c._startTime+c.totalDuration()/c._timeScale:"start"===s&&(c._startTime-=c.delay())),u+=o;return this._uncache(!0)}if("string"==typeof i)return this.addLabel(i,a);if("function"!=typeof i)throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string.";i=r.delayedCall(0,i)}if(e.prototype.add.call(this,i,a),i._time&&i.render((this.rawTime()-i._startTime)*i._timeScale,!1,!1),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(d=(p=this).rawTime()>i._startTime;p._timeline;)d&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&l(e)){for(var r=e.length;--r>-1;)this.remove(e[r]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);return this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},g.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,i,n){var a=r.delayedCall(0,d,i,n||this);return a.vars.onComplete=a.vars.onReverseComplete=e,a.data="isPause",this._hasPause=!0,this.add(a,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,r,n){var a,s;if(n instanceof t&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&l(n)))for(s=n.length;--s>-1;)n[s]instanceof t&&n[s].timeline===this&&this.remove(n[s]);if(a="number"!=typeof e||i?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-a:0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=a);else{if(-1===(s=e.indexOf("=")))return null==this._labels[e]?r?this._labels[e]=a+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,r):a}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,n,a,s,o,l,h,c=this._time,p=this._dirty?this.totalDuration():this._totalDuration,d=this._startTime,m=this._timeScale,g=this._paused;if(c!==this._time&&(t+=this._time-c),t>=p-1e-7&&t>=0)this._totalTime=this._time=p,this._reversed||this._hasPausedChild()||(n=!0,s="onComplete",o=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(o=!0,this._rawPrevTime>1e-10&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,t=p+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==c||0===this._duration&&1e-10!==this._rawPrevTime&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(s="onReverseComplete",n=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(o=n=!0,s="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(o=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;t=0,this._initted||(o=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=c)for(r=this._first;r&&r._startTime<=t&&!l;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(l=r),r=r._next;else for(r=this._last;r&&r._startTime>=t&&!l;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(l=r),r=r._prev;l&&(this._time=t=l._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==c&&this._first||i||o||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==c&&t>0&&(this._active=!0),0===c&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),(h=this._time)>=c)for(r=this._first;r&&(a=r._next,h===this._time&&(!this._paused||g));)(r._active||r._startTime<=h&&!r._paused&&!r._gc)&&(l===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,h===this._time&&(!this._paused||g));){if(r._active||r._startTime<=c&&!r._paused&&!r._gc){if(l===r){for(l=r._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(t-l._startTime)*l._timeScale:(t-l._startTime)*l._timeScale,e,i),l=l._prev;l=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)}r=a}this._onUpdate&&(e||(u.length&&f(),this._callback("onUpdate"))),s&&(this._gc||d!==this._startTime&&m===this._timeScale||(0===this._time||p>=this.totalDuration())&&(n&&(u.length&&f(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this._callback(s)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,i,n){n=n||-9999999999;for(var a=[],s=this._first,o=0;s;)s._startTime<n||(s instanceof r?!1!==e&&(a[o++]=s):(!1!==i&&(a[o++]=s),!1!==t&&(o=(a=a.concat(s.getChildren(!0,e,i))).length))),s=s._next;return a},g.getTweensOf=function(t,e){var i,n,a=this._gc,s=[],o=0;for(a&&this._enabled(!0,!0),n=(i=r.getTweensOf(t)).length;--n>-1;)(i[n].timeline===this||e&&this._contains(i[n]))&&(s[o++]=i[n]);return a&&this._enabled(!1,!0),s},g.recent=function(){return this._recent},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var r,n=this._first,a=this._labels;n;)n._startTime>=i&&(n._startTime+=t),n=n._next;if(e)for(r in a)a[r]>=i&&(a[r]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,n=!1;--r>-1;)i[r]._kill(t,e)&&(n=!0);return n},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},g._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},g.totalTime=function(e,i,r){this._forcingPlayhead=!0;var n=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,n},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,n=this._last,a=999999999999;n;)e=n._prev,n._dirty&&n.totalDuration(),n._startTime>a&&this._sortChildren&&!n._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(n,n._startTime-n._delay),this._calculatingDuration=0):a=n._startTime,n._startTime<0&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale,this._time-=n._startTime,this._totalTime-=n._startTime,this._rawPrevTime-=n._startTime),this.shiftChildren(-n._startTime,!1,-9999999999),a=0),(i=n._startTime+n._totalDuration/n._timeScale)>r&&(r=i),n=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},g.paused=function(e){if(!e)for(var i=this._first,r=this._time;i;)i._startTime===r&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},n},!0),i._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,r){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},a=e._internals,s=a.lazyTweens,o=a.lazyRender,l=i._gsDefine.globals,u=new r(null,null,1,0),f=n.prototype=new t;return f.constructor=n,f.kill()._gc=!1,n.version="1.20.3",f.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},f.addCallback=function(t,i,r,n){return this.add(e.delayedCall(0,t,r,n),i)},f.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,n=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===n&&i[r]._enabled(!1,!1);return this},f.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},f.tweenTo=function(t,i){i=i||{};var r,n,a,s={ease:u,useFrames:this.usesFrames(),immediateRender:!1},o=i.repeat&&l.TweenMax||e;for(n in i)s[n]=i[n];return s.time=this._parseTimeOrLabel(t),r=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,a=new o(this,r,s),s.onStart=function(){a.target.paused(!0),a.vars.time!==a.target.time()&&r===a.duration()&&a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||a,i.onStartParams||[])},a},f.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var r=this.tweenTo(e,i);return r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},f.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,n,a,l,u,f,h,c,p=this._time,d=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,g=this._totalTime,_=this._startTime,v=this._timeScale,y=this._rawPrevTime,b=this._paused,x=this._cycle;if(p!==this._time&&(t+=this._time-p),t>=d-1e-7&&t>=0)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(n=!0,l="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||y<0||1e-10===y)&&y!==t&&this._first&&(u=!0,y>1e-10&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=m,t=m+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==p||0===m&&1e-10!==y&&(y>0||t<0&&y>=0)&&!this._locked)&&(l="onReverseComplete",n=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=n=!0,l="onReverseComplete"):y>=0&&this._first&&(u=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=m||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;t=0,this._initted||(u=!0)}else if(0===m&&y<0&&(u=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(f=m+this._repeatDelay,this._cycle=this._totalTime/f>>0,0!==this._cycle&&this._cycle===this._totalTime/f&&g<=t&&this._cycle--,this._time=this._totalTime-this._cycle*f,this._yoyo&&0!=(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,t=m+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if((t=this._time)>=p||this._repeat&&x!==this._cycle)for(r=this._first;r&&r._startTime<=t&&!h;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(h=r),r=r._next;else for(r=this._last;r&&r._startTime>=t&&!h;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(h=r),r=r._prev;h&&h._startTime<m&&(this._time=t=h._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==x&&!this._locked){var w=this._yoyo&&0!=(1&x),T=w===(this._yoyo&&0!=(1&this._cycle)),S=this._totalTime,k=this._cycle,P=this._rawPrevTime,A=this._time;if(this._totalTime=x*m,this._cycle<x?w=!w:this._totalTime+=m,this._time=p,this._rawPrevTime=0===m?y-1e-4:y,this._cycle=x,this._locked=!0,p=w?0:m,this.render(p,e,0===m),e||this._gc||this.vars.onRepeat&&(this._cycle=k,this._locked=!1,this._callback("onRepeat")),p!==this._time)return;if(T&&(this._cycle=x,this._locked=!0,p=w?m+1e-4:-1e-4,this.render(p,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=A,this._totalTime=S,this._cycle=k,this._rawPrevTime=P}if(this._time!==p&&this._first||i||u||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==g&&t>0&&(this._active=!0),0===g&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),(c=this._time)>=p)for(r=this._first;r&&(a=r._next,c===this._time&&(!this._paused||b));)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(h===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,c===this._time&&(!this._paused||b));){if(r._active||r._startTime<=p&&!r._paused&&!r._gc){if(h===r){for(h=r._prev;h&&h.endTime()>this._time;)h.render(h._reversed?h.totalDuration()-(t-h._startTime)*h._timeScale:(t-h._startTime)*h._timeScale,e,i),h=h._prev;h=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)}r=a}this._onUpdate&&(e||(s.length&&o(),this._callback("onUpdate"))),l&&(this._locked||this._gc||_!==this._startTime&&v===this._timeScale||(0===this._time||d>=this.totalDuration())&&(n&&(s.length&&o(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))}else g!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},f.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var r,n,a=[],s=this.getChildren(t,e,i),o=0,l=s.length;for(r=0;r<l;r++)(n=s[r]).isActive()&&(a[o++]=n);return a},f.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;e<r;e++)if(i[e].time>t)return i[e].name;return null},f.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},f.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},f.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},f.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},f.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},f.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},f.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},f.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},f.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},f.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},f.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var t=180/Math.PI,e=[],r=[],n=[],a={},s=i._gsDefine.globals,o=function(t,e,i,r){i===r&&(i=r-(r-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=r,this.da=r-t,this.ca=i-t,this.ba=e-t},l=function(t,e,i,r){var n={a:t},a={},s={},o={c:r},l=(t+e)/2,u=(e+i)/2,f=(i+r)/2,h=(l+u)/2,c=(u+f)/2,p=(c-h)/8;return n.b=l+(t-l)/4,a.b=h+p,n.c=a.a=(n.b+a.b)/2,a.c=s.a=(h+c)/2,s.b=c-p,o.b=f+(r-f)/4,s.c=o.a=(s.b+o.b)/2,[n,a,s,o]},u=function(t,i,a,s,o){var u,f,h,c,p,d,m,g,_,v,y,b,x,w=t.length-1,T=0,S=t[0].a;for(u=0;u<w;u++)f=(p=t[T]).a,h=p.d,c=t[T+1].d,o?(y=e[u],x=((b=r[u])+y)*i*.25/(s?.5:n[u]||.5),g=h-((d=h-(h-f)*(s?.5*i:0!==y?x/y:0))+(((m=h+(c-h)*(s?.5*i:0!==b?x/b:0))-d)*(3*y/(y+b)+.5)/4||0))):g=h-((d=h-(h-f)*i*.5)+(m=h+(c-h)*i*.5))/2,d+=g,m+=g,p.c=_=d,p.b=0!==u?S:S=p.a+.6*(p.c-p.a),p.da=h-f,p.ca=_-f,p.ba=S-f,a?(v=l(f,S,_,h),t.splice(T,1,v[0],v[1],v[2],v[3]),T+=4):T++,S=m;(p=t[T]).b=S,p.c=S+.4*(p.d-S),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=S-p.a,a&&(v=l(p.a,S,p.c,p.d),t.splice(T,1,v[0],v[1],v[2],v[3]))},f=function(t,i,n,a){var s,l,u,f,h,c,p=[];if(a)for(l=(t=[a].concat(t)).length;--l>-1;)"string"==typeof(c=t[l][i])&&"="===c.charAt(1)&&(t[l][i]=a[i]+Number(c.charAt(0)+c.substr(2)));if((s=t.length-2)<0)return p[0]=new o(t[0][i],0,0,t[0][i]),p;for(l=0;l<s;l++)u=t[l][i],f=t[l+1][i],p[l]=new o(u,0,0,f),n&&(h=t[l+2][i],e[l]=(e[l]||0)+(f-u)*(f-u),r[l]=(r[l]||0)+(h-f)*(h-f));return p[l]=new o(t[l][i],0,0,t[l+1][i]),p},h=function(t,i,s,o,l,h){var c,p,d,m,g,_,v,y,b={},x=[],w=h||t[0];l="string"==typeof l?","+l+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==i&&(i=1);for(p in t[0])x.push(p);if(t.length>1){for(y=t[t.length-1],v=!0,c=x.length;--c>-1;)if(p=x[c],Math.abs(w[p]-y[p])>.05){v=!1;break}v&&(t=t.concat(),h&&t.unshift(h),t.push(t[1]),h=t[t.length-3])}for(e.length=r.length=n.length=0,c=x.length;--c>-1;)p=x[c],a[p]=-1!==l.indexOf(","+p+","),b[p]=f(t,p,a[p],h);for(c=e.length;--c>-1;)e[c]=Math.sqrt(e[c]),r[c]=Math.sqrt(r[c]);if(!o){for(c=x.length;--c>-1;)if(a[p])for(_=(d=b[x[c]]).length-1,m=0;m<_;m++)g=d[m+1].da/r[m]+d[m].da/e[m]||0,n[m]=(n[m]||0)+g*g;for(c=n.length;--c>-1;)n[c]=Math.sqrt(n[c])}for(c=x.length,m=s?4:1;--c>-1;)d=b[p=x[c]],u(d,i,s,o,a[p]),v&&(d.splice(0,m),d.splice(d.length-m,m));return b},c=function(t,e,i){for(var r,n,a,s,o,l,u,f,h,c,p,d=1/i,m=t.length;--m>-1;)for(a=(c=t[m]).a,s=c.d-a,o=c.c-a,l=c.b-a,r=n=0,f=1;f<=i;f++)r=n-(n=((u=d*f)*u*s+3*(h=1-u)*(u*o+h*l))*u),e[p=m*i+f-1]=(e[p]||0)+r*r},p=i._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,n,a,s,l,u=e.values||[],f={},p=u[0],d=e.autoRotate||i.vars.orientToBezier;this._autoRotate=d?d instanceof Array?d:[["x","y","rotation",!0===d?0:Number(d)||0]]:null;for(r in p)this._props.push(r);for(a=this._props.length;--a>-1;)r=this._props[a],this._overwriteProps.push(r),n=this._func[r]="function"==typeof t[r],f[r]=n?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),l||f[r]!==u[0][r]&&(l=f);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?h(u,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,l):function(t,e,i){var r,n,a,s,l,u,f,h,c,p,d,m={},g="cubic"===(e=e||"soft")?3:2,_="soft"===e,v=[];if(_&&i&&(t=[i].concat(t)),null==t||t.length<g+1)throw"invalid Bezier data";for(c in t[0])v.push(c);for(u=v.length;--u>-1;){for(m[c=v[u]]=l=[],p=0,h=t.length,f=0;f<h;f++)r=null==i?t[f][c]:"string"==typeof(d=t[f][c])&&"="===d.charAt(1)?i[c]+Number(d.charAt(0)+d.substr(2)):Number(d),_&&f>1&&f<h-1&&(l[p++]=(r+l[p-2])/2),l[p++]=r;for(h=p-g+1,p=0,f=0;f<h;f+=g)r=l[f],n=l[f+1],a=l[f+2],s=2===g?0:l[f+3],l[p++]=d=3===g?new o(r,n,a,s):new o(r,(2*n+r)/3,(2*n+a)/3,a);l.length=p}return m}(u,e.type,f),this._segCount=this._beziers[r].length,this._timeRes){var m=function(t,e){var i,r,n,a,s=[],o=[],l=0,u=0,f=(e=e>>0||6)-1,h=[],p=[];for(i in t)c(t[i],s,e);for(n=s.length,r=0;r<n;r++)l+=Math.sqrt(s[r]),p[a=r%e]=l,a===f&&(u+=l,h[a=r/e>>0]=p,o[a]=u,l=0,p=[]);return{length:u,lengths:o,segments:h}}(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(d=this._autoRotate)for(this._initialRotations=[],d[0]instanceof Array||(this._autoRotate=d=[d]),a=d.length;--a>-1;){for(s=0;s<3;s++)r=d[a][s],this._func[r]="function"==typeof t[r]&&t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)];r=d[a][2],this._initialRotations[a]=(this._func[r]?this._func[r].call(this._target):this._target[r])||0,this._overwriteProps.push(r)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,r,n,a,s,o,l,u,f,h,c=this._segCount,p=this._func,d=this._target,m=e!==this._startRatio;if(this._timeRes){if(f=this._lengths,h=this._curSeg,e*=this._length,n=this._li,e>this._l2&&n<c-1){for(u=c-1;n<u&&(this._l2=f[++n])<=e;);this._l1=f[n-1],this._li=n,this._curSeg=h=this._segments[n],this._s2=h[this._s1=this._si=0]}else if(e<this._l1&&n>0){for(;n>0&&(this._l1=f[--n])>=e;);0===n&&e<this._l1?this._l1=0:n++,this._l2=f[n],this._li=n,this._curSeg=h=this._segments[n],this._s1=h[(this._si=h.length-1)-1]||0,this._s2=h[this._si]}if(i=n,e-=this._l1,n=this._si,e>this._s2&&n<h.length-1){for(u=h.length-1;n<u&&(this._s2=h[++n])<=e;);this._s1=h[n-1],this._si=n}else if(e<this._s1&&n>0){for(;n>0&&(this._s1=h[--n])>=e;);0===n&&e<this._s1?this._s1=0:n++,this._s2=h[n],this._si=n}o=(n+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else o=(e-(i=e<0?0:e>=1?c-1:c*e>>0)*(1/c))*c;for(r=1-o,n=this._props.length;--n>-1;)a=this._props[n],l=(o*o*(s=this._beziers[a][i]).da+3*r*(o*s.ca+r*s.ba))*o+s.a,this._mod[a]&&(l=this._mod[a](l,d)),p[a]?d[a](l):d[a]=l;if(this._autoRotate){var g,_,v,y,b,x,w,T=this._autoRotate;for(n=T.length;--n>-1;)a=T[n][2],x=T[n][3]||0,w=!0===T[n][4]?1:t,s=this._beziers[T[n][0]],g=this._beziers[T[n][1]],s&&g&&(s=s[i],g=g[i],_=s.a+(s.b-s.a)*o,_+=((y=s.b+(s.c-s.b)*o)-_)*o,y+=(s.c+(s.d-s.c)*o-y)*o,v=g.a+(g.b-g.a)*o,v+=((b=g.b+(g.c-g.b)*o)-v)*o,b+=(g.c+(g.d-g.c)*o-b)*o,l=m?Math.atan2(b-v,y-_)*w+x:this._initialRotations[n],this._mod[a]&&(l=this._mod[a](l,d)),p[a]?d[a](l):d[a]=l)}}}),d=p.prototype;p.bezierThrough=h,p.cubicToQuadratic=l,p._autoCSS=!0,p.quadraticToCubic=function(t,e,i){return new o(t,(2*e+t)/3,(2*e+i)/3,i)},p._cssRegister=function(){var t=s.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,r=e._setPluginRatio,n=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,a,s,o,l){e instanceof Array&&(e={values:e}),l=new p;var u,f,h,c=e.values,d=c.length-1,m=[],g={};if(d<0)return o;for(u=0;u<=d;u++)h=i(t,c[u],s,o,l,d!==u),m[u]=h.end;for(f in e)g[f]=e[f];return g.values=m,o=new n(t,"bezier",0,0,h.pt,2),o.data=h,o.plugin=l,o.setRatio=r,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(u=!0===g.autoRotate?0:Number(g.autoRotate),g.autoRotate=null!=h.end.left?[["left","top","rotation",u,!1]]:null!=h.end.x&&[["x","y","rotation",u,!1]]),g.autoRotate&&(s._transform||s._enableTransforms(!1),h.autoRotate=s._target._gsTransform,h.proxy.rotation=h.autoRotate.rotation||0,s._overwriteProps.push("rotation")),l._onInitTween(h.proxy,g,s._tween),o}})}},d._mod=function(t){for(var e,i=this._overwriteProps,r=i.length;--r>-1;)(e=t[i[r]])&&"function"==typeof e&&(this._mod[i[r]]=e)},d._kill=function(t){var e,i,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=r.length;--i>-1;)r[i]===e&&r.splice(i,1);if(r=this._autoRotate)for(i=r.length;--i>-1;)t[r[i][2]]&&r.splice(i,1);return this._super._kill.call(this,t)}}(),i._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var r,n,a,s,o=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=o.prototype.setRatio},l=i._gsDefine.globals,u={},f=o.prototype=new t("css");f.constructor=o,o.version="1.20.3",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",o.defaultSmoothOrigin=!0,f="px",o.suffixMap={top:f,right:f,bottom:f,left:f,width:f,height:f,fontSize:f,padding:f,margin:f,perspective:f,lineHeight:""};var h,c,p,d,m,g,_,v,y=/(?:\-|\.|\b)(\d|\.|e\-)+/g,b=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,w=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,T=/(?:\d|\-|\+|=|#|\.)*/g,S=/opacity *= *([^)]*)/i,k=/opacity:([^;]*)/i,P=/alpha\(opacity *=.+?\)/i,A=/^(rgb|hsl)/,O=/([A-Z])/g,M=/-([a-z])/gi,D=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,C=function(t,e){return e.toUpperCase()},E=/(?:Left|Right|Width)/i,R=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,F=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,j=/,(?=[^\)]*(?:\(|$))/gi,z=/[\s,\(]/i,L=Math.PI/180,I=180/Math.PI,B={},Y={style:{}},N=i.document||{createElement:function(){return Y}},X=function(t,e){return N.createElementNS?N.createElementNS(e||"http://www.w3.org/1999/xhtml",t):N.createElement(t)},V=X("div"),U=X("img"),q=o._internals={_specialProps:u},H=(i.navigator||{}).userAgent||"",Z=function(){var t=H.indexOf("Android"),e=X("a");return p=-1!==H.indexOf("Safari")&&-1===H.indexOf("Chrome")&&(-1===t||parseFloat(H.substr(t+8,2))>3),m=p&&parseFloat(H.substr(H.indexOf("Version/")+8,2))<6,d=-1!==H.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(H)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(H))&&(g=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),G=function(t){return S.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},W=function(t){i.console&&console.log(t)},Q="",$="",K=function(t,e){var i,r,n=(e=e||V).style;if(void 0!==n[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===n[i[r]+t];);return r>=0?($=3===r?"ms":i[r],Q="-"+$.toLowerCase()+"-",$+t):null},J=N.defaultView?N.defaultView.getComputedStyle:function(){},tt=o.getStyle=function(t,e,i,r,n){var a;return Z||"opacity"!==e?(!r&&t.style[e]?a=t.style[e]:(i=i||J(t))?a=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(O,"-$1").toLowerCase()):t.currentStyle&&(a=t.currentStyle[e]),null==n||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:n):G(t)},et=q.convertToPixels=function(t,i,r,n,a){if("px"===n||!n&&"lineHeight"!==i)return r;if("auto"===n||!r)return 0;var s,l,u,f=E.test(i),h=t,c=V.style,p=r<0,d=1===r;if(p&&(r=-r),d&&(r*=100),"lineHeight"!==i||n)if("%"===n&&-1!==i.indexOf("border"))s=r/100*(f?t.clientWidth:t.clientHeight);else{if(c.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==n&&h.appendChild&&"v"!==n.charAt(0)&&"rem"!==n)c[f?"borderLeftWidth":"borderTopWidth"]=r+n;else{if(h=t.parentNode||N.body,-1!==tt(h,"display").indexOf("flex")&&(c.position="absolute"),l=h._gsCache,u=e.ticker.frame,l&&f&&l.time===u)return l.width*r/100;c[f?"width":"height"]=r+n}h.appendChild(V),s=parseFloat(V[f?"offsetWidth":"offsetHeight"]),h.removeChild(V),f&&"%"===n&&!1!==o.cacheWidths&&((l=h._gsCache=h._gsCache||{}).time=u,l.width=s/r*100),0!==s||a||(s=et(t,i,r,n,!0))}else l=J(t).lineHeight,t.style.lineHeight=r,s=parseFloat(J(t).lineHeight),t.style.lineHeight=l;return d&&(s/=100),p?-s:s},it=q.calculateOffset=function(t,e,i){if("absolute"!==tt(t,"position",i))return 0;var r="left"===e?"Left":"Top",n=tt(t,"margin"+r,i);return t["offset"+r]-(et(t,e,parseFloat(n),n.replace(T,""))||0)},rt=function(t,e){var i,r,n,a={};if(e=e||J(t,null))if(i=e.length)for(;--i>-1;)-1!==(n=e[i]).indexOf("-transform")&&Dt!==n||(a[n.replace(M,C)]=e.getPropertyValue(n));else for(i in e)-1!==i.indexOf("Transform")&&Mt!==i||(a[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===a[i]&&(a[i.replace(M,C)]=e[i]);return Z||(a.opacity=G(t)),r=Vt(t,e,!1),a.rotation=r.rotation,a.skewX=r.skewX,a.scaleX=r.scaleX,a.scaleY=r.scaleY,a.x=r.x,a.y=r.y,Et&&(a.z=r.z,a.rotationX=r.rotationX,a.rotationY=r.rotationY,a.scaleZ=r.scaleZ),a.filters&&delete a.filters,a},nt=function(t,e,i,r,n){var a,s,o,l={},u=t.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(a=i[s])||n&&n[s])&&-1===s.indexOf("Origin")&&("number"!=typeof a&&"string"!=typeof a||(l[s]="auto"!==a||"left"!==s&&"top"!==s?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof e[s]||""===e[s].replace(w,"")?a:0:it(t,s),void 0!==u[s]&&(o=new yt(u,s,u[s],o))));if(r)for(s in r)"className"!==s&&(l[s]=r[s]);return{difs:l,firstMPT:o}},at={width:["Left","Right"],height:["Top","Bottom"]},st=["marginLeft","marginRight","marginTop","marginBottom"],ot=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||J(t))[e]||0;if(t.getCTM&&Yt(t))return t.getBBox()[e]||0;var r=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),n=at[e],a=n.length;for(i=i||J(t,null);--a>-1;)r-=parseFloat(tt(t,"padding"+n[a],i,!0))||0,r-=parseFloat(tt(t,"border"+n[a]+"Width",i,!0))||0;return r},lt=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,r=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":r[0],a=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":r[1];if(r.length>3&&!e){for(r=t.split(", ").join(",").split(","),t=[],i=0;i<r.length;i++)t.push(lt(r[i]));return t.join(",")}return null==a?a="center"===n?"50%":"0":"center"===a&&(a="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),t=n+" "+a+(r.length>2?" "+r[2]:""),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==a.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===a.charAt(1),e.ox=parseFloat(n.replace(w,"")),e.oy=parseFloat(a.replace(w,"")),e.v=t),e||t},ut=function(t,e){return"function"==typeof t&&(t=t(v,_)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ft=function(t,e){return"function"==typeof t&&(t=t(v,_)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ht=function(t,e,i,r){var n,a,s,o,l;return"function"==typeof t&&(t=t(v,_)),null==t?o=e:"number"==typeof t?o=t:(n=360,a=t.split("_"),s=((l="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===t.indexOf("rad")?1:I)-(l?0:e),a.length&&(r&&(r[i]=e+s),-1!==t.indexOf("short")&&(s%=n)!==s%(n/2)&&(s=s<0?s+n:s-n),-1!==t.indexOf("_cw")&&s<0?s=(s+9999999999*n)%n-(s/n|0)*n:-1!==t.indexOf("ccw")&&s>0&&(s=(s-9999999999*n)%n-(s/n|0)*n)),o=e+s),o<1e-6&&o>-1e-6&&(o=0),o},ct={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pt=function(t,e,i){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},dt=o.parseColor=function(t,e){var i,r,n,a,s,o,l,u,f,h,c;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ct[t])i=ct[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(r=t.charAt(1))+r+(n=t.charAt(2))+n+(a=t.charAt(3))+a),i=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=c=t.match(y),e){if(-1!==t.indexOf("="))return t.match(b)}else s=Number(i[0])%360/360,o=Number(i[1])/100,r=2*(l=Number(i[2])/100)-(n=l<=.5?l*(o+1):l+o-l*o),i.length>3&&(i[3]=Number(i[3])),i[0]=pt(s+1/3,r,n),i[1]=pt(s,r,n),i[2]=pt(s-1/3,r,n);else i=t.match(y)||ct.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=ct.black;return e&&!c&&(r=i[0]/255,n=i[1]/255,a=i[2]/255,l=((u=Math.max(r,n,a))+(f=Math.min(r,n,a)))/2,u===f?s=o=0:(h=u-f,o=l>.5?h/(2-u-f):h/(u+f),s=u===r?(n-a)/h+(n<a?6:0):u===n?(a-r)/h+2:(r-n)/h+4,s*=60),i[0]=s+.5|0,i[1]=100*o+.5|0,i[2]=100*l+.5|0),i},mt=function(t,e){var i,r,n,a=t.match(gt)||[],s=0,o="";if(!a.length)return t;for(i=0;i<a.length;i++)r=a[i],s+=(n=t.substr(s,t.indexOf(r,s)-s)).length+r.length,3===(r=dt(r,e)).length&&r.push(1),o+=n+(e?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return o+t.substr(s)},gt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(f in ct)gt+="|"+f+"\\b";gt=new RegExp(gt+")","gi"),o.colorStringFilter=function(t){var e,i=t[0]+" "+t[1];gt.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=mt(t[0],e),t[1]=mt(t[1],e)),gt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=o.colorStringFilter);var _t=function(t,e,i,r){if(null==t)return function(t){return t};var n,a=e?(t.match(gt)||[""])[0]:"",s=t.split(a).join("").match(x)||[],o=t.substr(0,t.indexOf(s[0])),l=")"===t.charAt(t.length-1)?")":"",u=-1!==t.indexOf(" ")?" ":",",f=s.length,h=f>0?s[0].replace(y,""):"";return f?n=e?function(t){var e,c,p,d;if("number"==typeof t)t+=h;else if(r&&j.test(t)){for(d=t.replace(j,"|").split("|"),p=0;p<d.length;p++)d[p]=n(d[p]);return d.join(",")}if(e=(t.match(gt)||[a])[0],c=t.split(e).join("").match(x)||[],p=c.length,f>p--)for(;++p<f;)c[p]=i?c[(p-1)/2|0]:s[p];return o+c.join(u)+u+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,a,c;if("number"==typeof t)t+=h;else if(r&&j.test(t)){for(a=t.replace(j,"|").split("|"),c=0;c<a.length;c++)a[c]=n(a[c]);return a.join(",")}if(e=t.match(x)||[],c=e.length,f>c--)for(;++c<f;)e[c]=i?e[(c-1)/2|0]:s[c];return o+e.join(u)+l}:function(t){return t}},vt=function(t){return t=t.split(","),function(e,i,r,n,a,s,o){var l,u=(i+"").split(" ");for(o={},l=0;l<4;l++)o[t[l]]=u[l]=u[l]||u[(l-1)/2>>0];return n.parse(e,o,a,s)}},yt=(q._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,r,n,a,s=this.data,o=s.proxy,l=s.firstMPT;l;)e=o[l.v],l.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),l.t[l.p]=e,l=l._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod(o.rotation,this.t):o.rotation),1===t||0===t)for(l=s.firstMPT,a=1===t?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i[a]=n}}else i[a]=i.s+i.xs0;l=l._next}},function(t,e,i,r,n){this.t=t,this.p=e,this.v=i,this.r=n,r&&(r._prev=this,this._next=r)}),bt=(q._parseToProxy=function(t,e,i,r,n,a){var s,o,l,u,f,h=r,c={},p={},d=i._transform,m=B;for(i._transform=null,B=e,r=f=i.parse(t,e,r,n),B=m,a&&(i._transform=d,h&&(h._prev=null,h._prev&&(h._prev._next=null)));r&&r!==h;){if(r.type<=1&&(o=r.p,p[o]=r.s+r.c,c[o]=r.s,a||(u=new yt(r,"s",o,u,r.r),r.c=0),1===r.type))for(s=r.l;--s>0;)l="xn"+s,p[o=r.p+"_"+l]=r.data[l],c[o]=r[l],a||(u=new yt(r,l,o,u,r.rxp[l]));r=r._next}return{proxy:c,end:p,firstMPT:u,pt:f}},q.CSSPropTween=function(t,e,i,n,a,o,l,u,f,h,c){this.t=t,this.p=e,this.s=i,this.c=n,this.n=l||e,t instanceof bt||s.push(this.n),this.r=u,this.type=o||0,f&&(this.pr=f,r=!0),this.b=void 0===h?i:h,this.e=void 0===c?i+n:c,a&&(this._next=a,a._prev=this)}),xt=function(t,e,i,r,n,a){var s=new bt(t,e,i,r-i,n,-1,a);return s.b=i,s.e=s.xs0=r,s},wt=o.parseComplex=function(t,e,i,r,n,a,s,l,u,f){i=i||a||"","function"==typeof r&&(r=r(v,_)),s=new bt(t,e,0,0,s,f?2:1,null,!1,l,i,r),r+="",n&&gt.test(r+i)&&(r=[i,r],o.colorStringFilter(r),i=r[0],r=r[1]);var c,p,d,m,g,x,w,T,S,k,P,A,O,M=i.split(", ").join(",").split(" "),D=r.split(", ").join(",").split(" "),C=M.length,E=!1!==h;for(-1===r.indexOf(",")&&-1===i.indexOf(",")||(-1!==(r+i).indexOf("rgb")||-1!==(r+i).indexOf("hsl")?(M=M.join(" ").replace(j,", ").split(" "),D=D.join(" ").replace(j,", ").split(" ")):(M=M.join(" ").split(",").join(", ").split(" "),D=D.join(" ").split(",").join(", ").split(" ")),C=M.length),C!==D.length&&(C=(M=(a||"").split(" ")).length),s.plugin=u,s.setRatio=f,gt.lastIndex=0,c=0;c<C;c++)if(m=M[c],g=D[c],(T=parseFloat(m))||0===T)s.appendXtra("",T,ut(g,T),g.replace(b,""),E&&-1!==g.indexOf("px"),!0);else if(n&&gt.test(m))A=")"+((A=g.indexOf(")")+1)?g.substr(A):""),O=-1!==g.indexOf("hsl")&&Z,k=g,m=dt(m,O),g=dt(g,O),(S=m.length+g.length>6)&&!Z&&0===g[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(D[c]).join("transparent")):(Z||(S=!1),O?s.appendXtra(k.substr(0,k.indexOf("hsl"))+(S?"hsla(":"hsl("),m[0],ut(g[0],m[0]),",",!1,!0).appendXtra("",m[1],ut(g[1],m[1]),"%,",!1).appendXtra("",m[2],ut(g[2],m[2]),S?"%,":"%"+A,!1):s.appendXtra(k.substr(0,k.indexOf("rgb"))+(S?"rgba(":"rgb("),m[0],g[0]-m[0],",",!0,!0).appendXtra("",m[1],g[1]-m[1],",",!0).appendXtra("",m[2],g[2]-m[2],S?",":A,!0),S&&(m=m.length<4?1:m[3],s.appendXtra("",m,(g.length<4?1:g[3])-m,A,!1))),gt.lastIndex=0;else if(x=m.match(y)){if(!(w=g.match(b))||w.length!==x.length)return s;for(d=0,p=0;p<x.length;p++)P=x[p],k=m.indexOf(P,d),s.appendXtra(m.substr(d,k-d),Number(P),ut(w[p],P),"",E&&"px"===m.substr(k+P.length,2),0===p),d=k+P.length;s["xs"+s.l]+=m.substr(d)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+g:g;if(-1!==r.indexOf("=")&&s.data){for(A=s.xs0+s.data.s,c=1;c<s.l;c++)A+=s["xs"+c]+s.data["xn"+c];s.e=A+s["xs"+c]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},Tt=9;for((f=bt.prototype).l=f.pr=0;--Tt>0;)f["xn"+Tt]=0,f["xs"+Tt]="";f.xs0="",f._next=f._prev=f.xfirst=f.data=f.plugin=f.setRatio=f.rxp=null,f.appendXtra=function(t,e,i,r,n,a){var s=this,o=s.l;return s["xs"+o]+=a&&(o||s["xs"+o])?" "+t:t||"",i||0===o||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=r||"",o>0?(s.data["xn"+o]=e+i,s.rxp["xn"+o]=n,s["xn"+o]=e,s.plugin||(s.xfirst=new bt(s,"xn"+o,e,i,s.xfirst||s,0,s.n,n,s.pr),s.xfirst.xs0=0),s):(s.data={s:e+i},s.rxp={},s.s=e,s.c=i,s.r=n,s)):(s["xs"+o]+=e+(r||""),s)};var St=function(t,e){e=e||{},this.p=e.prefix?K(t)||t:t,u[t]=u[this.p]=this,this.format=e.formatter||_t(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},kt=q._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var r,n=t.split(","),a=e.defaultValue;for(i=i||[a],r=0;r<n.length;r++)e.prefix=0===r&&e.prefix,e.defaultValue=i[r]||a,new St(n[r],e)},Pt=q._registerPluginProp=function(t){if(!u[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";kt(t,{parser:function(t,i,r,n,a,s,o){var f=l.com.greensock.plugins[e];return f?(f._cssRegister(),u[r].parse(t,i,r,n,a,s,o)):(W("Error: "+e+" js file not loaded."),a)}})}};(f=St.prototype).parseComplex=function(t,e,i,r,n,a){var s,o,l,u,f,h,c=this.keyword;if(this.multi&&(j.test(i)||j.test(e)?(o=e.replace(j,"|").split("|"),l=i.replace(j,"|").split("|")):c&&(o=[e],l=[i])),l){for(u=l.length>o.length?l.length:o.length,s=0;s<u;s++)e=o[s]=o[s]||this.dflt,i=l[s]=l[s]||this.dflt,c&&(f=e.indexOf(c))!==(h=i.indexOf(c))&&(-1===h?o[s]=o[s].split(c).join(""):-1===f&&(o[s]+=" "+c));e=o.join(", "),i=l.join(", ")}return wt(t,this.p,e,i,this.clrs,this.dflt,r,this.pr,n,a)},f.parse=function(t,e,i,r,n,s,o){return this.parseComplex(t.style,this.format(tt(t,this.p,a,!1,this.dflt)),this.format(e),n,s)},o.registerSpecialProp=function(t,e,i){kt(t,{parser:function(t,r,n,a,s,o,l){var u=new bt(t,n,0,0,s,2,n,!1,i);return u.plugin=o,u.setRatio=e(t,r,a._tween,n),u},priority:i})},o.useSVGTransformAttr=!0;var At,Ot="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Mt=K("transform"),Dt=Q+"transform",Ct=K("transformOrigin"),Et=null!==K("perspective"),Rt=q.Transform=function(){this.perspective=parseFloat(o.defaultTransformPerspective)||0,this.force3D=!(!1===o.defaultForce3D||!Et)&&(o.defaultForce3D||"auto")},Ft=i.SVGElement,jt=function(t,e,i){var r,n=N.createElementNS("http://www.w3.org/2000/svg",t),a=/([a-z])([A-Z])/g;for(r in i)n.setAttributeNS(null,r.replace(a,"$1-$2").toLowerCase(),i[r]);return e.appendChild(n),n},zt=N.documentElement||{},Lt=function(){var t,e,r,n=g||/Android/i.test(H)&&!i.chrome;return N.createElementNS&&!n&&(t=jt("svg",zt),r=(e=jt("rect",t,{width:100,height:50,x:100})).getBoundingClientRect().width,e.style[Ct]="50% 50%",e.style[Mt]="scaleX(0.5)",n=r===e.getBoundingClientRect().width&&!(d&&Et),zt.removeChild(t)),n}(),It=function(t,e,i,r,n,a){var s,l,u,f,h,c,p,d,m,g,_,v,y,b,x=t._gsTransform,w=Xt(t,!0);x&&(y=x.xOrigin,b=x.yOrigin),(!r||(s=r.split(" ")).length<2)&&(0===(p=t.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),s=[(-1!==(e=lt(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*p.width:parseFloat(e[0]))+p.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*p.height:parseFloat(e[1]))+p.y]),i.xOrigin=f=parseFloat(s[0]),i.yOrigin=h=parseFloat(s[1]),r&&w!==Nt&&(c=w[0],p=w[1],d=w[2],m=w[3],g=w[4],_=w[5],(v=c*m-p*d)&&(l=f*(m/v)+h*(-d/v)+(d*_-m*g)/v,u=f*(-p/v)+h*(c/v)-(c*_-p*g)/v,f=i.xOrigin=s[0]=l,h=i.yOrigin=s[1]=u)),x&&(a&&(i.xOffset=x.xOffset,i.yOffset=x.yOffset,x=i),n||!1!==n&&!1!==o.defaultSmoothOrigin?(l=f-y,u=h-b,x.xOffset+=l*w[0]+u*w[2]-l,x.yOffset+=l*w[1]+u*w[3]-u):x.xOffset=x.yOffset=0),a||t.setAttribute("data-svg-origin",s.join(" "))},Bt=function(t){var e,i=X("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,n=this.nextSibling,a=this.style.cssText;if(zt.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Bt}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return n?r.insertBefore(this,n):r.appendChild(this),zt.removeChild(i),this.style.cssText=a,e},Yt=function(t){return!(!Ft||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!function(t){try{return t.getBBox()}catch(e){return Bt.call(t,!0)}}(t))},Nt=[1,0,0,1,0,0],Xt=function(t,e){var i,r,n,a,s,o,l=t._gsTransform||new Rt,u=t.style;if(Mt?r=tt(t,Dt,null,!0):t.currentStyle&&(r=(r=t.currentStyle.filter.match(R))&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),l.x||0,l.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,!Mt||!(o=!J(t)||"none"===J(t).display)&&t.parentNode||(o&&(a=u.display,u.display="block"),t.parentNode||(s=1,zt.appendChild(t)),i=!(r=tt(t,Dt,null,!0))||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,a?u.display=a:o&&Ht(u,"display"),s&&zt.removeChild(t)),(l.svg||t.getCTM&&Yt(t))&&(i&&-1!==(u[Mt]+"").indexOf("matrix")&&(r=u[Mt],i=0),n=t.getAttribute("transform"),i&&n&&(-1!==n.indexOf("matrix")?(r=n,i=0):-1!==n.indexOf("translate")&&(r="matrix(1,0,0,1,"+n.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Nt;for(n=(r||"").match(y)||[],Tt=n.length;--Tt>-1;)a=Number(n[Tt]),n[Tt]=(s=a-(a|=0))?(1e5*s+(s<0?-.5:.5)|0)/1e5+a:a;return e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},Vt=q.getTransform=function(t,i,r,n){if(t._gsTransform&&r&&!n)return t._gsTransform;var a,s,l,u,f,h,c=r?t._gsTransform||new Rt:new Rt,p=c.scaleX<0,d=Et?parseFloat(tt(t,Ct,i,!1,"0 0 0").split(" ")[2])||c.zOrigin||0:0,m=parseFloat(o.defaultTransformPerspective)||0;if(c.svg=!(!t.getCTM||!Yt(t)),c.svg&&(It(t,tt(t,Ct,i,!1,"50% 50%")+"",c,t.getAttribute("data-svg-origin")),At=o.useSVGTransformAttr||Lt),(a=Xt(t))!==Nt){if(16===a.length){var g,_,v,y,b,x=a[0],w=a[1],T=a[2],S=a[3],k=a[4],P=a[5],A=a[6],O=a[7],M=a[8],D=a[9],C=a[10],E=a[12],R=a[13],F=a[14],j=a[11],z=Math.atan2(A,C);c.zOrigin&&(E=M*(F=-c.zOrigin)-a[12],R=D*F-a[13],F=C*F+c.zOrigin-a[14]),c.rotationX=z*I,z&&(g=k*(y=Math.cos(-z))+M*(b=Math.sin(-z)),_=P*y+D*b,v=A*y+C*b,M=k*-b+M*y,D=P*-b+D*y,C=A*-b+C*y,j=O*-b+j*y,k=g,P=_,A=v),z=Math.atan2(-T,C),c.rotationY=z*I,z&&(_=w*(y=Math.cos(-z))-D*(b=Math.sin(-z)),v=T*y-C*b,D=w*b+D*y,C=T*b+C*y,j=S*b+j*y,x=g=x*y-M*b,w=_,T=v),z=Math.atan2(w,x),c.rotation=z*I,z&&(g=x*(y=Math.cos(z))+w*(b=Math.sin(z)),_=k*y+P*b,v=M*y+D*b,w=w*y-x*b,P=P*y-k*b,D=D*y-M*b,x=g,k=_,M=v),c.rotationX&&Math.abs(c.rotationX)+Math.abs(c.rotation)>359.9&&(c.rotationX=c.rotation=0,c.rotationY=180-c.rotationY),z=Math.atan2(k,P),c.scaleX=(1e5*Math.sqrt(x*x+w*w+T*T)+.5|0)/1e5,c.scaleY=(1e5*Math.sqrt(P*P+A*A)+.5|0)/1e5,c.scaleZ=(1e5*Math.sqrt(M*M+D*D+C*C)+.5|0)/1e5,x/=c.scaleX,k/=c.scaleY,w/=c.scaleX,P/=c.scaleY,Math.abs(z)>2e-5?(c.skewX=z*I,k=0,"simple"!==c.skewType&&(c.scaleY*=1/Math.cos(z))):c.skewX=0,c.perspective=j?1/(j<0?-j:j):0,c.x=E,c.y=R,c.z=F,c.svg&&(c.x-=c.xOrigin-(c.xOrigin*x-c.yOrigin*k),c.y-=c.yOrigin-(c.yOrigin*w-c.xOrigin*P))}else if(!Et||n||!a.length||c.x!==a[4]||c.y!==a[5]||!c.rotationX&&!c.rotationY){var L=a.length>=6,B=L?a[0]:1,Y=a[1]||0,N=a[2]||0,X=L?a[3]:1;c.x=a[4]||0,c.y=a[5]||0,l=Math.sqrt(B*B+Y*Y),u=Math.sqrt(X*X+N*N),f=B||Y?Math.atan2(Y,B)*I:c.rotation||0,h=N||X?Math.atan2(N,X)*I+f:c.skewX||0,c.scaleX=l,c.scaleY=u,c.rotation=f,c.skewX=h,Et&&(c.rotationX=c.rotationY=c.z=0,c.perspective=m,c.scaleZ=1),c.svg&&(c.x-=c.xOrigin-(c.xOrigin*B+c.yOrigin*N),c.y-=c.yOrigin-(c.xOrigin*Y+c.yOrigin*X))}Math.abs(c.skewX)>90&&Math.abs(c.skewX)<270&&(p?(c.scaleX*=-1,c.skewX+=c.rotation<=0?180:-180,c.rotation+=c.rotation<=0?180:-180):(c.scaleY*=-1,c.skewX+=c.skewX<=0?180:-180)),c.zOrigin=d;for(s in c)c[s]<2e-5&&c[s]>-2e-5&&(c[s]=0)}return r&&(t._gsTransform=c,c.svg&&(At&&t.style[Mt]?e.delayedCall(.001,function(){Ht(t.style,Mt)}):!At&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),c},Ut=q.set3DTransformRatio=q.setTransformRatio=function(t){var e,i,r,n,a,s,o,l,u,f,h,c,p,m,g,_,v,y,b,x,w,T=this.data,S=this.t.style,k=T.rotation,P=T.rotationX,A=T.rotationY,O=T.scaleX,M=T.scaleY,D=T.scaleZ,C=T.x,E=T.y,R=T.z,F=T.svg,j=T.perspective,z=T.force3D,I=T.skewY,B=T.skewX;if(I&&(B+=I,k+=I),!((1!==t&&0!==t||"auto"!==z||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&z||R||j||A||P||1!==D)||At&&F||!Et)k||B||F?(k*=L,x=B*L,w=1e5,i=Math.cos(k)*O,a=Math.sin(k)*O,r=Math.sin(k-x)*-M,s=Math.cos(k-x)*M,x&&"simple"===T.skewType&&(e=Math.tan(x-I*L),r*=e=Math.sqrt(1+e*e),s*=e,I&&(e=Math.tan(I*L),i*=e=Math.sqrt(1+e*e),a*=e)),F&&(C+=T.xOrigin-(T.xOrigin*i+T.yOrigin*r)+T.xOffset,E+=T.yOrigin-(T.xOrigin*a+T.yOrigin*s)+T.yOffset,At&&(T.xPercent||T.yPercent)&&(g=this.t.getBBox(),C+=.01*T.xPercent*g.width,E+=.01*T.yPercent*g.height),C<(g=1e-6)&&C>-g&&(C=0),E<g&&E>-g&&(E=0)),b=(i*w|0)/w+","+(a*w|0)/w+","+(r*w|0)/w+","+(s*w|0)/w+","+C+","+E+")",F&&At?this.t.setAttribute("transform","matrix("+b):S[Mt]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix(":"matrix(")+b):S[Mt]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix(":"matrix(")+O+",0,0,"+M+","+C+","+E+")";else{if(d&&(O<(g=1e-4)&&O>-g&&(O=D=2e-5),M<g&&M>-g&&(M=D=2e-5),!j||T.z||T.rotationX||T.rotationY||(j=0)),k||B)k*=L,_=i=Math.cos(k),v=a=Math.sin(k),B&&(k-=B*L,_=Math.cos(k),v=Math.sin(k),"simple"===T.skewType&&(e=Math.tan((B-I)*L),_*=e=Math.sqrt(1+e*e),v*=e,T.skewY&&(e=Math.tan(I*L),i*=e=Math.sqrt(1+e*e),a*=e))),r=-v,s=_;else{if(!(A||P||1!==D||j||F))return void(S[Mt]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) translate3d(":"translate3d(")+C+"px,"+E+"px,"+R+"px)"+(1!==O||1!==M?" scale("+O+","+M+")":""));i=s=1,r=a=0}f=1,n=o=l=u=h=c=0,p=j?-1/j:0,m=T.zOrigin,g=1e-6,",","0",(k=A*L)&&(_=Math.cos(k),l=-(v=Math.sin(k)),h=p*-v,n=i*v,o=a*v,f=_,p*=_,i*=_,a*=_),(k=P*L)&&(e=r*(_=Math.cos(k))+n*(v=Math.sin(k)),y=s*_+o*v,u=f*v,c=p*v,n=r*-v+n*_,o=s*-v+o*_,f*=_,p*=_,r=e,s=y),1!==D&&(n*=D,o*=D,f*=D,p*=D),1!==M&&(r*=M,s*=M,u*=M,c*=M),1!==O&&(i*=O,a*=O,l*=O,h*=O),(m||F)&&(m&&(C+=n*-m,E+=o*-m,R+=f*-m+m),F&&(C+=T.xOrigin-(T.xOrigin*i+T.yOrigin*r)+T.xOffset,E+=T.yOrigin-(T.xOrigin*a+T.yOrigin*s)+T.yOffset),C<g&&C>-g&&(C="0"),E<g&&E>-g&&(E="0"),R<g&&R>-g&&(R=0)),b=T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix3d(":"matrix3d(",b+=(i<g&&i>-g?"0":i)+","+(a<g&&a>-g?"0":a)+","+(l<g&&l>-g?"0":l),b+=","+(h<g&&h>-g?"0":h)+","+(r<g&&r>-g?"0":r)+","+(s<g&&s>-g?"0":s),P||A||1!==D?(b+=","+(u<g&&u>-g?"0":u)+","+(c<g&&c>-g?"0":c)+","+(n<g&&n>-g?"0":n),b+=","+(o<g&&o>-g?"0":o)+","+(f<g&&f>-g?"0":f)+","+(p<g&&p>-g?"0":p)+","):b+=",0,0,0,0,1,0,",b+=C+","+E+","+R+","+(j?1+-R/j:1)+")",S[Mt]=b}};(f=Rt.prototype).x=f.y=f.z=f.skewX=f.skewY=f.rotation=f.rotationX=f.rotationY=f.zOrigin=f.xPercent=f.yPercent=f.xOffset=f.yOffset=0,f.scaleX=f.scaleY=f.scaleZ=1,kt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,r,n,s,l){if(r._lastParsedTransform===l)return n;r._lastParsedTransform=l;var u,f=l.scale&&"function"==typeof l.scale?l.scale:0;"function"==typeof l[i]&&(u=l[i],l[i]=e),f&&(l.scale=f(v,t));var h,c,p,d,m,g,y,b,x,w=t._gsTransform,T=t.style,S=Ot.length,k=l,P={},A=Vt(t,a,!0,k.parseTransform),O=k.transform&&("function"==typeof k.transform?k.transform(v,_):k.transform);if(A.skewType=k.skewType||A.skewType||o.defaultSkewType,r._transform=A,O&&"string"==typeof O&&Mt)(c=V.style)[Mt]=O,c.display="block",c.position="absolute",N.body.appendChild(V),h=Vt(V,null,!1),"simple"===A.skewType&&(h.scaleY*=Math.cos(h.skewX*L)),A.svg&&(g=A.xOrigin,y=A.yOrigin,h.x-=A.xOffset,h.y-=A.yOffset,(k.transformOrigin||k.svgOrigin)&&(O={},It(t,lt(k.transformOrigin),O,k.svgOrigin,k.smoothOrigin,!0),g=O.xOrigin,y=O.yOrigin,h.x-=O.xOffset-A.xOffset,h.y-=O.yOffset-A.yOffset),(g||y)&&(b=Xt(V,!0),h.x-=g-(g*b[0]+y*b[2]),h.y-=y-(g*b[1]+y*b[3]))),N.body.removeChild(V),h.perspective||(h.perspective=A.perspective),null!=k.xPercent&&(h.xPercent=ft(k.xPercent,A.xPercent)),null!=k.yPercent&&(h.yPercent=ft(k.yPercent,A.yPercent));else if("object"==typeof k){if(h={scaleX:ft(null!=k.scaleX?k.scaleX:k.scale,A.scaleX),scaleY:ft(null!=k.scaleY?k.scaleY:k.scale,A.scaleY),scaleZ:ft(k.scaleZ,A.scaleZ),x:ft(k.x,A.x),y:ft(k.y,A.y),z:ft(k.z,A.z),xPercent:ft(k.xPercent,A.xPercent),yPercent:ft(k.yPercent,A.yPercent),perspective:ft(k.transformPerspective,A.perspective)},null!=(m=k.directionalRotation))if("object"==typeof m)for(c in m)k[c]=m[c];else k.rotation=m;"string"==typeof k.x&&-1!==k.x.indexOf("%")&&(h.x=0,h.xPercent=ft(k.x,A.xPercent)),"string"==typeof k.y&&-1!==k.y.indexOf("%")&&(h.y=0,h.yPercent=ft(k.y,A.yPercent)),h.rotation=ht("rotation"in k?k.rotation:"shortRotation"in k?k.shortRotation+"_short":"rotationZ"in k?k.rotationZ:A.rotation,A.rotation,"rotation",P),Et&&(h.rotationX=ht("rotationX"in k?k.rotationX:"shortRotationX"in k?k.shortRotationX+"_short":A.rotationX||0,A.rotationX,"rotationX",P),h.rotationY=ht("rotationY"in k?k.rotationY:"shortRotationY"in k?k.shortRotationY+"_short":A.rotationY||0,A.rotationY,"rotationY",P)),h.skewX=ht(k.skewX,A.skewX),h.skewY=ht(k.skewY,A.skewY)}for(Et&&null!=k.force3D&&(A.force3D=k.force3D,d=!0),(p=A.force3D||A.z||A.rotationX||A.rotationY||h.z||h.rotationX||h.rotationY||h.perspective)||null==k.scale||(h.scaleZ=1);--S>-1;)((O=h[x=Ot[S]]-A[x])>1e-6||O<-1e-6||null!=k[x]||null!=B[x])&&(d=!0,n=new bt(A,x,A[x],O,n),x in P&&(n.e=P[x]),n.xs0=0,n.plugin=s,r._overwriteProps.push(n.n));return O=k.transformOrigin,A.svg&&(O||k.svgOrigin)&&(g=A.xOffset,y=A.yOffset,It(t,lt(O),h,k.svgOrigin,k.smoothOrigin),n=xt(A,"xOrigin",(w?A:h).xOrigin,h.xOrigin,n,"transformOrigin"),n=xt(A,"yOrigin",(w?A:h).yOrigin,h.yOrigin,n,"transformOrigin"),g===A.xOffset&&y===A.yOffset||(n=xt(A,"xOffset",w?g:A.xOffset,A.xOffset,n,"transformOrigin"),n=xt(A,"yOffset",w?y:A.yOffset,A.yOffset,n,"transformOrigin")),O="0px 0px"),(O||Et&&p&&A.zOrigin)&&(Mt?(d=!0,x=Ct,O=(O||tt(t,x,a,!1,"50% 50%"))+"",(n=new bt(T,x,0,0,n,-1,"transformOrigin")).b=T[x],n.plugin=s,Et?(c=A.zOrigin,O=O.split(" "),A.zOrigin=(O.length>2&&(0===c||"0px"!==O[2])?parseFloat(O[2]):c)||0,n.xs0=n.e=O[0]+" "+(O[1]||"50%")+" 0px",(n=new bt(A,"zOrigin",0,0,n,-1,n.n)).b=c,n.xs0=n.e=A.zOrigin):n.xs0=n.e=O):lt(O+"",A)),d&&(r._transformType=A.svg&&At||!p&&3!==this._transformType?2:3),u&&(l[i]=u),f&&(l.scale=f),n},prefix:!0}),kt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),kt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,r,s,o){e=this.format(e);var l,u,f,h,c,p,d,m,g,_,v,y,b,x,w,T,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],k=t.style;for(g=parseFloat(t.offsetWidth),_=parseFloat(t.offsetHeight),l=e.split(" "),u=0;u<S.length;u++)this.p.indexOf("border")&&(S[u]=K(S[u])),-1!==(c=h=tt(t,S[u],a,!1,"0px")).indexOf(" ")&&(c=(h=c.split(" "))[0],h=h[1]),p=f=l[u],d=parseFloat(c),y=c.substr((d+"").length),(b="="===p.charAt(1))?(m=parseInt(p.charAt(0)+"1",10),p=p.substr(2),m*=parseFloat(p),v=p.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(p),v=p.substr((m+"").length)),""===v&&(v=n[i]||y),v!==y&&(x=et(t,"borderLeft",d,y),w=et(t,"borderTop",d,y),"%"===v?(c=x/g*100+"%",h=w/_*100+"%"):"em"===v?(c=x/(T=et(t,"borderLeft",1,"em"))+"em",h=w/T+"em"):(c=x+"px",h=w+"px"),b&&(p=parseFloat(c)+m+v,f=parseFloat(h)+m+v)),s=wt(k,S[u],c+" "+h,p+" "+f,!1,"0px",s);return s},prefix:!0,formatter:_t("0px 0px 0px 0px",!1,!0)}),kt("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,r,n,s){return wt(t.style,i,this.format(tt(t,i,a,!1,"0px 0px")),this.format(e),!1,"0px",n)},prefix:!0,formatter:_t("0px 0px",!1,!0)}),kt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,r,n,s){var o,l,u,f,h,c,p="background-position",d=a||J(t,null),m=this.format((d?g?d.getPropertyValue(p+"-x")+" "+d.getPropertyValue(p+"-y"):d.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),_=this.format(e);if(-1!==m.indexOf("%")!=(-1!==_.indexOf("%"))&&_.split(",").length<2&&(c=tt(t,"backgroundImage").replace(D,""))&&"none"!==c){for(o=m.split(" "),l=_.split(" "),U.setAttribute("src",c),u=2;--u>-1;)(f=-1!==(m=o[u]).indexOf("%"))!==(-1!==l[u].indexOf("%"))&&(h=0===u?t.offsetWidth-U.width:t.offsetHeight-U.height,o[u]=f?parseFloat(m)/100*h+"px":parseFloat(m)/h*100+"%");m=o.join(" ")}return this.parseComplex(t.style,m,_,n,s)},formatter:lt}),kt("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="",lt(-1===t.indexOf(" ")?t+" "+t:t)}}),kt("perspective",{defaultValue:"0px",prefix:!0}),kt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),kt("transformStyle",{prefix:!0}),kt("backfaceVisibility",{prefix:!0}),kt("userSelect",{prefix:!0}),kt("margin",{parser:vt("marginTop,marginRight,marginBottom,marginLeft")}),kt("padding",{parser:vt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),kt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,r,n,s){var o,l,u;return g<9?(l=t.currentStyle,u=g<8?" ":",",o="rect("+l.clipTop+u+l.clipRight+u+l.clipBottom+u+l.clipLeft+")",e=this.format(e).split(",").join(u)):(o=this.format(tt(t,this.p,a,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,s)}}),kt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),kt("autoRound,strictUnits",{parser:function(t,e,i,r,n){return n}}),kt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,r,n,s){var o=tt(t,"borderTopWidth",a,!1,"0px"),l=this.format(e).split(" "),u=l[0].replace(T,"");return"px"!==u&&(o=parseFloat(o)/et(t,"borderTopWidth",1,u)+u),this.parseComplex(t.style,this.format(o+" "+tt(t,"borderTopStyle",a,!1,"solid")+" "+tt(t,"borderTopColor",a,!1,"#000")),l.join(" "),n,s)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(gt)||["#000"])[0]}}),kt("borderWidth",{parser:vt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),kt("float,cssFloat,styleFloat",{parser:function(t,e,i,r,n,a){var s=t.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new bt(s,o,0,0,n,-1,i,!1,0,s[o],e)}});var qt=function(t){var e,i=this.t,r=i.filter||tt(this.data,"filter")||"",n=this.s+this.c*t|0;100===n&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),e=!tt(this.data,"filter")):(i.filter=r.replace(P,""),e=!0)),e||(this.xn1&&(i.filter=r=r||"alpha(opacity="+n+")"),-1===r.indexOf("pacity")?0===n&&this.xn1||(i.filter=r+" alpha(opacity="+n+")"):i.filter=r.replace(S,"opacity="+n))};kt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,r,n,s){var o=parseFloat(tt(t,"opacity",a,!1,"1")),l=t.style,u="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),u&&1===o&&"hidden"===tt(t,"visibility",a)&&0!==e&&(o=0),Z?n=new bt(l,"opacity",o,e-o,n):((n=new bt(l,"opacity",100*o,100*(e-o),n)).xn1=u?1:0,l.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=s,n.setRatio=qt),u&&((n=new bt(l,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",r._overwriteProps.push(n.n),r._overwriteProps.push(i)),n}});var Ht=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(O,"-$1").toLowerCase())):t.removeAttribute(e))},Zt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Ht(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};kt("className",{parser:function(t,e,i,n,s,o,l){var u,f,h,c,p,d=t.getAttribute("class")||"",m=t.style.cssText;if(s=n._classNamePT=new bt(t,i,0,0,s,2),s.setRatio=Zt,s.pr=-11,r=!0,s.b=d,f=rt(t,a),h=t._gsClassPT){for(c={},p=h.data;p;)c[p.p]=1,p=p._next;h.setRatio(1)}return t._gsClassPT=s,s.e="="!==e.charAt(1)?e:d.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",s.e),u=nt(t,f,rt(t),l,c),t.setAttribute("class",d),s.data=u.firstMPT,t.style.cssText=m,s=s.xfirst=n.parse(t,u.difs,s,o)}});var Gt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,r,n,a,s=this.t.style,o=u.transform.parse;if("all"===this.e)s.cssText="",n=!0;else for(r=(e=this.e.split(" ").join("").split(",")).length;--r>-1;)i=e[r],u[i]&&(u[i].parse===o?n=!0:i="transformOrigin"===i?Ct:u[i].p),Ht(s,i);n&&(Ht(s,Mt),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(kt("clearProps",{parser:function(t,e,i,n,a){return a=new bt(t,i,0,0,a,2),a.setRatio=Gt,a.e=e,a.pr=-10,a.data=n._tween,r=!0,a}}),f="bezier,throwProps,physicsProps,physics2D".split(","),Tt=f.length;Tt--;)Pt(f[Tt]);(f=o.prototype)._firstPT=f._lastParsedTransform=f._transform=null,f._onInitTween=function(t,e,i,l){if(!t.nodeType)return!1;this._target=_=t,this._tween=i,this._vars=e,v=l,h=e.autoRound,r=!1,n=e.suffixMap||o.suffixMap,a=J(t,""),s=this._overwriteProps;var f,d,y,b,x,w,P,A,O,M=t.style;if(c&&""===M.zIndex&&("auto"!==(f=tt(t,"zIndex",a))&&""!==f||this._addLazySet(M,"zIndex",0)),"string"==typeof e&&(b=M.cssText,f=rt(t,a),M.cssText=b+";"+e,f=nt(t,f,rt(t)).difs,!Z&&k.test(e)&&(f.opacity=parseFloat(RegExp.$1)),e=f,M.cssText=b),e.className?this._firstPT=d=u.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=d=this.parse(t,e,null),this._transformType){for(O=3===this._transformType,Mt?p&&(c=!0,""===M.zIndex&&("auto"!==(P=tt(t,"zIndex",a))&&""!==P||this._addLazySet(M,"zIndex",0)),m&&this._addLazySet(M,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(O?"visible":"hidden"))):M.zoom=1,y=d;y&&y._next;)y=y._next;A=new bt(t,"transform",0,0,null,2),this._linkCSSP(A,null,y),A.setRatio=Mt?Ut:function(t){var e,i,r=this.data,n=-r.rotation*L,a=n+r.skewX*L,s=(Math.cos(n)*r.scaleX*1e5|0)/1e5,o=(Math.sin(n)*r.scaleX*1e5|0)/1e5,l=(Math.sin(a)*-r.scaleY*1e5|0)/1e5,u=(Math.cos(a)*r.scaleY*1e5|0)/1e5,f=this.t.style,h=this.t.currentStyle;if(h){i=o,o=-l,l=-i,e=h.filter,f.filter="";var c,p,d=this.t.offsetWidth,m=this.t.offsetHeight,_="absolute"!==h.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+o+", M21="+l+", M22="+u,y=r.x+d*r.xPercent/100,b=r.y+m*r.yPercent/100;if(null!=r.ox&&(y+=(c=(r.oxp?d*r.ox*.01:r.ox)-d/2)-(c*s+(p=(r.oyp?m*r.oy*.01:r.oy)-m/2)*o),b+=p-(c*l+p*u)),v+=_?", Dx="+((c=d/2)-(c*s+(p=m/2)*o)+y)+", Dy="+(p-(c*l+p*u)+b)+")":", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?f.filter=e.replace(F,v):f.filter=v+" "+e,0!==t&&1!==t||1===s&&0===o&&0===l&&1===u&&(_&&-1===v.indexOf("Dx=0, Dy=0")||S.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&f.removeAttribute("filter")),!_){var x,w,k,P=g<8?1:-1;for(c=r.ieOffsetX||0,p=r.ieOffsetY||0,r.ieOffsetX=Math.round((d-((s<0?-s:s)*d+(o<0?-o:o)*m))/2+y),r.ieOffsetY=Math.round((m-((u<0?-u:u)*m+(l<0?-l:l)*d))/2+b),Tt=0;Tt<4;Tt++)k=(i=-1!==(x=h[w=st[Tt]]).indexOf("px")?parseFloat(x):et(this.t,w,parseFloat(x),x.replace(T,""))||0)!==r[w]?Tt<2?-r.ieOffsetX:-r.ieOffsetY:Tt<2?c-r.ieOffsetX:p-r.ieOffsetY,f[w]=(r[w]=Math.round(i-k*(0===Tt||2===Tt?1:P)))+"px"}}},A.data=this._transform||Vt(t,a,!0),A.tween=i,A.pr=-1,s.pop()}if(r){for(;d;){for(w=d._next,y=b;y&&y.pr>d.pr;)y=y._next;(d._prev=y?y._prev:x)?d._prev._next=d:b=d,(d._next=y)?y._prev=d:x=d,d=w}this._firstPT=b}return!0},f.parse=function(t,e,i,r){var s,o,l,f,c,p,d,m,g,y,b=t.style;for(s in e){if("function"==typeof(p=e[s])&&(p=p(v,_)),o=u[s])i=o.parse(t,p,s,this,i,r,e);else{if("--"===s.substr(0,2)){this._tween._propLookup[s]=this._addTween.call(this._tween,t.style,"setProperty",J(t).getPropertyValue(s)+"",p+"",s,!1,s);continue}c=tt(t,s,a)+"",g="string"==typeof p,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||g&&A.test(p)?(g||(p=((p=dt(p)).length>3?"rgba(":"rgb(")+p.join(",")+")"),i=wt(b,s,c,p,!0,"transparent",i,0,r)):g&&z.test(p)?i=wt(b,s,c,p,!0,null,i,0,r):(d=(l=parseFloat(c))||0===l?c.substr((l+"").length):"",""!==c&&"auto"!==c||("width"===s||"height"===s?(l=ot(t,s,a),d="px"):"left"===s||"top"===s?(l=it(t,s,a),d="px"):(l="opacity"!==s?0:1,d="")),(y=g&&"="===p.charAt(1))?(f=parseInt(p.charAt(0)+"1",10),p=p.substr(2),f*=parseFloat(p),m=p.replace(T,"")):(f=parseFloat(p),m=g?p.replace(T,""):""),""===m&&(m=s in n?n[s]:d),p=f||0===f?(y?f+l:f)+m:e[s],d!==m&&(""===m&&"lineHeight"!==s||(f||0===f)&&l&&(l=et(t,s,l,d),"%"===m?(l/=et(t,s,100,"%")/100,!0!==e.strictUnits&&(c=l+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?l/=et(t,s,1,m):"px"!==m&&(f=et(t,s,f,m),m="px"),y&&(f||0===f)&&(p=f+l+m))),y&&(f+=l),!l&&0!==l||!f&&0!==f?void 0!==b[s]&&(p||p+""!="NaN"&&null!=p)?(i=new bt(b,s,f||l||0,0,i,-1,s,!1,0,c,p)).xs0="none"!==p||"display"!==s&&-1===s.indexOf("Style")?p:c:W("invalid "+s+" tween value: "+e[s]):(i=new bt(b,s,l,f-l,i,0,s,!1!==h&&("px"===m||"zIndex"===s),0,c,p)).xs0=m)}r&&i&&!i.plugin&&(i.plugin=r)}return i},f.setRatio=function(t){var e,i,r,n=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;n;){if(e=n.c*t+n.s,n.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),n.type)if(1===n.type)if(2===(r=n.l))n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2;else if(3===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+e+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(t);else n.t[n.p]=e+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(t),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(e=Math.round(n.s+n.c),n.type){if(1===n.type){for(r=n.l,i=n.xs0+e+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}}else n.t[n.p]=e+n.xs0;else n.t[n.p]=n.e;else n.setRatio(t);n=n._next}},f._enableTransforms=function(t){this._transform=this._transform||Vt(this._target,a,!0),this._transformType=this._transform.svg&&At||!t&&3!==this._transformType?2:3};var Wt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};f._addLazySet=function(t,e,i){var r=this._firstPT=new bt(t,e,0,0,this._firstPT,2);r.e=i,r.setRatio=Wt,r.data=this},f._linkCSSP=function(t,e,i,r){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,r=!0),i?i._next=t:r||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},f._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},f._kill=function(e){var i,r,n,a=e;if(e.autoAlpha||e.alpha){a={};for(r in e)a[r]=e[r];a.opacity=1,a.autoAlpha&&(a.visibility=1)}for(e.className&&(i=this._classNamePT)&&((n=i.xfirst)&&n._prev?this._linkCSSP(n._prev,i._next,n._prev._prev):n===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,n._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==r&&i.plugin._kill&&(i.plugin._kill(e),r=i.plugin),i=i._next;return t.prototype._kill.call(this,a)};var Qt=function(t,e,i){var r,n,a,s;if(t.slice)for(n=t.length;--n>-1;)Qt(t[n],e,i);else for(n=(r=t.childNodes).length;--n>-1;)s=(a=r[n]).type,a.style&&(e.push(rt(a)),i&&i.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||Qt(a,e,i)};return o.cascadeTo=function(t,i,r){var n,a,s,o,l=e.to(t,i,r),u=[l],f=[],h=[],c=[],p=e._internals.reservedProps;for(t=l._targets||l.target,Qt(t,f,c),l.render(i,!0,!0),Qt(t,h),l.render(0,!0,!0),l._enabled(!0),n=c.length;--n>-1;)if((a=nt(c[n],f[n],h[n])).firstMPT){a=a.difs;for(s in r)p[s]&&(a[s]=r[s]);o={};for(s in a)o[s]=f[n][s];u.push(e.fromTo(c[n],i,o,a))}return u},t.activate([o]),o},!0),function(){var t=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},e=i._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}).prototype;e._onInitAllProps=function(){for(var e,i,r,n=this._tween,a=n.vars.roundProps.join?n.vars.roundProps:n.vars.roundProps.split(","),s=a.length,o={},l=n._propLookup.roundProps;--s>-1;)o[a[s]]=Math.round;for(s=a.length;--s>-1;)for(e=a[s],i=n._firstPT;i;)r=i._next,i.pg?i.t._mod(o):i.n===e&&(2===i.f&&i.t?t(i.t._firstPT):(this._add(i.t,e,i.s,i.c),r&&(r._prev=i._prev),i._prev?i._prev._next=r:n._firstPT===i&&(n._firstPT=r),i._next=i._prev=null,n._propLookup[e]=l)),i=r;return!1},e._add=function(t,e,i,r){this._addTween(t,e,i,i+r,e,Math.round),this._overwriteProps.push(e)}}(),i._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,i,r){var n,a;if("function"!=typeof t.setAttribute)return!1;for(n in e)"function"==typeof(a=e[n])&&(a=a(r,t)),this._addTween(t,"setAttribute",t.getAttribute(n)+"",a+"",n,!1,n),this._overwriteProps.push(n);return!0}}),i._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,i,r){"object"!=typeof e&&(e={rotation:e}),this.finals={};var n,a,s,o,l,u,f=!0===e.useRadians?2*Math.PI:360;for(n in e)"useRadians"!==n&&("function"==typeof(o=e[n])&&(o=o(r,t)),a=(u=(o+"").split("_"))[0],s=parseFloat("function"!=typeof t[n]?t[n]:t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]()),l=(o=this.finals[n]="string"==typeof a&&"="===a.charAt(1)?s+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-s,u.length&&(-1!==(a=u.join("_")).indexOf("short")&&(l%=f)!==l%(f/2)&&(l=l<0?l+f:l-f),-1!==a.indexOf("_cw")&&l<0?l=(l+9999999999*f)%f-(l/f|0)*f:-1!==a.indexOf("ccw")&&l>0&&(l=(l-9999999999*f)%f-(l/f|0)*f)),(l>1e-6||l<-1e-6)&&(this._addTween(t,n,s,s+l,n),this._overwriteProps.push(n)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,i._gsDefine("easing.Back",["easing.Ease"],function(t){var e,r,n,a=i.GreenSockGlobals||i,s=a.com.greensock,o=2*Math.PI,l=Math.PI/2,u=s._class,f=function(e,i){var r=u("easing."+e,function(){},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,r},h=t.register||function(){},c=function(t,e,i,r,n){var a=u("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new r},!0);return h(a,t),a},p=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},d=function(e,i){var r=u("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t){return new r(t)},r},m=c("Back",d("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),d("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),d("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),g=u("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),_=g.prototype=new t;return _.constructor=g,_.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),_.config=g.config=function(t,e,i){return new g(t,e,i)},e=u("easing.SteppedEase",function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0},!0),_=e.prototype=new t,_.constructor=e,_.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},_.config=e.config=function(t,i){return new e(t,i)},r=u("easing.RoughEase",function(e){for(var i,r,n,a,s,o,l=(e=e||{}).taper||"none",u=[],f=0,h=0|(e.points||20),c=h,d=!1!==e.randomize,m=!0===e.clamp,g=e.template instanceof t?e.template:null,_="number"==typeof e.strength?.4*e.strength:.4;--c>-1;)i=d?Math.random():1/h*c,r=g?g.getRatio(i):i,n="none"===l?_:"out"===l?(a=1-i)*a*_:"in"===l?i*i*_:i<.5?(a=2*i)*a*.5*_:(a=2*(1-i))*a*.5*_,d?r+=Math.random()*n-.5*n:c%2?r+=.5*n:r-=.5*n,m&&(r>1?r=1:r<0&&(r=0)),u[f++]={x:i,y:r};for(u.sort(function(t,e){return t.x-e.x}),o=new p(1,1,null),c=h;--c>-1;)s=u[c],o=new p(s.x,s.y,o);this._prev=new p(0,0,0!==o.t?o:o.next)},!0),_=r.prototype=new t,_.constructor=r,_.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},_.config=function(t){return new r(t)},r.ease=new r,c("Bounce",f("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),f("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),f("BounceInOut",function(t){var e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),c("Circ",f("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),f("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),f("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),n=function(e,i,r){var n=u("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||r)/(t<1?t:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),a=n.prototype=new t;return a.constructor=n,a.getRatio=i,a.config=function(t,e){return new n(t,e)},n},c("Elastic",n("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),n("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)},.3),n("ElasticInOut",function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),c("Expo",f("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),f("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),f("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),c("Sine",f("SineOut",function(t){return Math.sin(t*l)}),f("SineIn",function(t){return 1-Math.cos(t*l)}),f("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),u("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),h(a.SlowMo,"SlowMo","ease,"),h(r,"RoughEase","ease,"),h(e,"SteppedEase","ease,"),m},!0)}),i._gsDefine&&i._gsQueue.pop()(),function(t,i){"use strict";var r={},n=t.document,a=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!a.TweenLite){var s,o,l,u,f,h=function(t){var e,i=t.split("."),r=a;for(e=0;e<i.length;e++)r[i[e]]=r=r[i[e]]||{};return r},c=h("com.greensock"),p=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},d=function(){},m=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),g={},_=function(i,n,s,o){this.sc=g[i]?g[i].sc:[],g[i]=this,this.gsClass=null,this.func=s;var l=[];this.check=function(u){for(var f,c,p,d,m=n.length,v=m;--m>-1;)(f=g[n[m]]||new _(n[m],[])).gsClass?(l[m]=f.gsClass,v--):u&&f.sc.push(this);if(0===v&&s){if(c=("com.greensock."+i).split("."),p=c.pop(),d=h(c.join("."))[p]=this.gsClass=s.apply(s,l),o)if(a[p]=r[p]=d,void 0!==e&&e.exports)if("TweenMax"===i){e.exports=r.TweenMax=d;for(m in r)d[m]=r[m]}else r.TweenMax&&(r.TweenMax[p]=d);else"function"==typeof define&&define.amd&&define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+i.split(".").pop(),[],function(){return d});for(m=0;m<this.sc.length;m++)this.sc[m].check()}},this.check(!0)},v=t._gsDefine=function(t,e,i,r){return new _(t,e,i,r)},y=c._class=function(t,e,i){return e=e||function(){},v(t,[],function(){return e},i),e};v.globals=a;var b=[0,0,1,1],x=y("easing.Ease",function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?b.concat(e):b},!0),w=x.map={},T=x.register=function(t,e,i,r){for(var n,a,s,o,l=e.split(","),u=l.length,f=(i||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(a=l[u],n=r?y("easing."+a,null,!0):c.easing[a]||{},s=f.length;--s>-1;)o=f[s],w[a+"."+o]=w[o+a]=n[o]=t.getRatio?t:t[o]||new t};for((l=x.prototype)._calcEnd=!1,l.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:t<.5?r/2:1-r/2},o=(s=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--o>-1;)l=s[o]+",Power"+o,T(new x(null,null,1,o),l,"easeOut",!0),T(new x(null,null,2,o),l,"easeIn"+(0===o?",easeNone":"")),T(new x(null,null,3,o),l,"easeInOut");w.linear=c.easing.Linear.easeIn,w.swing=c.easing.Quad.easeInOut;var S=y("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(l=S.prototype).addEventListener=function(t,e,i,r,n){n=n||0;var a,s,o=this._listeners[t],l=0;for(this!==u||f||u.wake(),null==o&&(this._listeners[t]=o=[]),s=o.length;--s>-1;)(a=o[s]).c===e&&a.s===i?o.splice(s,1):0===l&&a.pr<n&&(l=s+1);o.splice(l,0,{c:e,s:i,up:r,pr:n})},l.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return void r.splice(i,1)},l.dispatchEvent=function(t){var e,i,r,n=this._listeners[t];if(n)for((e=n.length)>1&&(n=n.slice(0)),i=this._eventTarget;--e>-1;)(r=n[e])&&(r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i))};var k=t.requestAnimationFrame,P=t.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},O=A();for(o=(s=["ms","moz","webkit","o"]).length;--o>-1&&!k;)k=t[s[o]+"RequestAnimationFrame"],P=t[s[o]+"CancelAnimationFrame"]||t[s[o]+"CancelRequestAnimationFrame"];y("Ticker",function(t,e){var i,r,a,s,o,l=this,h=A(),c=!(!1===e||!k)&&"auto",p=500,m=33,g=function(t){var e,n,u=A()-O;u>p&&(h+=u-m),O+=u,l.time=(O-h)/1e3,e=l.time-o,(!i||e>0||!0===t)&&(l.frame++,o+=e+(e>=s?.004:s-e),n=!0),!0!==t&&(a=r(g)),n&&l.dispatchEvent("tick")};S.call(l),l.time=l.frame=0,l.tick=function(){g(!0)},l.lagSmoothing=function(t,e){if(!arguments.length)return p<1e10;p=t||1e10,m=Math.min(e,p,0)},l.sleep=function(){null!=a&&(c&&P?P(a):clearTimeout(a),r=d,a=null,l===u&&(f=!1))},l.wake=function(t){null!==a?l.sleep():t?h+=-O+(O=A()):l.frame>10&&(O=A()-p+5),r=0===i?d:c&&k?k:function(t){return setTimeout(t,1e3*(o-l.time)+1|0)},l===u&&(f=!0),g(2)},l.fps=function(t){if(!arguments.length)return i;s=1/((i=t)||60),o=this.time+s,l.wake()},l.useRAF=function(t){if(!arguments.length)return c;l.sleep(),c=t,l.fps(i)},l.fps(t),setTimeout(function(){"auto"===c&&l.frame<5&&"hidden"!==n.visibilityState&&l.useRAF(!1)},1500)}),(l=c.Ticker.prototype=new c.events.EventDispatcher).constructor=c.Ticker;var M=y("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,G){f||u.wake();var i=this.vars.useFrames?Z:G;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});u=M.ticker=new c.Ticker,(l=M.prototype)._dirty=l._gc=l._initted=l._paused=!1,l._totalTime=l._time=0,l._rawPrevTime=-1,l._next=l._last=l._onUpdate=l._timeline=l.timeline=null,l._paused=!1;var D=function(){f&&A()-O>2e3&&("hidden"!==n.visibilityState||!u.lagSmoothing())&&u.wake();var t=setTimeout(D,2e3);t.unref&&t.unref()};D(),l.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},l.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},l.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},l.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},l.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},l.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},l.render=function(t,e,i){},l.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},l.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale-1e-7},l._enabled=function(t,e){return f||u.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},l._kill=function(t,e){return this._enabled(!1,!1)},l.kill=function(t,e){return this._kill(t,e),this},l._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},l._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},l._callback=function(t){var e=this.vars,i=e[t],r=e[t+"Params"],n=e[t+"Scope"]||e.callbackScope||this;switch(r?r.length:0){case 0:i.call(n);break;case 1:i.call(n,r[0]);break;case 2:i.call(n,r[0],r[1]);break;default:i.apply(n,r)}},l.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[t];null==e?delete n[t]:(n[t]=e,n[t+"Params"]=m(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},l.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},l.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},l.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},l.totalTime=function(t,e,i){if(f||u.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-t:t)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(F.length&&Q(),this.render(t,e,!1),F.length&&Q())}return this},l.progress=l.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},l.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},l.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},l.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,i;for(t=t||1e-10,this._timeline&&this._timeline.smoothChildTiming&&(i=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/t),this._timeScale=t,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},l.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},l.paused=function(t){if(!arguments.length)return this._paused;var e,i,r=this._timeline;return t!=this._paused&&r&&(f||t||u.wake(),i=(e=r.rawTime())-this._pauseTime,!t&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=r.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var C=y("core.SimpleTimeline",function(t){M.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(l=C.prototype=new M).constructor=C,l.kill()._gc=!1,l._first=l._last=l._recent=null,l._sortChildren=!1,l.add=l.insert=function(t,e,i,r){var n,a;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),n=this._last,this._sortChildren)for(a=t._startTime;n&&n._startTime>a;)n=n._prev;return n?(t._next=n._next,n._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=n,this._recent=t,this._timeline&&this._uncache(!0),this},l._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},l.render=function(t,e,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;n;)r=n._next,(n._active||t>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=r},l.rawTime=function(){return f||u.wake(),this._totalTime};var E=y("TweenLite",function(e,i,r){if(M.call(this,i,r),this.render=E.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:E.selector(e)||e;var n,a,s,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?H[E.defaultOverwrite]:"number"==typeof l?l>>0:H[l],(o||e instanceof Array||e.push&&m(e))&&"number"!=typeof e[0])for(this._targets=s=p(e),this._propLookup=[],this._siblings=[],n=0;n<s.length;n++)(a=s[n])?"string"!=typeof a?a.length&&a!==t&&a[0]&&(a[0]===t||a[0].nodeType&&a[0].style&&!a.nodeType)?(s.splice(n--,1),this._targets=s=s.concat(p(a))):(this._siblings[n]=$(a,this,!1),1===l&&this._siblings[n].length>1&&J(a,this,null,1,this._siblings[n])):"string"==typeof(a=s[n--]=E.selector(a))&&s.splice(n+1,1):s.splice(n--,1);else this._propLookup={},this._siblings=$(e,this,!1),1===l&&this._siblings.length>1&&J(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-10,this.render(Math.min(0,-this._delay)))},!0),R=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)};(l=E.prototype=new M).constructor=E,l.kill()._gc=!1,l.ratio=0,l._firstPT=l._targets=l._overwrittenProps=l._startAt=null,l._notifyPluginsOfEnabled=l._lazy=!1,E.version="1.20.3",E.defaultEase=l._ease=new x(null,null,1,1),E.defaultOverwrite="auto",E.ticker=u,E.autoSleep=120,E.lagSmoothing=function(t,e){u.lagSmoothing(t,e)},E.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(E.selector=i,i(e)):void 0===n?e:n.querySelectorAll?n.querySelectorAll(e):n.getElementById("#"===e.charAt(0)?e.substr(1):e)};var F=[],j={},z=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,L=/[\+-]=-?[\.\d]/,I=function(t){for(var e,i=this._firstPT;i;)e=i.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m(e,this._target||i.t):e<1e-6&&e>-1e-6&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},B=function(t,e,i,r){var n,a,s,o,l,u,f,h=[],c=0,p="",d=0;for(h.start=t,h.end=e,t=h[0]=t+"",e=h[1]=e+"",i&&(i(h),t=h[0],e=h[1]),h.length=0,n=t.match(z)||[],a=e.match(z)||[],r&&(r._next=null,r.blob=1,h._firstPT=h._applyPT=r),l=a.length,o=0;o<l;o++)f=a[o],p+=(u=e.substr(c,e.indexOf(f,c)-c))||!o?u:",",c+=u.length,d?d=(d+1)%5:"rgba("===u.substr(-5)&&(d=1),f===n[o]||n.length<=o?p+=f:(p&&(h.push(p),p=""),s=parseFloat(n[o]),h.push(s),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:s,c:("="===f.charAt(1)?parseInt(f.charAt(0)+"1",10)*parseFloat(f.substr(2)):parseFloat(f)-s)||0,f:0,m:d&&d<4?Math.round:0}),c+=f.length;return(p+=e.substr(c))&&h.push(p),h.setRatio=I,L.test(e)&&(h.end=null),h},Y=function(t,e,i,r,n,a,s,o,l){"function"==typeof r&&(r=r(l||0,t));var u=typeof t[e],f="function"!==u?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),h="get"!==i?i:f?s?t[f](s):t[f]():t[e],c="string"==typeof r&&"="===r.charAt(1),p={t:t,p:e,s:h,f:"function"===u,pg:0,n:n||e,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:c?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-h||0};if(("number"!=typeof h||"number"!=typeof r&&!c)&&(s||isNaN(h)||!c&&isNaN(r)||"boolean"==typeof h||"boolean"==typeof r?(p.fp=s,p={t:B(h,c?parseFloat(p.s)+p.c:r,o||E.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:n||e,pr:0,m:0}):(p.s=parseFloat(h),c||(p.c=parseFloat(r)-p.s||0))),p.c)return(p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p},N=E._internals={isArray:m,isSelector:R,lazyTweens:F,blobDif:B},X=E._plugins={},V=N.tweenLookup={},U=0,q=N.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},H={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Z=M._rootFramesTimeline=new C,G=M._rootTimeline=new C,W=30,Q=N.lazyRender=function(){var t,e=F.length;for(j={};--e>-1;)(t=F[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);F.length=0};G._startTime=u.time,Z._startTime=u.frame,G._active=Z._active=!0,setTimeout(Q,1),M._updateRoot=E.render=function(){var t,e,i;if(F.length&&Q(),G.render((u.time-G._startTime)*G._timeScale,!1,!1),Z.render((u.frame-Z._startTime)*Z._timeScale,!1,!1),F.length&&Q(),u.frame>=W){W=u.frame+(parseInt(E.autoSleep,10)||120);for(i in V){for(t=(e=V[i].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete V[i]}if((!(i=G._first)||i._paused)&&E.autoSleep&&!Z._first&&1===u._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||u.sleep()}}},u.addEventListener("tick",M._updateRoot);var $=function(t,e,i){var r,n,a=t._gsTweenID;if(V[a||(t._gsTweenID=a="t"+U++)]||(V[a]={target:t,tweens:[]}),e&&(r=V[a].tweens,r[n=r.length]=e,i))for(;--n>-1;)r[n]===e&&r.splice(n,1);return V[a].tweens},K=function(t,e,i,r){var n,a,s=t.vars.onOverwrite;return s&&(n=s(t,e,i,r)),(s=E.onOverwrite)&&(a=s(t,e,i,r)),!1!==n&&!1!==a},J=function(t,e,i,r,n){var a,s,o,l;if(1===r||r>=4){for(l=n.length,a=0;a<l;a++)if((o=n[a])!==e)o._gc||o._kill(null,t,e)&&(s=!0);else if(5===r)break;return s}var u,f=e._startTime+1e-10,h=[],c=0,p=0===e._duration;for(a=n.length;--a>-1;)(o=n[a])===e||o._gc||o._paused||(o._timeline!==e._timeline?(u=u||tt(e,0,p),0===tt(o,u,p)&&(h[c++]=o)):o._startTime<=f&&o._startTime+o.totalDuration()/o._timeScale>f&&((p||!o._initted)&&f-o._startTime<=2e-10||(h[c++]=o)));for(a=c;--a>-1;)if(o=h[a],2===r&&o._kill(i,t,e)&&(s=!0),2!==r||!o._firstPT&&o._initted){if(2!==r&&!K(o,e))continue;o._enabled(!1,!1)&&(s=!0)}return s},tt=function(t,e,i){for(var r=t._timeline,n=r._timeScale,a=t._startTime;r._timeline;){if(a+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return(a/=n)>e?a-e:i&&a===e||!t._initted&&a-e<2e-10?1e-10:(a+=t.totalDuration()/t._timeScale/n)>e+1e-10?0:a-e-1e-10};l._init=function(){var t,e,i,r,n,a,s=this.vars,o=this._overwrittenProps,l=this._duration,u=!!s.immediateRender,f=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={};for(r in s.startAt)n[r]=s.startAt[r];if(n.data="isStart",n.overwrite=!1,n.immediateRender=!0,n.lazy=u&&!1!==s.lazy,n.startAt=n.delay=null,n.onUpdate=s.onUpdate,n.onUpdateParams=s.onUpdateParams,n.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=E.to(this.target,0,n),u)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(u=!1),i={};for(r in s)q[r]&&"autoCSS"!==r||(i[r]=s[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=u&&!1!==s.lazy,i.immediateRender=u,this._startAt=E.to(this.target,0,i),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=f=f?f instanceof x?f:"function"==typeof f?new x(f,s.easeParams):w[f]||E.defaultEase:E.defaultEase,s.easeParams instanceof Array&&f.config&&(this._ease=f.config.apply(f,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,t=0;t<a;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],o?o[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(e&&E._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},l._initProps=function(e,i,r,n,a){var s,o,l,u,f,h;if(null==e)return!1;j[e._gsTweenID]&&Q(),this.vars.css||e.style&&e!==t&&e.nodeType&&X.css&&!1!==this.vars.autoCSS&&function(t,e){var i,r={};for(i in t)q[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!X[i]||X[i]&&X[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r}(this.vars,e);for(s in this.vars)if(h=this.vars[s],q[s])h&&(h instanceof Array||h.push&&m(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[s]=h=this._swapSelfInParams(h,this));else if(X[s]&&(u=new X[s])._onInitTween(e,this.vars[s],this,a)){for(this._firstPT=f={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:u._priority,m:0},o=u._overwriteProps.length;--o>-1;)i[u._overwriteProps[o]]=this._firstPT;(u._priority||u._onInitAllProps)&&(l=!0),(u._onDisable||u._onEnable)&&(this._notifyPluginsOfEnabled=!0),f._next&&(f._next._prev=f)}else i[s]=Y.call(this,e,s,"get",h,s,0,null,this.vars.stringFilter,a);return n&&this._kill(n,e)?this._initProps(e,i,r,n,a):this._overwrite>1&&this._firstPT&&r.length>1&&J(e,this,i,this._overwrite,r)?(this._kill(i,e),this._initProps(e,i,r,n,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(j[e._gsTweenID]=!0),l)},l.render=function(t,e,i){var r,n,a,s,o=this._time,l=this._duration,u=this._rawPrevTime;if(t>=l-1e-7&&t>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(u<0||t<=0&&t>=-1e-7||1e-10===u&&"isPause"!==this.data)&&u!==t&&(i=!0,u>1e-10&&(n="onReverseComplete")),this._rawPrevTime=s=!e||t||u===t?t:1e-10);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===l&&u>0)&&(n="onReverseComplete",r=this._reversed),t<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(u>=0&&(1e-10!==u||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=s=!e||t||u===t?t:1e-10)),(!this._initted||this._startAt&&this._startAt.progress())&&(i=!0);else if(this._totalTime=this._time=t,this._easeType){var f=t/l,h=this._easeType,c=this._easePower;(1===h||3===h&&f>=.5)&&(f=1-f),3===h&&(f*=2),1===c?f*=f:2===c?f*=f*f:3===c?f*=f*f*f:4===c&&(f*=f*f*f*f),this.ratio=1===h?1-f:2===h?f:t/l<.5?f/2:1-f/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=u,F.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/l):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,!0,i):n||(n="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,!0,i),e||(this._time!==o||r||i)&&this._callback("onUpdate")),n&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,!0,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this._callback(n),0===l&&1e-10===this._rawPrevTime&&1e-10!==s&&(this._rawPrevTime=0)))}},l._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:E.selector(e)||e;var r,n,a,s,o,l,u,f,h,c=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((m(e)||R(e))&&"number"!=typeof e[0])for(r=e.length;--r>-1;)this._kill(t,e[r],i)&&(l=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(e===this._targets[r]){o=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=t?this._overwrittenProps[r]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(u=t||o,f=t!==n&&"all"!==n&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(E.onOverwrite||this.vars.onOverwrite)){for(a in u)o[a]&&(h||(h=[]),h.push(a));if((h||!t)&&!K(this,i,e,h))return!1}for(a in u)(s=o[a])&&(c&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(u)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete o[a]),f&&(n[a]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},l.invalidate=function(){return this._notifyPluginsOfEnabled&&E._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],M.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-10,this.render(Math.min(0,-this._delay))),this},l._enabled=function(t,e){if(f||u.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=$(r[i],this,!0);else this._siblings=$(this.target,this,!0)}return M.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&E._onPluginEvent(t?"_onEnable":"_onDisable",this)},E.to=function(t,e,i){return new E(t,e,i)},E.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new E(t,e,i)},E.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new E(t,e,r)},E.delayedCall=function(t,e,i,r,n){return new E(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},E.set=function(t,e){return new E(t,0,e)},E.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:E.selector(t)||t;var i,r,n,a;if((m(t)||R(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(E.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(a=r[i],n=i;--n>-1;)a===r[n]&&r.splice(i,1)}else if(t._gsTweenID)for(i=(r=$(t).concat()).length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r||[]},E.killTweensOf=E.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=E.getTweensOf(t,e),n=r.length;--n>-1;)r[n]._kill(i,t)};var et=y("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=et.prototype},!0);if(l=et.prototype,et.version="1.19.0",et.API=2,l._firstPT=null,l._addTween=Y,l.setRatio=I,l._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},l._mod=l._roundProps=function(t){for(var e,i=this._firstPT;i;)(e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},E._onPluginEvent=function(t,e){var i,r,n,a,s,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(s=o._next,r=n;r&&r.pr>o.pr;)r=r._next;(o._prev=r?r._prev:a)?o._prev._next=o:n=o,(o._next=r)?r._prev=o:a=o,o=s}o=e._firstPT=n}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},et.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===et.API&&(X[(new t[e])._propName]=t[e]);return!0},v.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,n=t.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=y("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){et.call(this,i,r),this._overwriteProps=n||[]},!0===t.global),o=s.prototype=new et(i);o.constructor=s,s.API=t.API;for(e in a)"function"==typeof t[e]&&(o[a[e]]=t[e]);return s.version=t.version,et.activate([s]),s},s=t._gsQueue){for(o=0;o<s.length;o++)s[o]();for(l in g)g[l].func||t.console.log("GSAP encountered missing dependency: "+l)}f=!1}}(void 0!==e&&e.exports&&void 0!==t?t:this||window)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(t,e,i){!function(t,r){"object"==typeof i&&void 0!==e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.createREGL=r()}(this,function(){"use strict";function t(t){return"undefined"!=typeof btoa?btoa(t):"base64:"+t}function e(t){var e=new Error("(regl) "+t);throw console.error(e),e}function i(t,i){t||e(i)}function r(t){return t?": "+t:""}function n(t,i,n){i.indexOf(t)<0&&e("invalid value"+r(n)+". must be one of: "+i)}function a(t,e){for(t+="";t.length<e;)t=" "+t;return t}function s(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function o(t,e){this.number=t,this.line=e,this.errors=[]}function l(t,e,i){this.file=t,this.line=e,this.message=i}function u(){var t=new Error,e=(t.stack||t).toString(),i=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(i)return i[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function f(){var t=new Error,e=(t.stack||t).toString(),i=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(i)return i[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function h(e,i){var r=e.split("\n"),n=1,a=0,l={unknown:new s,0:new s};l.unknown.name=l[0].name=i||u(),l.unknown.lines.push(new o(0,""));for(var f=0;f<r.length;++f){var h=r[f],c=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(h);if(c)switch(c[1]){case"line":var p=/(\d+)(\s+\d+)?/.exec(c[2]);p&&(n=0|p[1],p[2]&&((a=0|p[2])in l||(l[a]=new s)));break;case"define":var d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);d&&(l[a].name=d[1]?t(d[2]):d[2])}l[a].lines.push(new o(n++,h))}return Object.keys(l).forEach(function(t){var e=l[t];e.lines.forEach(function(t){e.index[t.number]=t})}),l}function c(t,e,r,n,s){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(e),u=n===t.FRAGMENT_SHADER?"fragment":"vertex";m(r,"string",u+" shader source must be a string",s);var f=h(r,s),c=function(t){var e=[];return t.split("\n").forEach(function(t){if(!(t.length<5)){var i=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(t);i?e.push(new l(0|i[1],0|i[2],i[3].trim())):t.length>0&&e.push(new l("unknown",0,t))}}),e}(o);!function(t,e){e.forEach(function(e){var i=t[e.file];if(i){var r=i.index[e.line];if(r)return r.errors.push(e),void(i.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)})}(f,c),Object.keys(f).forEach(function(t){function e(t,e){r.push(t),n.push(e||"")}var i=f[t];if(i.hasErrors){var r=[""],n=[""];e("file number "+t+": "+i.name+"\n","color:red;text-decoration:underline;font-weight:bold"),i.lines.forEach(function(t){if(t.errors.length>0){e(a(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),e(t.line+"\n","color:red; background-color:yellow; font-weight:bold");var i=0;t.errors.forEach(function(r){var n=r.message,s=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(n);if(s){var o=s[1];switch(n=s[2],o){case"assign":o="="}i=Math.max(t.line.indexOf(o,i),0)}else i=0;e(a("| ",6)),e(a("^^^",i+3)+"\n","font-weight:bold"),e(a("| ",6)),e(n+"\n","font-weight:bold")}),e(a("| ",6)+"\n")}else e(a(t.number,4)+"|  "),e(t.line+"\n","color:red")}),"undefined"!=typeof document?(n[0]=r.join("%c"),console.log.apply(console,n)):console.log(r.join(""))}}),i.raise("Error compiling "+u+" shader, "+f[0].name)}}function p(t){t._commandRef=u()}function d(t,i){var r=f();e(t+" in command "+(i||u())+("unknown"===r?"":" called from "+r))}function m(t,e,i,n){typeof t!==e&&d("invalid parameter type"+r(i)+". expected "+e+", got "+typeof t,n||u())}function g(t,e){return t===xt||t===bt||t===wt?2:t===Tt?4:St[t]*e}function _(t){return!(t&t-1||!t)}function v(t,e){this.id=Pt++,this.type=t,this.data=e}function y(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function b(t){if(0===t.length)return[];var e=t.charAt(0),i=t.charAt(t.length-1);if(t.length>1&&e===i&&('"'===e||"'"===e))return['"'+y(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return b(t.substr(0,r.index)).concat(b(r[1])).concat(b(t.substr(r.index+r[0].length)));var n=t.split(".");if(1===n.length)return['"'+y(t)+'"'];for(var a=[],s=0;s<n.length;++s)a=a.concat(b(n[s]));return a}function x(t){return"["+b(t).join("][")+"]"}function w(t){return"string"==typeof t?t.split():(kt(Array.isArray(t),"invalid extension array"),t)}function T(t){return"string"==typeof t?(kt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function S(t){var e,i,r,n,a=t||{},s={},o=[],l=[],u="undefined"==typeof window?1:window.devicePixelRatio,f=!1,h=function(t){t&&kt.raise(t)},c=function(){};if("string"==typeof a?(kt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(a),kt(e,"invalid query string for element")):"object"==typeof a?!function(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}(a)?!function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(a)?(kt.constructor(a),"gl"in a?n=a.gl:"canvas"in a?r=T(a.canvas):"container"in a&&(i=T(a.container)),"attributes"in a&&(s=a.attributes,kt.type(s,"object","invalid context attributes")),"extensions"in a&&(o=w(a.extensions)),"optionalExtensions"in a&&(l=w(a.optionalExtensions)),"onDone"in a&&(kt.type(a.onDone,"function","invalid or missing onDone callback"),h=a.onDone),"profile"in a&&(f=!!a.profile),"pixelRatio"in a&&kt((u=+a.pixelRatio)>0,"invalid pixel ratio")):r=(n=a).canvas:e=a:kt.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:i=e),!n){if(!r){kt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var p=function(t,e,i){function r(){var e=window.innerWidth,r=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();e=a.right-a.left,r=a.bottom-a.top}n.width=i*e,n.height=i*r,ht(n.style,{width:e+"px",height:r+"px"})}var n=document.createElement("canvas");return ht(n.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(n),t===document.body&&(n.style.position="absolute",ht(t.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:n,onDestroy:function(){window.removeEventListener("resize",r),t.removeChild(n)}}}(i||document.body,0,u);if(!p)return null;r=p.canvas,c=p.onDestroy}n=function(t,e){function i(i){try{return t.getContext(i,e)}catch(t){return null}}return i("webgl")||i("experimental-webgl")||i("webgl-experimental")}(r,s)}return n?{gl:n,canvas:r,container:i,extensions:o,optionalExtensions:l,pixelRatio:u,profile:f,onDone:h,onDestroy:c}:(c(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function k(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||ft(t.data))}function P(t,e){for(var i=Array(t),r=0;r<t;++r)i[r]=e(r);return i}function A(t){var e,i;return e=(t>65535)<<4,t>>>=e,i=(t>255)<<3,t>>>=i,e|=i,i=(t>15)<<2,t>>>=i,e|=i,i=(t>3)<<1,t>>>=i,(e|=i)|t>>1}function O(t){var e=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(t),i=Yt[A(e)>>2];return i.length>0?i.pop():new ArrayBuffer(e)}function M(t){Yt[A(t.byteLength)>>2].push(t)}function D(t,e,i,r,n,a){for(var s=a,o=0;o<e;++o)for(var l=t[o],u=0;u<i;++u)for(var f=l[u],h=0;h<r;++h)n[s++]=f[h]}function C(t,e,i,r,n){for(var a=1,s=i+1;s<e.length;++s)a*=e[s];var o=e[i];if(e.length-i==4){var l=e[i+1],u=e[i+2],f=e[i+3];for(s=0;s<o;++s)D(t[s],l,u,f,r,n),n+=a}else for(s=0;s<o;++s)C(t[s],e,i+1,r,n),n+=a}function E(t){return 0|ut[Object.prototype.toString.call(t)]}function R(t,e){for(var i=0;i<e.length;++i)t[i]=e[i]}function F(t,e,i,r,n,a,s){for(var o=0,l=0;l<i;++l)for(var u=0;u<r;++u)t[o++]=e[n*l+a*u+s]}function j(t){for(var e=Nt.allocType(pe,t.length),i=0;i<t.length;++i)if(isNaN(t[i]))e[i]=65535;else if(t[i]===1/0)e[i]=31744;else if(t[i]===-1/0)e[i]=64512;else{he[0]=t[i];var r=ce[0],n=r>>>31<<15,a=(r<<1>>>24)-127,s=r>>13&1023;if(a<-24)e[i]=n;else if(a<-14){var o=-14-a;e[i]=n+(s+1024>>o)}else e[i]=a>15?n+31744:n+(a+15<<10)+s}return e}function z(t){return Array.isArray(t)||ft(t)}function L(t){return"[object "+t+"]"}function I(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function B(t){if(!Array.isArray(t))return!1;return!(0===t.length||!z(t[0]))}function Y(t){return Object.prototype.toString.call(t)}function N(t){return Y(t)===Si}function X(t){if(!t)return!1;var e=Y(t);return Oi.indexOf(e)>=0||(I(t)||B(t)||k(t))}function V(t){return 0|ut[Object.prototype.toString.call(t)]}function U(t,e){return Nt.allocType(t.type===Fe?Qe:t.type,e)}function q(t,e){t.type===Fe?(t.data=j(e),Nt.freeType(e)):t.data=e}function H(t,e,i,r,n,a){var s;if(s=void 0!==Di[t]?Di[t]:Ti[t]*Mi[e],a&&(s*=6),n){for(var o=0,l=i;l>=1;)o+=s*l*l,l/=2;return o}return s*i*r}function Z(t,e,i,r,n,a,s){function o(){this.internalformat=ve,this.format=ve,this.type=Ze,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function l(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function u(t,r){if("object"==typeof r&&r){if("premultiplyAlpha"in r&&(kt.type(r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=r.premultiplyAlpha),"flipY"in r&&(kt.type(r.flipY,"boolean","invalid texture flip"),t.flipY=r.flipY),"alignment"in r&&(kt.oneOf(r.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=r.alignment),"colorSpace"in r&&(kt.parameter(r.colorSpace,F,"invalid colorSpace"),t.colorSpace=F[r.colorSpace]),"type"in r){var n=r.type;kt(e.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),kt(e.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),kt(e.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),kt.parameter(n,L,"invalid texture type"),t.type=L[n]}var a=t.width,s=t.height,o=t.channels,l=!1;"shape"in r?(kt(Array.isArray(r.shape)&&r.shape.length>=2,"shape must be an array"),a=r.shape[0],s=r.shape[1],3===r.shape.length&&(o=r.shape[2],kt(o>0&&o<=4,"invalid number of channels"),l=!0),kt(a>=0&&a<=i.maxTextureSize,"invalid width"),kt(s>=0&&s<=i.maxTextureSize,"invalid height")):("radius"in r&&(a=s=r.radius,kt(a>=0&&a<=i.maxTextureSize,"invalid radius")),"width"in r&&(a=r.width,kt(a>=0&&a<=i.maxTextureSize,"invalid width")),"height"in r&&(s=r.height,kt(s>=0&&s<=i.maxTextureSize,"invalid height")),"channels"in r&&(o=r.channels,kt(o>0&&o<=4,"invalid number of channels"),l=!0)),t.width=0|a,t.height=0|s,t.channels=0|o;var u=!1;if("format"in r){var f=r.format;kt(e.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),kt.parameter(f,Z,"invalid texture format");var h=t.internalformat=Z[f];t.format=it[h],f in L&&("type"in r||(t.type=L[f])),f in G&&(t.compressed=!0),u=!0}!l&&u?t.channels=Ti[t.format]:l&&!u?t.channels!==wi[t.format]&&(t.format=t.internalformat=wi[t.channels]):u&&l&&kt(t.channels===Ti[t.format],"number of channels inconsistent with specified format")}}function f(e){t.pixelStorei(gi,e.flipY),t.pixelStorei(_i,e.premultiplyAlpha),t.pixelStorei(vi,e.colorSpace),t.pixelStorei(mi,e.unpackAlignment)}function h(){o.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function c(t,e){var r=null;if(X(e)?r=e:e&&(kt.type(e,"object","invalid pixel data type"),u(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),X(e.data)&&(r=e.data)),kt(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),e.copy){kt(!r,"can not specify copy and data field for the same texture");var a=n.viewportWidth,s=n.viewportHeight;t.width=t.width||a-t.xOffset,t.height=t.height||s-t.yOffset,t.needsCopy=!0,kt(t.xOffset>=0&&t.xOffset<a&&t.yOffset>=0&&t.yOffset<s&&t.width>0&&t.width<=a&&t.height>0&&t.height<=s,"copy texture read out of bounds")}else if(r){if(ft(r))t.channels=t.channels||4,t.data=r,"type"in e||t.type!==Ze||(t.type=V(r));else if(I(r))t.channels=t.channels||4,function(t,e){var i=e.length;switch(t.type){case Ze:case Ge:case We:case Qe:var r=Nt.allocType(t.type,i);r.set(e),t.data=r;break;case Fe:t.data=j(e);break;default:kt.raise("unsupported texture type, must specify a typed array")}}(t,r),t.alignment=1,t.needsFree=!0;else if(k(r)){var o=r.data;Array.isArray(o)||t.type!==Ze||(t.type=V(o));var l,f,h,c,p,d,m=r.shape,g=r.stride;3===m.length?(h=m[2],d=g[2]):(kt(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),h=1,d=1),l=m[0],f=m[1],c=g[0],p=g[1],t.alignment=1,t.width=l,t.height=f,t.channels=h,t.format=t.internalformat=wi[h],t.needsFree=!0,function(t,e,i,r,n,a){for(var s=t.width,o=t.height,l=t.channels,u=U(t,s*o*l),f=0,h=0;h<o;++h)for(var c=0;c<s;++c)for(var p=0;p<l;++p)u[f++]=e[i*c+r*h+n*p+a];q(t,u)}(t,o,c,p,d,r.offset)}else if(N(r)||function(t){return Y(t)===ki}(r))N(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(t){return Y(t)===Pi}(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(function(t){return Y(t)===Ai}(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(B(r)){var _=t.width||r[0].length,v=t.height||r.length,y=t.channels;y=z(r[0][0])?y||r[0][0].length:y||1;for(var b=Xt.shape(r),x=1,w=0;w<b.length;++w)x*=b[w];var T=U(t,x);Xt.flatten(r,b,"",T),q(t,T),t.alignment=1,t.width=_,t.height=v,t.channels=y,t.format=t.internalformat=wi[y],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===Qe?kt(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===Fe&&kt(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function p(e,i,n){var a=e.element,s=e.data,o=e.internalformat,l=e.format,u=e.type,h=e.width,c=e.height;f(e),a?t.texImage2D(i,n,l,l,u,a):e.compressed?t.compressedTexImage2D(i,n,o,h,c,0,s):e.needsCopy?(r(),t.copyTexImage2D(i,n,l,e.xOffset,e.yOffset,h,c,0)):t.texImage2D(i,n,l,h,c,0,l,u,s)}function d(e,i,n,a,s){var o=e.element,l=e.data,u=e.internalformat,h=e.format,c=e.type,p=e.width,d=e.height;f(e),o?t.texSubImage2D(i,s,n,a,h,c,o):e.compressed?t.compressedTexSubImage2D(i,s,n,a,u,p,d,l):e.needsCopy?(r(),t.copyTexSubImage2D(i,s,n,a,e.xOffset,e.yOffset,p,d)):t.texSubImage2D(i,s,n,a,p,d,h,c,l)}function m(){return rt.pop()||new h}function g(t){t.needsFree&&Nt.freeType(t.data),h.call(t),rt.push(t)}function _(t,e,i){var r=t.images[0]=m();t.mipmask=1,r.width=t.width=e,r.height=t.height=i,r.channels=t.channels=4}function v(t,e){var i=null;if(X(e))l(i=t.images[0]=m(),t),c(i,e),t.mipmask=1;else if(u(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,n=0;n<r.length;++n)l(i=t.images[n]=m(),t),i.width>>=n,i.height>>=n,c(i,r[n]),t.mipmask|=1<<n;else l(i=t.images[0]=m(),t),c(i,e),t.mipmask=1;l(t,t.images[0]),(t.compressed&&t.internalformat===je||t.internalformat===ze||t.internalformat===Le||t.internalformat===Ie)&&kt(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function y(t,e){for(var i=t.images,r=0;r<i.length;++r){if(!i[r])return;p(i[r],e,r)}}function b(){var t=nt.pop()||new function(){o.call(this),this.genMipmaps=!1,this.mipmapHint=hi,this.mipmask=0,this.images=Array(16)};o.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function x(t){for(var e=t.images,i=0;i<e.length;++i)e[i]&&g(e[i]),e[i]=null;nt.push(t)}function w(){this.minFilter=ni,this.magFilter=ni,this.wrapS=ti,this.wrapT=ti,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=hi}function T(t,e){if("min"in e){var r=e.min;kt.parameter(r,R),t.minFilter=R[r],xi.indexOf(t.minFilter)>=0&&(t.genMipmaps=!0)}if("mag"in e){var n=e.mag;kt.parameter(n,E),t.magFilter=E[n]}var a=t.wrapS,s=t.wrapT;if("wrap"in e){var o=e.wrap;"string"==typeof o?(kt.parameter(o,C),a=s=C[o]):Array.isArray(o)&&(kt.parameter(o[0],C),kt.parameter(o[1],C),a=C[o[0]],s=C[o[1]])}else{if("wrapS"in e){var l=e.wrapS;kt.parameter(l,C),a=C[l]}if("wrapT"in e){var u=e.wrapT;kt.parameter(u,C),s=C[u]}}if(t.wrapS=a,t.wrapT=s,"anisotropic"in e){var f=e.anisotropic;kt("number"==typeof f&&f>=1&&f<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var h=!1;switch(typeof e.mipmap){case"string":kt.parameter(e.mipmap,D,"invalid mipmap hint"),t.mipmapHint=D[e.mipmap],t.genMipmaps=!0,h=!0;break;case"boolean":h=t.genMipmaps=e.mipmap;break;case"object":kt(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,h=!0;break;default:kt.raise("invalid mipmap type")}!h||"min"in e||(t.minFilter=si)}}function S(i,r){t.texParameteri(r,ri,i.minFilter),t.texParameteri(r,ii,i.magFilter),t.texParameteri(r,$e,i.wrapS),t.texParameteri(r,Ke,i.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(r,di,i.anisotropic),i.genMipmaps&&(t.hint(fi,i.mipmapHint),t.generateMipmap(r))}function P(e){o.call(this),this.mipmask=0,this.internalformat=ve,this.id=at++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new w,s.profile&&(this.stats={size:0})}function A(e){t.activeTexture(bi),t.bindTexture(e.target,e.texture)}function O(){var e=lt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(me,null)}function M(e){var i=e.texture;kt(i,"must not double destroy texture");var r=e.unit,n=e.target;r>=0&&(t.activeTexture(bi+r),t.bindTexture(n,null),lt[r]=null),t.deleteTexture(i),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete st[e.id],a.textureCount--}var D={"don't care":hi,"dont care":hi,nice:pi,fast:ci},C={repeat:Je,clamp:ti,mirror:ei},E={nearest:ni,linear:ai},R=ht({mipmap:ui,"nearest mipmap nearest":si,"linear mipmap nearest":oi,"nearest mipmap linear":li,"linear mipmap linear":ui},E),F={none:0,browser:yi},L={uint8:Ze,rgba4:Pe,rgb565:Oe,"rgb5 a1":Ae},Z={alpha:ye,luminance:xe,"luminance alpha":we,rgb:be,rgba:ve,rgba4:Te,"rgb5 a1":Se,rgb565:ke},G={};e.ext_srgb&&(Z.srgb=Ee,Z.srgba=Re),e.oes_texture_float&&(L.float32=L.float=Qe),e.oes_texture_half_float&&(L.float16=L["half float"]=Fe),e.webgl_depth_texture&&(ht(Z,{depth:De,"depth stencil":Ce}),ht(L,{uint16:Ge,uint32:We,"depth stencil":Me})),e.webgl_compressed_texture_s3tc&&ht(G,{"rgb s3tc dxt1":je,"rgba s3tc dxt1":ze,"rgba s3tc dxt3":Le,"rgba s3tc dxt5":Ie}),e.webgl_compressed_texture_atc&&ht(G,{"rgb atc":Be,"rgba atc explicit alpha":Ye,"rgba atc interpolated alpha":Ne}),e.webgl_compressed_texture_pvrtc&&ht(G,{"rgb pvrtc 4bppv1":Xe,"rgb pvrtc 2bppv1":Ve,"rgba pvrtc 4bppv1":Ue,"rgba pvrtc 2bppv1":qe}),e.webgl_compressed_texture_etc1&&(G["rgb etc1"]=He);var W=Array.prototype.slice.call(t.getParameter(de));Object.keys(G).forEach(function(t){var e=G[t];W.indexOf(e)>=0&&(Z[t]=e)});var Q=Object.keys(Z);i.textureFormats=Q;var $=[];Object.keys(Z).forEach(function(t){var e=Z[t];$[e]=t});var K=[];Object.keys(L).forEach(function(t){var e=L[t];K[e]=t});var J=[];Object.keys(E).forEach(function(t){var e=E[t];J[e]=t});var tt=[];Object.keys(R).forEach(function(t){var e=R[t];tt[e]=t});var et=[];Object.keys(C).forEach(function(t){var e=C[t];et[e]=t});var it=Q.reduce(function(t,e){var i=Z[e];return i===xe||i===ye||i===xe||i===we||i===De||i===Ce?t[i]=i:i===Se||e.indexOf("rgba")>=0?t[i]=ve:t[i]=be,t},{}),rt=[],nt=[],at=0,st={},ot=i.maxTextureUnits,lt=Array(ot).map(function(){return null});return ht(P.prototype,{bind:function(){var e=this;e.bindCount+=1;var i=e.unit;if(i<0){for(var r=0;r<ot;++r){var n=lt[r];if(n){if(n.bindCount>0)continue;n.unit=-1}lt[r]=e,i=r;break}i>=ot&&kt.raise("insufficient number of texture units"),s.profile&&a.maxTextureUnits<i+1&&(a.maxTextureUnits=i+1),e.unit=i,t.activeTexture(bi+i),t.bindTexture(e.target,e.texture)}return i},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&M(this)}}),s.profile&&(a.getTotalTextureSize=function(){var t=0;return Object.keys(st).forEach(function(e){t+=st[e].stats.size}),t}),{create2D:function(e,r){function n(t,e){var r=o.texInfo;w.call(r);var a=b();return"number"==typeof t?"number"==typeof e?_(a,0|t,0|e):_(a,0|t,0|t):t?(kt.type(t,"object","invalid arguments to regl.texture"),T(r,t),v(a,t)):_(a,1,1),r.genMipmaps&&(a.mipmask=(a.width<<1)-1),o.mipmask=a.mipmask,l(o,a),kt.texture2D(r,a,i),o.internalformat=a.internalformat,n.width=a.width,n.height=a.height,A(o),y(a,me),S(r,me),O(),x(a),s.profile&&(o.stats.size=H(o.internalformat,o.type,a.width,a.height,r.genMipmaps,!1)),n.format=$[o.internalformat],n.type=K[o.type],n.mag=J[r.magFilter],n.min=tt[r.minFilter],n.wrapS=et[r.wrapS],n.wrapT=et[r.wrapT],n}var o=new P(me);return st[o.id]=o,a.textureCount++,n(e,r),n.subimage=function(t,e,i,r){kt(!!t,"must specify image data");var a=0|e,s=0|i,u=0|r,f=m();return l(f,o),f.width=0,f.height=0,c(f,t),f.width=f.width||(o.width>>u)-a,f.height=f.height||(o.height>>u)-s,kt(o.type===f.type&&o.format===f.format&&o.internalformat===f.internalformat,"incompatible format for texture.subimage"),kt(a>=0&&s>=0&&a+f.width<=o.width&&s+f.height<=o.height,"texture.subimage write out of bounds"),kt(o.mipmask&1<<u,"missing mipmap data"),kt(f.data||f.element||f.needsCopy,"missing image data"),A(o),d(f,me,a,s,u),O(),g(f),n},n.resize=function(e,i){var r=0|e,a=0|i||r;if(r===o.width&&a===o.height)return n;n.width=o.width=r,n.height=o.height=a,A(o);for(var l=0;o.mipmask>>l;++l)t.texImage2D(me,l,o.format,r>>l,a>>l,0,o.format,o.type,null);return O(),s.profile&&(o.stats.size=H(o.internalformat,o.type,r,a,!1,!1)),n},n._reglType="texture2d",n._texture=o,s.profile&&(n.stats=o.stats),n.destroy=function(){o.decRef()},n},createCube:function(e,r,n,o,f,h){function p(t,e,r,n,a,o){var f,h=k.texInfo;for(w.call(h),f=0;f<6;++f)M[f]=b();if("number"!=typeof t&&t)if("object"==typeof t)if(e)v(M[0],t),v(M[1],e),v(M[2],r),v(M[3],n),v(M[4],a),v(M[5],o);else if(T(h,t),u(k,t),"faces"in t){var c=t.faces;for(kt(Array.isArray(c)&&6===c.length,"cube faces must be a length 6 array"),f=0;f<6;++f)kt("object"==typeof c[f]&&!!c[f],"invalid input for cube map face"),l(M[f],k),v(M[f],c[f])}else for(f=0;f<6;++f)v(M[f],t);else kt.raise("invalid arguments to cube map");else{var d=0|t||1;for(f=0;f<6;++f)_(M[f],d,d)}for(l(k,M[0]),h.genMipmaps?k.mipmask=(M[0].width<<1)-1:k.mipmask=M[0].mipmask,kt.textureCube(k,h,M,i),k.internalformat=M[0].internalformat,p.width=M[0].width,p.height=M[0].height,A(k),f=0;f<6;++f)y(M[f],_e+f);for(S(h,ge),O(),s.profile&&(k.stats.size=H(k.internalformat,k.type,p.width,p.height,h.genMipmaps,!0)),p.format=$[k.internalformat],p.type=K[k.type],p.mag=J[h.magFilter],p.min=tt[h.minFilter],p.wrapS=et[h.wrapS],p.wrapT=et[h.wrapT],f=0;f<6;++f)x(M[f]);return p}var k=new P(ge);st[k.id]=k,a.cubeCount++;var M=new Array(6);return p(e,r,n,o,f,h),p.subimage=function(t,e,i,r,n){kt(!!e,"must specify image data"),kt("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var a=0|i,s=0|r,o=0|n,u=m();return l(u,k),u.width=0,u.height=0,c(u,e),u.width=u.width||(k.width>>o)-a,u.height=u.height||(k.height>>o)-s,kt(k.type===u.type&&k.format===u.format&&k.internalformat===u.internalformat,"incompatible format for texture.subimage"),kt(a>=0&&s>=0&&a+u.width<=k.width&&s+u.height<=k.height,"texture.subimage write out of bounds"),kt(k.mipmask&1<<o,"missing mipmap data"),kt(u.data||u.element||u.needsCopy,"missing image data"),A(k),d(u,_e+t,a,s,o),O(),g(u),p},p.resize=function(e){var i=0|e;if(i!==k.width){p.width=k.width=i,p.height=k.height=i,A(k);for(var r=0;r<6;++r)for(var n=0;k.mipmask>>n;++n)t.texImage2D(_e+r,n,k.format,i>>n,i>>n,0,k.format,k.type,null);return O(),s.profile&&(k.stats.size=H(k.internalformat,k.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=k,s.profile&&(p.stats=k.stats),p.destroy=function(){k.decRef()},p},clear:function(){for(var e=0;e<ot;++e)t.activeTexture(bi+e),t.bindTexture(me,null),lt[e]=null;Et(st).forEach(M),a.cubeCount=0,a.textureCount=0},getTexture:function(t){return null},restore:function(){Et(st).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var i=0;i<32;++i)if(0!=(e.mipmask&1<<i))if(e.target===me)t.texImage2D(me,i,e.internalformat,e.width>>i,e.height>>i,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)t.texImage2D(_e+r,i,e.internalformat,e.width>>i,e.height>>i,0,e.internalformat,e.type,null);S(e.texInfo,e.target)})}}}function G(t,e,i){return Ri[t]*e*i}function W(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ji,this.offset=0,this.stride=0,this.divisor=0}function Q(t,e,i,r){function n(t,e,i,r){this.name=t,this.id=e,this.location=i,this.info=r}function a(t,e){for(var i=0;i<t.length;++i)if(t[i].id===e.id)return void(t[i].location=e.location);t.push(e)}function s(i,r,n){var a=i===tr?l:u,s=a[r];if(!s){var o=e.str(r);s=t.createShader(i),t.shaderSource(s,o),t.compileShader(s),kt.shaderError(t,s,o,i,n),a[r]=s}return s}function o(i,o){var l,u,f=s(tr,i.fragId),h=s(er,i.vertId),c=i.program=t.createProgram();t.attachShader(c,f),t.attachShader(c,h),t.linkProgram(c),kt.linkError(t,c,e.str(i.fragId),e.str(i.vertId),o);var p=t.getProgramParameter(c,ir);r.profile&&(i.stats.uniformsCount=p);var d=i.uniforms;for(l=0;l<p;++l)if(u=t.getActiveUniform(c,l))if(u.size>1)for(var m=0;m<u.size;++m){var g=u.name.replace("[0]","["+m+"]");a(d,new n(g,e.id(g),t.getUniformLocation(c,g),u))}else a(d,new n(u.name,e.id(u.name),t.getUniformLocation(c,u.name),u));var _=t.getProgramParameter(c,rr);r.profile&&(i.stats.attributesCount=_);var v=i.attributes;for(l=0;l<_;++l)(u=t.getActiveAttrib(c,l))&&a(v,new n(u.name,e.id(u.name),t.getAttribLocation(c,u.name),u))}var l={},u={},f={},h=[],c=0;return r.profile&&(i.getMaxUniformsCount=function(){var t=0;return h.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},i.getMaxAttributesCount=function(){var t=0;return h.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);Et(l).forEach(e),l={},Et(u).forEach(e),u={},h.forEach(function(e){t.deleteProgram(e.program)}),h.length=0,f={},i.shaderCount=0},program:function(t,e,n){kt.command(t>=0,"missing vertex shader",n),kt.command(e>=0,"missing fragment shader",n);var a=f[e];a||(a=f[e]={});var s=a[t];return s||(s=new function(t,e){this.id=c++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}(e,t),i.shaderCount++,o(s,n),a[t]=s,h.push(s)),s},restore:function(){l={},u={};for(var t=0;t<h.length;++t)o(h[t])},shader:s,frag:-1,vert:-1}}function $(t,e,i,r,n,a){function s(s){var o;null===e.next?(kt(n.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),o=ar):(kt(null!==e.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),o=e.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?kt(o===ar||o===or,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):kt(o===ar,"Reading from a framebuffer is only allowed for the type 'uint8'"));var l=0,u=0,f=r.framebufferWidth,h=r.framebufferHeight,c=null;ft(s)?c=s:s&&(kt.type(s,"object","invalid arguments to regl.read()"),l=0|s.x,u=0|s.y,kt(l>=0&&l<r.framebufferWidth,"invalid x offset for regl.read"),kt(u>=0&&u<r.framebufferHeight,"invalid y offset for regl.read"),f=0|(s.width||r.framebufferWidth-l),h=0|(s.height||r.framebufferHeight-u),c=s.data||null),c&&(o===ar?kt(c instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):o===or&&kt(c instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),kt(f>0&&f+l<=r.framebufferWidth,"invalid width for read pixels"),kt(h>0&&h+u<=r.framebufferHeight,"invalid height for read pixels"),i();var p=f*h*4;return c||(o===ar?c=new Uint8Array(p):o===or&&(c=c||new Float32Array(p))),kt.isTypedArray(c,"data buffer for regl.read() must be a typedarray"),kt(c.byteLength>=p,"data buffer for regl.read() too small"),t.pixelStorei(sr,4),t.readPixels(l,u,f,h,nr,o,c),c}function o(t){return t&&"framebuffer"in t?function(t){var i;return e.setFBO({framebuffer:t.framebuffer},function(){i=s(t)}),i}(t):s(t)}return o}function K(t){return Array.prototype.slice.call(t)}function J(t){return K(t).join("")}function tt(t){return Array.isArray(t)||ft(t)||k(t)}function et(t){return t.sort(function(t,e){return t===Vr?-1:e===Vr?1:t<e?-1:1})}function it(t,e,i,r){this.thisDep=t,this.contextDep=e,this.propDep=i,this.append=r}function rt(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function nt(t){return new it(!1,!1,!1,t)}function at(t,e){var i=t.type;if(i===cr){var r=t.data.length;return new it(!0,r>=1,r>=2,e)}if(i===gr){var n=t.data;return new it(n.thisDep,n.contextDep,n.propDep,e)}return new it(i===mr,i===dr,i===pr,e)}function st(t,e,i,r,n,a,s,o,l,u,f,h,c,p,d){function m(t){return t.replace(".","_")}function g(t,e,i){var r=m(t);V.push(t),X[r]=N[r]=!!i,U[r]=e}function _(t,e,i){var r=m(t);V.push(t),Array.isArray(i)?(N[r]=i.slice(),X[r]=i.slice()):N[r]=X[r]=i,q[r]=e}function v(){var t=function(){function t(){var t=[],e=[];return ht(function(){t.push.apply(t,K(arguments))},{def:function(){var r="v"+i++;return e.push(r),arguments.length>0&&(t.push(r,"="),t.push.apply(t,K(arguments)),t.push(";")),r},toString:function(){return J([e.length>0?"var "+e+";":"",J(t)])}})}function e(){function e(t,e){r(t,e,"=",i.def(t,e),";")}var i=t(),r=t(),n=i.toString,a=r.toString;return ht(function(){i.apply(i,K(arguments))},{def:i.def,entry:i,exit:r,save:e,set:function(t,r,n){e(t,r),i(t,r,"=",n,";")},toString:function(){return n()+a()}})}var i=0,r=[],n=[],a=t(),s={};return{global:a,link:function(t){for(var e=0;e<n.length;++e)if(n[e]===t)return r[e];var a="g"+i++;return r.push(a),n.push(t),a},block:t,proc:function(t,i){function r(){var t="a"+n.length;return n.push(t),t}var n=[];i=i||0;for(var a=0;a<i;++a)r();var o=e(),l=o.toString;return s[t]=ht(o,{arg:r,toString:function(){return J(["function(",n.join(),"){",l(),"}"])}})},scope:e,cond:function(){var t=J(arguments),i=e(),r=e(),n=i.toString,a=r.toString;return ht(i,{then:function(){return i.apply(i,K(arguments)),this},else:function(){return r.apply(r,K(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),J(["if(",t,"){",n(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(s).forEach(function(e){t.push('"',e,'":',s[e].toString(),",")}),t.push("}");var e=J(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(e)).apply(null,n)}}}(),i=t.link,r=t.global;t.id=G++,t.batchId="0";var n=i(H),a=t.shared={props:"a0"};Object.keys(H).forEach(function(t){a[t]=r.def(n,".",t)}),kt.optional(function(){t.CHECK=i(kt),t.commandStr=kt.guessCommand(),t.command=i(t.commandStr),t.assert=function(t,e,r){t("if(!(",e,"))",this.CHECK,".commandRaise(",i(r),",",this.command,");")},Z.invalidBlendCombinations=Jn});var s=t.next={},o=t.current={};Object.keys(q).forEach(function(t){Array.isArray(N[t])&&(s[t]=r.def(a.next,".",t),o[t]=r.def(a.current,".",t))});var l=t.constants={};Object.keys(Z).forEach(function(t){l[t]=r.def(JSON.stringify(Z[t]))}),t.invoke=function(e,r){switch(r.type){case cr:var n=["this",a.context,a.props,t.batchId];return e.def(i(r.data),".call(",n.slice(0,Math.max(r.data.length+1,4)),")");case pr:return e.def(a.props,r.data);case dr:return e.def(a.context,r.data);case mr:return e.def("this",r.data);case gr:return r.data.append(t,e),r.data.ref}},t.attribCache={};var f={};return t.scopeAttrib=function(t){var r=e.id(t);if(r in f)return f[r];var n=u.scope[r];n||(n=u.scope[r]=new L);return f[r]=i(n)},t}function y(t,i,s,l,u){function h(t){var e=g[t];e&&(v[t]=e)}var c=t.static,p=t.dynamic;kt.optional(function(){function t(t){Object.keys(t).forEach(function(t){kt.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',u.commandStr)})}var e=[qr,Hr,Zr,Gr,Wr,$r,Qr,Kr,Ur].concat(V);t(c),t(p)});var d=function(t,e){var i=t.static,r=t.dynamic;if(qr in i){var n=i[qr];return n?(n=o.getFramebuffer(n),kt.command(n,"invalid framebuffer object"),nt(function(t,e){var i=t.link(n),r=t.shared;e.set(r.framebuffer,".next",i);var a=r.context;return e.set(a,"."+Jr,i+".width"),e.set(a,"."+tn,i+".height"),i})):nt(function(t,e){var i=t.shared;e.set(i.framebuffer,".next","null");var r=i.context;return e.set(r,"."+Jr,r+"."+nn),e.set(r,"."+tn,r+"."+an),"null"})}if(qr in r){var a=r[qr];return at(a,function(t,e){var i=t.invoke(e,a),r=t.shared,n=r.framebuffer,s=e.def(n,".getFramebuffer(",i,")");kt.optional(function(){t.assert(e,"!"+i+"||"+s,"invalid framebuffer object")}),e.set(n,".next",s);var o=r.context;return e.set(o,"."+Jr,s+"?"+s+".width:"+o+"."+nn),e.set(o,"."+tn,s+"?"+s+".height:"+o+"."+an),s})}return null}(t),g=function(t,e,i){function r(t){if(t in n){var r=n[t];kt.commandType(r,"object","invalid "+t,i.commandStr);var s,o,l=!0,u=0|r.x,f=0|r.y;return"width"in r?(s=0|r.width,kt.command(s>=0,"invalid "+t,i.commandStr)):l=!1,"height"in r?(o=0|r.height,kt.command(o>=0,"invalid "+t,i.commandStr)):l=!1,new it(!l&&e&&e.thisDep,!l&&e&&e.contextDep,!l&&e&&e.propDep,function(t,e){var i=t.shared.context,n=s;"width"in r||(n=e.def(i,".",Jr,"-",u));var a=o;return"height"in r||(a=e.def(i,".",tn,"-",f)),[u,f,n,a]})}if(t in a){var h=a[t],c=at(h,function(e,i){var r=e.invoke(i,h);kt.optional(function(){e.assert(i,r+"&&typeof "+r+'==="object"',"invalid "+t)});var n=e.shared.context,a=i.def(r,".x|0"),s=i.def(r,".y|0"),o=i.def('"width" in ',r,"?",r,".width|0:","(",n,".",Jr,"-",a,")"),l=i.def('"height" in ',r,"?",r,".height|0:","(",n,".",tn,"-",s,")");return kt.optional(function(){e.assert(i,o+">=0&&"+l+">=0","invalid "+t)}),[a,s,o,l]});return e&&(c.thisDep=c.thisDep||e.thisDep,c.contextDep=c.contextDep||e.contextDep,c.propDep=c.propDep||e.propDep),c}return e?new it(e.thisDep,e.contextDep,e.propDep,function(t,e){var i=t.shared.context;return[0,0,e.def(i,".",Jr),e.def(i,".",tn)]}):null}var n=t.static,a=t.dynamic,s=r(Vr);if(s){var o=s;s=new it(s.thisDep,s.contextDep,s.propDep,function(t,e){var i=o.append(t,e),r=t.shared.context;return e.set(r,"."+en,i[2]),e.set(r,"."+rn,i[3]),i})}return{viewport:s,scissor_box:r(Xr)}}(t,d,u),_=function(t,e){function i(t,i){if(t in r){var a=0|r[t];return kt.command(!i||a>=0,"invalid "+t,e.commandStr),nt(function(t,e){return i&&(t.OFFSET=a),a})}if(t in n){var o=n[t];return at(o,function(e,r){var n=e.invoke(r,o);return i&&(e.OFFSET=n,kt.optional(function(){e.assert(r,n+">=0","invalid "+t)})),n})}return i&&s?nt(function(t,e){return t.OFFSET="0",0}):null}var r=t.static,n=t.dynamic,s=function(){if(Gr in r){var t=r[Gr];tt(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),kt.command(t,"invalid elements",e.commandStr));var i=nt(function(e,i){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null});return i.value=t,i}if(Gr in n){var s=n[Gr];return at(s,function(t,e){var i=t.shared,r=i.isBufferArgs,n=i.elements,a=t.invoke(e,s),o=e.def("null"),l=e.def(r,"(",a,")"),u=t.cond(l).then(o,"=",n,".createStream(",a,");").else(o,"=",n,".getElements(",a,");");return kt.optional(function(){t.assert(u.else,"!"+a+"||"+o,"invalid elements")}),e.entry(u),e.exit(t.cond(l).then(n,".destroyStream(",o,");")),t.ELEMENTS=o,o})}return null}(),o=i($r,!0);return{elements:s,primitive:function(){if(Wr in r){var t=r[Wr];return kt.commandParameter(t,Kt,"invalid primitve",e.commandStr),nt(function(e,i){return Kt[t]})}if(Wr in n){var i=n[Wr];return at(i,function(t,e){var r=t.constants.primTypes,n=t.invoke(e,i);return kt.optional(function(){t.assert(e,n+" in "+r,"invalid primitive, must be one of "+Object.keys(Kt))}),e.def(r,"[",n,"]")})}return s?rt(s)?nt(s.value?function(t,e){return e.def(t.ELEMENTS,".primType")}:function(){return Ln}):new it(s.thisDep,s.contextDep,s.propDep,function(t,e){var i=t.ELEMENTS;return e.def(i,"?",i,".primType:",Ln)}):null}(),count:function(){if(Qr in r){var t=0|r[Qr];return kt.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),nt(function(){return t})}if(Qr in n){var i=n[Qr];return at(i,function(t,e){var r=t.invoke(e,i);return kt.optional(function(){t.assert(e,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(s){if(rt(s)){if(s)return o?new it(o.thisDep,o.contextDep,o.propDep,function(t,e){var i=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return kt.optional(function(){t.assert(e,i+">=0","invalid vertex offset/element buffer too small")}),i}):nt(function(t,e){return e.def(t.ELEMENTS,".vertCount")});var a=nt(function(){return-1});return kt.optional(function(){a.MISSING=!0}),a}var l=new it(s.thisDep||o.thisDep,s.contextDep||o.contextDep,s.propDep||o.propDep,function(t,e){var i=t.ELEMENTS;return t.OFFSET?e.def(i,"?",i,".vertCount-",t.OFFSET,":-1"):e.def(i,"?",i,".vertCount:-1")});return kt.optional(function(){l.DYNAMIC=!0}),l}return null}(),instances:i(Kr,!1),offset:o}}(t,u),v=function(t,e){var i=t.static,n=t.dynamic,a={};return V.forEach(function(t){function s(e,r){if(t in i){var s=e(i[t]);a[o]=nt(function(){return s})}else if(t in n){var l=n[t];a[o]=at(l,function(t,e){return r(t,e,t.invoke(e,l))})}}var o=m(t);switch(t){case Ar:case vr:case _r:case zr:case wr:case Nr:case Cr:case Rr:case Fr:case kr:return s(function(i){return kt.commandType(i,"boolean",t,e.commandStr),i},function(e,i,r){return kt.optional(function(){e.assert(i,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)}),r});case Tr:return s(function(i){return kt.commandParameter(i,ta,"invalid "+t,e.commandStr),ta[i]},function(e,i,r){var n=e.constants.compareFuncs;return kt.optional(function(){e.assert(i,r+" in "+n,"invalid "+t+", must be one of "+Object.keys(ta))}),i.def(n,"[",r,"]")});case Sr:return s(function(t){return kt.command(z(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t},function(t,e,i){return kt.optional(function(){t.assert(e,t.shared.isArrayLike+"("+i+")&&"+i+".length===2&&typeof "+i+'[0]==="number"&&typeof '+i+'[1]==="number"&&'+i+"[0]<="+i+"[1]","depth range must be a 2d array")}),[e.def("+",i,"[0]"),e.def("+",i,"[1]")]});case xr:return s(function(t){kt.commandType(t,"object","blend.func",e.commandStr);var i="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,n="dstRGB"in t?t.dstRGB:t.dst,a="dstAlpha"in t?t.dstAlpha:t.dst;return kt.commandParameter(i,Kn,o+".srcRGB",e.commandStr),kt.commandParameter(r,Kn,o+".srcAlpha",e.commandStr),kt.commandParameter(n,Kn,o+".dstRGB",e.commandStr),kt.commandParameter(a,Kn,o+".dstAlpha",e.commandStr),kt.command(-1===Jn.indexOf(i+", "+n),"unallowed blending combination (srcRGB, dstRGB) = ("+i+", "+n+")",e.commandStr),[Kn[i],Kn[n],Kn[r],Kn[a]]},function(e,i,r){function n(n,s){var o=i.def('"',n,s,'" in ',r,"?",r,".",n,s,":",r,".",n);return kt.optional(function(){e.assert(i,o+" in "+a,"invalid "+t+"."+n+s+", must be one of "+Object.keys(Kn))}),o}var a=e.constants.blendFuncs;kt.optional(function(){e.assert(i,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var s=n("src","RGB"),o=n("dst","RGB");kt.optional(function(){var t=e.constants.invalidBlendCombinations;e.assert(i,t+".indexOf("+s+'+", "+'+o+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var l=i.def(a,"[",s,"]"),u=i.def(a,"[",n("src","Alpha"),"]");return[l,i.def(a,"[",o,"]"),u,i.def(a,"[",n("dst","Alpha"),"]")]});case br:return s(function(i){return"string"==typeof i?(kt.commandParameter(i,I,"invalid "+t,e.commandStr),[I[i],I[i]]):"object"==typeof i?(kt.commandParameter(i.rgb,I,t+".rgb",e.commandStr),kt.commandParameter(i.alpha,I,t+".alpha",e.commandStr),[I[i.rgb],I[i.alpha]]):void kt.commandRaise("invalid blend.equation",e.commandStr)},function(e,i,r){var n=e.constants.blendEquations,a=i.def(),s=i.def(),o=e.cond("typeof ",r,'==="string"');return kt.optional(function(){function i(t,i,r){e.assert(t,r+" in "+n,"invalid "+i+", must be one of "+Object.keys(I))}i(o.then,t,r),e.assert(o.else,r+"&&typeof "+r+'==="object"',"invalid "+t),i(o.else,t+".rgb",r+".rgb"),i(o.else,t+".alpha",r+".alpha")}),o.then(a,"=",s,"=",n,"[",r,"];"),o.else(a,"=",n,"[",r,".rgb];",s,"=",n,"[",r,".alpha];"),i(o),[a,s]});case yr:return s(function(t){return kt.command(z(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),P(4,function(e){return+t[e]})},function(t,e,i){return kt.optional(function(){t.assert(e,t.shared.isArrayLike+"("+i+")&&"+i+".length===4","blend.color must be a 4d array")}),P(4,function(t){return e.def("+",i,"[",t,"]")})});case Lr:return s(function(t){return kt.commandType(t,"number",o,e.commandStr),0|t},function(t,e,i){return kt.optional(function(){t.assert(e,"typeof "+i+'==="number"',"invalid stencil.mask")}),e.def(i,"|0")});case Ir:return s(function(i){kt.commandType(i,"object",o,e.commandStr);var r=i.cmp||"keep",n=i.ref||0,a="mask"in i?i.mask:-1;return kt.commandParameter(r,ta,t+".cmp",e.commandStr),kt.commandType(n,"number",t+".ref",e.commandStr),kt.commandType(a,"number",t+".mask",e.commandStr),[ta[r],n,a]},function(t,e,i){var r=t.constants.compareFuncs;return kt.optional(function(){function n(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}n(i+"&&typeof ",i,'==="object"'),n('!("cmp" in ',i,")||(",i,".cmp in ",r,")")}),[e.def('"cmp" in ',i,"?",r,"[",i,".cmp]",":",qn),e.def(i,".ref|0"),e.def('"mask" in ',i,"?",i,".mask|0:-1")]});case Br:case Yr:return s(function(i){kt.commandType(i,"object",o,e.commandStr);var r=i.fail||"keep",n=i.zfail||"keep",a=i.zpass||"keep";return kt.commandParameter(r,ea,t+".fail",e.commandStr),kt.commandParameter(n,ea,t+".zfail",e.commandStr),kt.commandParameter(a,ea,t+".zpass",e.commandStr),[t===Yr?Bn:In,ea[r],ea[n],ea[a]]},function(e,i,r){function n(n){return kt.optional(function(){e.assert(i,'!("'+n+'" in '+r+")||("+r+"."+n+" in "+a+")","invalid "+t+"."+n+", must be one of "+Object.keys(ea))}),i.def('"',n,'" in ',r,"?",a,"[",r,".",n,"]:",qn)}var a=e.constants.stencilOps;return kt.optional(function(){e.assert(i,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[t===Yr?Bn:In,n("fail"),n("zfail"),n("zpass")]});case Er:return s(function(t){kt.commandType(t,"object",o,e.commandStr);var i=0|t.factor,r=0|t.units;return kt.commandType(i,"number",o+".factor",e.commandStr),kt.commandType(r,"number",o+".units",e.commandStr),[i,r]},function(e,i,r){return kt.optional(function(){e.assert(i,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[i.def(r,".factor|0"),i.def(r,".units|0")]});case Or:return s(function(t){var i=0;return"front"===t?i=In:"back"===t&&(i=Bn),kt.command(!!i,o,e.commandStr),i},function(t,e,i){return kt.optional(function(){t.assert(e,i+'==="front"||'+i+'==="back"',"invalid cull.face")}),e.def(i,'==="front"?',In,":",Bn)});case Dr:return s(function(t){return kt.command("number"==typeof t&&t>=r.lineWidthDims[0]&&t<=r.lineWidthDims[1],"invalid line width, must positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],e.commandStr),t},function(t,e,i){return kt.optional(function(){t.assert(e,"typeof "+i+'==="number"&&'+i+">="+r.lineWidthDims[0]+"&&"+i+"<="+r.lineWidthDims[1],"invalid line width")}),i});case Mr:return s(function(t){return kt.commandParameter(t,ra,o,e.commandStr),ra[t]},function(t,e,i){return kt.optional(function(){t.assert(e,i+'==="cw"||'+i+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(i+'==="cw"?'+Yn+":"+Nn)});case Pr:return s(function(t){return kt.command(z(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map(function(t){return!!t})},function(t,e,i){return kt.optional(function(){t.assert(e,t.shared.isArrayLike+"("+i+")&&"+i+".length===4","invalid color.mask")}),P(4,function(t){return"!!"+i+"["+t+"]"})});case jr:return s(function(t){kt.command("object"==typeof t&&t,o,e.commandStr);var i="value"in t?t.value:1,r=!!t.invert;return kt.command("number"==typeof i&&i>=0&&i<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[i,r]},function(t,e,i){return kt.optional(function(){t.assert(e,i+"&&typeof "+i+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',i,"?+",i,".value:1"),e.def("!!",i,".invert")]})}}),a}(t,u),y=function(t){function i(t){if(t in n){var i=e.id(n[t]);kt.optional(function(){f.shader(ia[t],i,kt.guessCommand())});var r=nt(function(){return i});return r.id=i,r}if(t in a){var s=a[t];return at(s,function(e,i){var r=e.invoke(i,s),n=i.def(e.shared.strings,".id(",r,")");return kt.optional(function(){i(e.shared.shader,".shader(",ia[t],",",n,",",e.command,");")}),n})}return null}var r,n=t.static,a=t.dynamic,s=i(Zr),o=i(Hr),l=null;return rt(s)&&rt(o)?(l=f.program(o.id,s.id),r=nt(function(t,e){return t.link(l)})):r=new it(s&&s.thisDep||o&&o.thisDep,s&&s.contextDep||o&&o.contextDep,s&&s.propDep||o&&o.propDep,function(t,e){var i,r=t.shared.shader;i=s?s.append(t,e):e.def(r,".",Zr);var n,a=r+".program("+(n=o?o.append(t,e):e.def(r,".",Hr))+","+i;return kt.optional(function(){a+=","+t.command}),e.def(a+")")}),{frag:s,vert:o,progVar:r,program:l}}(t);h(Vr),h(m(Xr));var b=Object.keys(v).length>0,x={framebuffer:d,draw:_,shader:y,state:v,dirty:b};return x.profile=function(t){var e,i=t.static,r=t.dynamic;if(Ur in i){var n=!!i[Ur];(e=nt(function(t,e){return n})).enable=n}else if(Ur in r){var a=r[Ur];e=at(a,function(t,e){return t.invoke(e,a)})}return e}(t),x.uniforms=function(t,e){var i=t.static,r=t.dynamic,n={};return Object.keys(i).forEach(function(t){var r,a=i[t];if("number"==typeof a||"boolean"==typeof a)r=nt(function(){return a});else if("function"==typeof a){var s=a._reglType;"texture2d"===s||"textureCube"===s?r=nt(function(t){return t.link(a)}):"framebuffer"===s||"framebufferCube"===s?(kt.command(a.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=nt(function(t){return t.link(a.color[0])})):kt.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else z(a)?r=nt(function(e){return e.global.def("[",P(a.length,function(i){return kt.command("number"==typeof a[i]||"boolean"==typeof a[i],"invalid uniform "+t,e.commandStr),a[i]}),"]")}):kt.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=a,n[t]=r}),Object.keys(r).forEach(function(t){var e=r[t];n[t]=at(e,function(t,i){return t.invoke(i,e)})}),n}(s,u),x.attributes=function(t,i){var r=t.static,a=t.dynamic,s={};return Object.keys(r).forEach(function(t){var a=r[t],o=e.id(t),l=new L;if(tt(a))l.state=fr,l.buffer=n.getBuffer(n.create(a,on,!1,!0)),l.type=0;else{var u=n.getBuffer(a);if(u)l.state=fr,l.buffer=u,l.type=0;else if(kt.command("object"==typeof a&&a,"invalid data for attribute "+t,i.commandStr),a.constant){var f=a.constant;l.buffer="null",l.state=hr,"number"==typeof f?l.x=f:(kt.command(z(f)&&f.length>0&&f.length<=4,"invalid constant for attribute "+t,i.commandStr),lr.forEach(function(t,e){e<f.length&&(l[t]=f[e])}))}else{u=tt(a.buffer)?n.getBuffer(n.create(a.buffer,on,!1,!0)):n.getBuffer(a.buffer),kt.command(!!u,'missing buffer for attribute "'+t+'"',i.commandStr);var h=0|a.offset;kt.command(h>=0,'invalid offset for attribute "'+t+'"',i.commandStr);var c=0|a.stride;kt.command(c>=0&&c<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',i.commandStr);var p=0|a.size;kt.command(!("size"in a)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',i.commandStr);var d=!!a.normalized,m=0;"type"in a&&(kt.commandParameter(a.type,Vt,"invalid type for attribute "+t,i.commandStr),m=Vt[a.type]);var g=0|a.divisor;"divisor"in a&&(kt.command(0===g||B,'cannot specify divisor for attribute "'+t+'", instancing not supported',i.commandStr),kt.command(g>=0,'invalid divisor for attribute "'+t+'"',i.commandStr)),kt.optional(function(){var e=i.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(a).forEach(function(i){kt.command(r.indexOf(i)>=0,'unknown parameter "'+i+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",e)})}),l.buffer=u,l.state=fr,l.size=p,l.normalized=d,l.type=m||u.dtype,l.offset=h,l.stride=c,l.divisor=g}}s[t]=nt(function(t,e){var i=t.attribCache;if(o in i)return i[o];var r={isStream:!1};return Object.keys(l).forEach(function(t){r[t]=l[t]}),l.buffer&&(r.buffer=t.link(l.buffer),r.type=r.type||r.buffer+".dtype"),i[o]=r,r})}),Object.keys(a).forEach(function(t){var e=a[t];s[t]=at(e,function(i,r){function n(t){r(u[t],"=",a,".",t,"|0;")}var a=i.invoke(r,e),s=i.shared,o=s.isBufferArgs,l=s.buffer;kt.optional(function(){i.assert(r,a+"&&(typeof "+a+'==="object"||typeof '+a+'==="function")&&('+o+"("+a+")||"+l+".getBuffer("+a+")||"+l+".getBuffer("+a+".buffer)||"+o+"("+a+'.buffer)||("constant" in '+a+"&&(typeof "+a+'.constant==="number"||'+s.isArrayLike+"("+a+".constant))))",'invalid dynamic attribute "'+t+'"')});var u={isStream:r.def(!1)},f=new L;f.state=fr,Object.keys(f).forEach(function(t){u[t]=r.def(""+f[t])});var h=u.buffer,c=u.type;return r("if(",o,"(",a,")){",u.isStream,"=true;",h,"=",l,".createStream(",on,",",a,");",c,"=",h,".dtype;","}else{",h,"=",l,".getBuffer(",a,");","if(",h,"){",c,"=",h,".dtype;",'}else if("constant" in ',a,"){",u.state,"=",hr,";","if(typeof "+a+'.constant === "number"){',u[lr[0]],"=",a,".constant;",lr.slice(1).map(function(t){return u[t]}).join("="),"=0;","}else{",lr.map(function(t,e){return u[t]+"="+a+".constant.length>="+e+"?"+a+".constant["+e+"]:0;"}).join(""),"}}else{","if(",o,"(",a,".buffer)){",h,"=",l,".createStream(",on,",",a,".buffer);","}else{",h,"=",l,".getBuffer(",a,".buffer);","}",c,'="type" in ',a,"?",s.glTypes,"[",a,".type]:",h,".dtype;",u.normalized,"=!!",a,".normalized;"),n("size"),n("offset"),n("stride"),n("divisor"),r("}}"),r.exit("if(",u.isStream,"){",l,".destroyStream(",h,");","}"),u})}),s}(i,u),x.context=function(t){var e=t.static,i=t.dynamic,r={};return Object.keys(e).forEach(function(t){var i=e[t];r[t]=nt(function(t,e){return"number"==typeof i||"boolean"==typeof i?""+i:t.link(i)})}),Object.keys(i).forEach(function(t){var e=i[t];r[t]=at(e,function(t,i){return t.invoke(i,e)})}),r}(l),x}function b(t,e,i){var r=t.shared.context,n=t.scope();Object.keys(i).forEach(function(a){e.save(r,"."+a);var s=i[a];n(r,".",a,"=",s.append(t,e),";")}),e(n)}function x(t,e,i,r){var n,a=t.shared,s=a.gl,o=a.framebuffer;Y&&(n=e.def(a.extensions,".webgl_draw_buffers"));var l,u=t.constants,f=u.drawBuffer,h=u.backBuffer;l=i?i.append(t,e):e.def(o,".next"),r||e("if(",l,"!==",o,".cur){"),e("if(",l,"){",s,".bindFramebuffer(",Qn,",",l,".framebuffer);"),Y&&e(n,".drawBuffersWEBGL(",f,"[",l,".colorAttachments.length]);"),e("}else{",s,".bindFramebuffer(",Qn,",null);"),Y&&e(n,".drawBuffersWEBGL(",h,");"),e("}",o,".cur=",l,";"),r||e("}")}function w(t,e,i){var r=t.shared,n=r.gl,a=t.current,s=t.next,o=r.current,l=r.next,u=t.cond(o,".dirty");V.forEach(function(e){var r=m(e);if(!(r in i.state)){var f,h;if(r in s){f=s[r],h=a[r];var c=P(N[r].length,function(t){return u.def(f,"[",t,"]")});u(t.cond(c.map(function(t,e){return t+"!=="+h+"["+e+"]"}).join("||")).then(n,".",q[r],"(",c,");",c.map(function(t,e){return h+"["+e+"]="+t}).join(";"),";"))}else{f=u.def(l,".",r);var p=t.cond(f,"!==",o,".",r);u(p),r in U?p(t.cond(f).then(n,".enable(",U[r],");").else(n,".disable(",U[r],");"),o,".",r,"=",f,";"):p(n,".",q[r],"(",f,");",o,".",r,"=",f,";")}}}),0===Object.keys(i.state).length&&u(o,".dirty=false;"),e(u)}function T(t,e,i,r){var n=t.shared,a=t.current,s=n.current,o=n.gl;et(Object.keys(i)).forEach(function(n){var l=i[n];if(!r||r(l)){var u=l.append(t,e);if(U[n]){var f=U[n];rt(l)?u?e(o,".enable(",f,");"):e(o,".disable(",f,");"):e(t.cond(u).then(o,".enable(",f,");").else(o,".disable(",f,");")),e(s,".",n,"=",u,";")}else if(z(u)){var h=a[n];e(o,".",q[n],"(",u,");",u.map(function(t,e){return h+"["+e+"]="+t}).join(";"),";")}else e(o,".",q[n],"(",u,");",s,".",n,"=",u,";")}})}function S(t,e){B&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function k(t,e,i,r,n){function a(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function s(t){t(u=e.def(),"=",a(),";"),"string"==typeof n?t(d,".count+=",n,";"):t(d,".count++;"),p&&(r?t(f=e.def(),"=",g,".getNumPendingQueries();"):t(g,".beginQuery(",d,");"))}function o(t){t(d,".cpuTime+=",a(),"-",u,";"),p&&(r?t(g,".pushScopeStats(",f,",",g,".getNumPendingQueries(),",d,");"):t(g,".endQuery();"))}function l(t){var i=e.def(m,".profile");e(m,".profile=",t,";"),e.exit(m,".profile=",i,";")}var u,f,h,c=t.shared,d=t.stats,m=c.current,g=c.timer,_=i.profile;if(_){if(rt(_))return void(_.enable?(s(e),o(e.exit),l("true")):l("false"));l(h=_.append(t,e))}else h=e.def(m,".profile");var v=t.block();s(v),e("if(",h,"){",v,"}");var y=t.block();o(y),e.exit("if(",h,"){",y,"}")}function A(t,e,i,r,n){var a=t.shared;r.forEach(function(r){var s,o=r.name,l=i.attributes[o];if(l){if(!n(l))return;s=l.append(t,e)}else{if(!n(na))return;var u=t.scopeAttrib(o);kt.optional(function(){t.assert(e,u+".state","missing attribute "+o)}),s={},Object.keys(new L).forEach(function(t){s[t]=e.def(u,".",t)})}!function(i,r,n){function s(){e("if(!",f,".buffer){",l,".enableVertexAttribArray(",u,");}");var i,a=n.type;if(i=n.size?e.def(n.size,"||",r):r,e("if(",f,".type!==",a,"||",f,".size!==",i,"||",d.map(function(t){return f+"."+t+"!=="+n[t]}).join("||"),"){",l,".bindBuffer(",on,",",c,".buffer);",l,".vertexAttribPointer(",[u,i,a,n.normalized,n.stride,n.offset],");",f,".type=",a,";",f,".size=",i,";",d.map(function(t){return f+"."+t+"="+n[t]+";"}).join(""),"}"),B){var s=n.divisor;e("if(",f,".divisor!==",s,"){",t.instancing,".vertexAttribDivisorANGLE(",[u,s],");",f,".divisor=",s,";}")}}function o(){e("if(",f,".buffer){",l,".disableVertexAttribArray(",u,");","}if(",lr.map(function(t,e){return f+"."+t+"!=="+p[e]}).join("||"),"){",l,".vertexAttrib4f(",u,",",p,");",lr.map(function(t,e){return f+"."+t+"="+p[e]+";"}).join(""),"}")}var l=a.gl,u=e.def(i,".location"),f=e.def(a.attributes,"[",u,"]"),h=n.state,c=n.buffer,p=[n.x,n.y,n.z,n.w],d=["buffer","normalized","offset","stride"];h===fr?s():h===hr?o():(e("if(",h,"===",fr,"){"),s(),e("}else{"),o(),e("}"))}(t.link(r),function(t){switch(t){case xn:case kn:case Mn:return 2;case wn:case Pn:case Dn:return 3;case Tn:case An:case Cn:return 4;default:return 1}}(r.info.type),s)})}function O(t,i,r,n,a){for(var s,o=t.shared,l=o.gl,u=0;u<n.length;++u){var f,h=n[u],c=h.name,p=h.info.type,d=r.uniforms[c],m=t.link(h)+".location";if(d){if(!a(d))continue;if(rt(d)){var g=d.value;if(kt.command(null!==g&&void 0!==g,'missing uniform "'+c+'"',t.commandStr),p===jn||p===zn){kt.command("function"==typeof g&&(p===jn&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||p===zn&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+c,t.commandStr);var _=t.link(g._texture||g.color[0]._texture);i(l,".uniform1i(",m,",",_+".bind());"),i.exit(_,".unbind();")}else if(p===En||p===Rn||p===Fn){kt.optional(function(){kt.command(z(g),"invalid matrix for uniform "+c,t.commandStr),kt.command(p===En&&4===g.length||p===Rn&&9===g.length||p===Fn&&16===g.length,"invalid length for matrix uniform "+c,t.commandStr)});var v=t.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),y=2;p===Rn?y=3:p===Fn&&(y=4),i(l,".uniformMatrix",y,"fv(",m,",false,",v,");")}else{switch(p){case bn:kt.commandType(g,"number","uniform "+c,t.commandStr),s="1f";break;case xn:kt.command(z(g)&&2===g.length,"uniform "+c,t.commandStr),s="2f";break;case wn:kt.command(z(g)&&3===g.length,"uniform "+c,t.commandStr),s="3f";break;case Tn:kt.command(z(g)&&4===g.length,"uniform "+c,t.commandStr),s="4f";break;case On:kt.commandType(g,"boolean","uniform "+c,t.commandStr),s="1i";break;case Sn:kt.commandType(g,"number","uniform "+c,t.commandStr),s="1i";break;case Mn:case kn:kt.command(z(g)&&2===g.length,"uniform "+c,t.commandStr),s="2i";break;case Dn:case Pn:kt.command(z(g)&&3===g.length,"uniform "+c,t.commandStr),s="3i";break;case Cn:case An:kt.command(z(g)&&4===g.length,"uniform "+c,t.commandStr),s="4i"}i(l,".uniform",s,"(",m,",",z(g)?Array.prototype.slice.call(g):g,");")}continue}f=d.append(t,i)}else{if(!a(na))continue;f=i.def(o.uniforms,"[",e.id(c),"]")}p===jn?i("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):p===zn&&i("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),kt.optional(function(){function e(e,r){t.assert(i,e,'bad data or missing for uniform "'+c+'".  '+r)}function r(t){e("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function n(i,r){e(o.isArrayLike+"("+f+")&&"+f+".length==="+i,"invalid vector, should have length "+i,t.commandStr)}function a(i){e("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(i===un?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(p){case Sn:r("number");break;case kn:n(2);break;case Pn:n(3);break;case An:n(4);break;case bn:r("number");break;case xn:n(2);break;case wn:n(3);break;case Tn:n(4);break;case On:r("boolean");break;case Mn:n(2);break;case Dn:n(3);break;case Cn:case En:n(4);break;case Rn:n(9);break;case Fn:n(16);break;case jn:a(un);break;case zn:a(fn)}});var b=1;switch(p){case jn:case zn:var x=i.def(f,"._texture");i(l,".uniform1i(",m,",",x,".bind());"),i.exit(x,".unbind();");continue;case Sn:case On:s="1i";break;case kn:case Mn:s="2i",b=2;break;case Pn:case Dn:s="3i",b=3;break;case An:case Cn:s="4i",b=4;break;case bn:s="1f";break;case xn:s="2f",b=2;break;case wn:s="3f",b=3;break;case Tn:s="4f",b=4;break;case En:s="Matrix2fv";break;case Rn:s="Matrix3fv";break;case Fn:s="Matrix4fv"}if(i(l,".uniform",s,"(",m,","),"M"===s.charAt(0)){var w=Math.pow(p-En+2,2),T=t.global.def("new Float32Array(",w,")");i("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",P(w,function(t){return T+"["+t+"]="+f+"["+t+"]"}),",",T,")")}else i(b>1?P(b,function(t){return f+"["+t+"]"}):f);i(");")}}function M(t,e,i,r){function n(n){var a=f[n];return a?a.contextDep&&r.contextDynamic||a.propDep?a.append(t,i):a.append(t,e):e.def(u,".",n)}function a(){function t(){i(g,".drawElementsInstancedANGLE(",[c,d,_,p+"<<(("+_+"-"+ur+")>>1)",m],");")}function e(){i(g,".drawArraysInstancedANGLE(",[c,p,d,m],");")}h?v?t():(i("if(",h,"){"),t(),i("}else{"),e(),i("}")):e()}function s(){function t(){i(l+".drawElements("+[c,d,_,p+"<<(("+_+"-"+ur+")>>1)"]+");")}function e(){i(l+".drawArrays("+[c,p,d]+");")}h?v?t():(i("if(",h,"){"),t(),i("}else{"),e(),i("}")):e()}var o=t.shared,l=o.gl,u=o.draw,f=r.draw,h=function(){var n,a=f.elements,s=e;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(s=i),n=a.append(t,s)):n=s.def(u,".",Gr),n&&s("if("+n+")"+l+".bindBuffer("+ln+","+n+".buffer.buffer);"),n}(),c=n(Wr),p=n($r),d=function(){var n,a=f.count,s=e;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(s=i),n=a.append(t,s),kt.optional(function(){a.MISSING&&t.assert(e,"false","missing vertex count"),a.DYNAMIC&&t.assert(s,n+">=0","missing vertex count")})):(n=s.def(u,".",Qr),kt.optional(function(){t.assert(s,n+">=0","missing vertex count")})),n}();if("number"==typeof d){if(0===d)return}else i("if(",d,"){"),i.exit("}");var m,g;B&&(m=n(Kr),g=t.instancing);var _=h+".type",v=f.elements&&rt(f.elements);B&&("number"!=typeof m||m>=0)?"string"==typeof m?(i("if(",m,">0){"),a(),i("}else if(",m,"<0){"),s(),i("}")):a():s()}function D(t,e,i,r,n){var a=v(),s=a.proc("body",n);return kt.optional(function(){a.commandStr=e.commandStr,a.command=a.link(e.commandStr)}),B&&(a.instancing=s.def(a.shared.extensions,".angle_instanced_arrays")),t(a,s,i,r),a.compile().body}function C(t,e,i,r){S(t,e),A(t,e,i,r.attributes,function(){return!0}),O(t,e,i,r.uniforms,function(){return!0}),M(t,e,e,i)}function E(t,e,i,r){function n(){return!0}t.batchId="a1",S(t,e),A(t,e,i,r.attributes,n),O(t,e,i,r.uniforms,n),M(t,e,e,i)}function R(t,e,i,r){function n(t){return t.contextDep&&s||t.propDep}function a(t){return!n(t)}S(t,e);var s=i.contextDep,o=e.def(),l=e.def();t.shared.props=l,t.batchId=o;var u=t.scope(),f=t.scope();if(e(u.entry,"for(",o,"=0;",o,"<","a1",";++",o,"){",l,"=","a0","[",o,"];",f,"}",u.exit),i.needsContext&&b(t,f,i.context),i.needsFramebuffer&&x(t,f,i.framebuffer),T(t,f,i.state,n),i.profile&&n(i.profile)&&k(t,f,i,!1,!0),r)A(t,u,i,r.attributes,a),A(t,f,i,r.attributes,n),O(t,u,i,r.uniforms,a),O(t,f,i,r.uniforms,n),M(t,u,f,i);else{var h=t.global.def("{}"),c=i.shader.progVar.append(t,f),p=f.def(c,".id"),d=f.def(h,"[",p,"]");f(t.shared.gl,".useProgram(",c,".program);","if(!",d,"){",d,"=",h,"[",p,"]=",t.link(function(e){return D(E,t,i,e,2)}),"(",c,");}",d,".call(this,a0[",o,"],",o,");")}}function F(t,e,i){var r=e.static[i];if(r&&function(t){if("object"==typeof t&&!z(t)){for(var e=Object.keys(t),i=0;i<e.length;++i)if(Ot.isDynamic(t[e[i]]))return!0;return!1}}(r)){var n=t.global,a=Object.keys(r),s=!1,o=!1,l=!1,u=t.global.def("{}");a.forEach(function(e){var i=r[e];if(Ot.isDynamic(i)){"function"==typeof i&&(i=r[e]=Ot.unbox(i));var a=at(i,null);s=s||a.thisDep,l=l||a.propDep,o=o||a.contextDep}else{switch(n(u,".",e,"="),typeof i){case"number":n(i);break;case"string":n('"',i,'"');break;case"object":Array.isArray(i)&&n("[",i.join(),"]");break;default:n(t.link(i))}n(";")}}),e.dynamic[i]=new Ot.DynamicVariable(gr,{thisDep:s,contextDep:o,propDep:l,ref:u,append:function(t,e){a.forEach(function(i){var n=r[i];if(Ot.isDynamic(n)){var a=t.invoke(e,n);e(u,".",i,"=",a,";")}})}}),delete e.static[i]}}function j(t,i,r,n,a){var s=v();s.stats=s.link(a),Object.keys(i.static).forEach(function(t){F(s,i,t)}),sn.forEach(function(e){F(s,t,e)});var o=y(t,i,r,n,s);return function(t,e){var i=t.proc("draw",1);S(t,i),b(t,i,e.context),x(t,i,e.framebuffer),w(t,i,e),T(t,i,e.state),k(t,i,e,!1,!0);var r=e.shader.progVar.append(t,i);if(i(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)C(t,i,e,e.shader.program);else{var n=t.global.def("{}"),a=i.def(r,".id"),s=i.def(n,"[",a,"]");i(t.cond(s).then(s,".call(this,a0);").else(s,"=",n,"[",a,"]=",t.link(function(i){return D(C,t,e,i,1)}),"(",r,");",s,".call(this,a0);"))}Object.keys(e.state).length>0&&i(t.shared.current,".dirty=true;")}(s,o),function(t,i){function r(e){var r=i.shader[e];r&&n.set(a.shader,"."+e,r.append(t,n))}var n=t.proc("scope",3);t.batchId="a2";var a=t.shared,s=a.current;b(t,n,i.context),i.framebuffer&&i.framebuffer.append(t,n),et(Object.keys(i.state)).forEach(function(e){var r=i.state[e].append(t,n);z(r)?r.forEach(function(i,r){n.set(t.next[e],"["+r+"]",i)}):n.set(a.next,"."+e,r)}),k(t,n,i,!0,!0),[Gr,$r,Qr,Kr,Wr].forEach(function(e){var r=i.draw[e];r&&n.set(a.draw,"."+e,""+r.append(t,n))}),Object.keys(i.uniforms).forEach(function(r){n.set(a.uniforms,"["+e.id(r)+"]",i.uniforms[r].append(t,n))}),Object.keys(i.attributes).forEach(function(e){var r=i.attributes[e].append(t,n),a=t.scopeAttrib(e);Object.keys(new L).forEach(function(t){n.set(a,"."+t,r[t])})}),r(Hr),r(Zr),Object.keys(i.state).length>0&&(n(s,".dirty=true;"),n.exit(s,".dirty=true;")),n("a1(",t.shared.context,",a0,",t.batchId,");")}(s,o),function(t,e){function i(t){return t.contextDep&&n||t.propDep}var r=t.proc("batch",2);t.batchId="0",S(t,r);var n=!1,a=!0;Object.keys(e.context).forEach(function(t){n=n||e.context[t].propDep}),n||(b(t,r,e.context),a=!1);var s=e.framebuffer,o=!1;s?(s.propDep?n=o=!0:s.contextDep&&n&&(o=!0),o||x(t,r,s)):x(t,r,null),e.state.viewport&&e.state.viewport.propDep&&(n=!0),w(t,r,e),T(t,r,e.state,function(t){return!i(t)}),e.profile&&i(e.profile)||k(t,r,e,!1,"a1"),e.contextDep=n,e.needsContext=a,e.needsFramebuffer=o;var l=e.shader.progVar;if(l.contextDep&&n||l.propDep)R(t,r,e,null);else{var u=l.append(t,r);if(r(t.shared.gl,".useProgram(",u,".program);"),e.shader.program)R(t,r,e,e.shader.program);else{var f=t.global.def("{}"),h=r.def(u,".id"),c=r.def(f,"[",h,"]");r(t.cond(c).then(c,".call(this,a0,a1);").else(c,"=",f,"[",h,"]=",t.link(function(i){return D(R,t,e,i,2)}),"(",u,");",c,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&r(t.shared.current,".dirty=true;")}(s,o),s.compile()}var L=u.Record,I={add:32774,subtract:32778,"reverse subtract":32779};i.ext_blend_minmax&&(I.min=Xn,I.max=Vn);var B=i.angle_instanced_arrays,Y=i.webgl_draw_buffers,N={dirty:!0,profile:d.profile},X={},V=[],U={},q={};g(_r,pn),g(vr,cn),_(yr,"blendColor",[0,0,0,0]),_(br,"blendEquationSeparate",[Gn,Gn]),_(xr,"blendFuncSeparate",[Zn,Hn,Zn,Hn]),g(wr,mn,!0),_(Tr,"depthFunc",Wn),_(Sr,"depthRange",[0,1]),_(kr,"depthMask",!0),_(Pr,Pr,[!0,!0,!0,!0]),g(Ar,hn),_(Or,"cullFace",Bn),_(Mr,Mr,Nn),_(Dr,Dr,1),g(Cr,_n),_(Er,"polygonOffset",[0,0]),g(Rr,vn),g(Fr,yn),_(jr,"sampleCoverage",[1,!1]),g(zr,dn),_(Lr,"stencilMask",-1),_(Ir,"stencilFunc",[Un,0,-1]),_(Br,"stencilOpSeparate",[In,qn,qn,qn]),_(Yr,"stencilOpSeparate",[Bn,qn,qn,qn]),g(Nr,gn),_(Xr,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),_(Vr,Vr,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var H={gl:t,context:c,strings:e,next:X,current:N,draw:h,elements:a,buffer:n,shader:f,attributes:u.state,uniforms:l,framebuffer:o,extensions:i,timer:p,isBufferArgs:tt},Z={primTypes:Kt,compareFuncs:ta,blendFuncs:Kn,blendEquations:I,stencilOps:ea,glTypes:Vt,orientationType:ra};kt.optional(function(){H.isArrayLike=z}),Y&&(Z.backBuffer=[Bn],Z.drawBuffer=P(r.maxDrawbuffers,function(t){return 0===t?[0]:P(t,function(t){return $n+t})}));var G=0;return{next:X,current:N,procs:function(){var e=v(),i=e.proc("poll"),n=e.proc("refresh"),a=e.block();i(a),n(a);var s=e.shared,o=s.gl,l=s.next,u=s.current;a(u,".dirty=false;"),x(e,i),x(e,n,null,!0);var f,h=t.getExtension("angle_instanced_arrays");h&&(f=e.link(h));for(var c=0;c<r.maxAttributes;++c){var p=n.def(s.attributes,"[",c,"]"),d=e.cond(p,".buffer");d.then(o,".enableVertexAttribArray(",c,");",o,".bindBuffer(",on,",",p,".buffer.buffer);",o,".vertexAttribPointer(",c,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(o,".disableVertexAttribArray(",c,");",o,".vertexAttrib4f(",c,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),n(d),h&&n(f,".vertexAttribDivisorANGLE(",c,",",p,".divisor);")}return Object.keys(U).forEach(function(t){var r=U[t],s=a.def(l,".",t),f=e.block();f("if(",s,"){",o,".enable(",r,")}else{",o,".disable(",r,")}",u,".",t,"=",s,";"),n(f),i("if(",s,"!==",u,".",t,"){",f,"}")}),Object.keys(q).forEach(function(t){var r,s,f=q[t],h=N[t],c=e.block();if(c(o,".",f,"("),z(h)){var p=h.length;r=e.global.def(l,".",t),s=e.global.def(u,".",t),c(P(p,function(t){return r+"["+t+"]"}),");",P(p,function(t){return s+"["+t+"]="+r+"["+t+"];"}).join("")),i("if(",P(p,function(t){return r+"["+t+"]!=="+s+"["+t+"]"}).join("||"),"){",c,"}")}else r=a.def(l,".",t),s=a.def(u,".",t),c(r,");",u,".",t,"=",r,";"),i("if(",r,"!==",s,"){",c,"}");n(c)}),e.compile()}(),compile:j}}function ot(t,e){for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}function lt(t){function e(){if(0===V.length)return x&&x.update(),void(G=null);G=Mt.next(e),f();for(var t=V.length-1;t>=0;--t){var i=V[t];i&&i(A,null,0)}d.flush(),x&&x.update()}function i(){!G&&V.length>0&&(G=Mt.next(e))}function r(){G&&(Mt.cancel(e),G=null)}function n(t){t.preventDefault(),g=!0,r(),U.forEach(function(t){t()})}function a(t){d.getError(),g=!1,_.restore(),j.restore(),M.restore(),z.restore(),L.restore(),I.restore(),x&&x.restore(),B.procs.refresh(),i(),q.forEach(function(t){t()})}function s(t){function e(t){var e={},i={};return Object.keys(t).forEach(function(r){var n=t[r];Ot.isDynamic(n)?i[r]=Ot.unbox(n,r):e[r]=n}),{dynamic:i,static:e}}function i(t,e){var i;if(g&&kt.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e){if("number"==typeof t){for(i=0;i<t;++i)h.call(this,null,e,i);return}if(Array.isArray(t)){for(i=0;i<t.length;++i)h.call(this,t[i],e,i);return}return h.call(this,t,e,0)}if("number"==typeof t){if(t>0)return f.call(this,function(t){for(;c.length<t;)c.push(null);return c}(0|t),0|t)}else{if(!Array.isArray(t))return u.call(this,t);if(t.length)return f.call(this,t,t.length)}}kt(!!t,"invalid args to regl({...})"),kt.type(t,"object","invalid args to regl({...})");var r=e(t.context||{}),n=e(t.uniforms||{}),a=e(t.attributes||{}),s=e(function(t){function e(t){if(t in i){var e=i[t];delete i[t],Object.keys(e).forEach(function(r){i[t+"."+r]=e[r]})}}var i=ht({},t);return delete i.uniforms,delete i.attributes,delete i.context,"stencil"in i&&i.stencil.op&&(i.stencil.opBack=i.stencil.opFront=i.stencil.op,delete i.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),i}(t)),o={gpuTime:0,cpuTime:0,count:0},l=B.compile(s,a,n,r,o),u=l.draw,f=l.batch,h=l.scope,c=[];return ht(i,{stats:o})}function o(t,e){var i=0;B.procs.poll();var r=e.color;r&&(d.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),i|=ua),"depth"in e&&(d.clearDepth(+e.depth),i|=fa),"stencil"in e&&(d.clearStencil(0|e.stencil),i|=ha),kt(!!i,"called regl.clear with no buffer specified"),d.clear(i)}function l(t){return kt.type(t,"function","regl.frame() callback must be a function"),V.push(t),i(),{cancel:function(){function e(){var t=ot(V,e);V[t]=V[V.length-1],V.length-=1,V.length<=0&&r()}var i=ot(V,t);kt(i>=0,"cannot cancel a frame twice"),V[i]=e}}}function u(){var t=N.viewport,e=N.scissor_box;t[0]=t[1]=e[0]=e[1]=0,A.viewportWidth=A.framebufferWidth=A.drawingBufferWidth=t[2]=e[2]=d.drawingBufferWidth,A.viewportHeight=A.framebufferHeight=A.drawingBufferHeight=t[3]=e[3]=d.drawingBufferHeight}function f(){A.tick+=1,A.time=c(),u(),B.procs.poll()}function h(){u(),B.procs.refresh(),x&&x.update()}function c(){return(Dt()-w)/1e3}var p=S(t);if(!p)return null;var d=p.gl,m=d.getContextAttributes(),g=d.isContextLost(),_=function(t,e){function i(e){kt.type(e,"string","extension name must be string");var i,n=e.toLowerCase();try{i=r[n]=t.getExtension(n)}catch(t){}return!!i}for(var r={},n=0;n<e.extensions.length;++n){var a=e.extensions[n];if(!i(a))return e.onDestroy(),e.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(i),{extensions:r,restore:function(){Object.keys(r).forEach(function(t){if(!i(t))throw new Error("(regl): error restoring extension "+t)})}}}(d,p);if(!_)return null;var v=function(){var t={"":0},e=[""];return{id:function(i){var r=t[i];return r||(r=t[i]=e.length,e.push(i),r)},str:function(t){return e[t]}}}(),y={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},b=_.extensions,x=la(d,b),w=Dt(),T=d.drawingBufferWidth,P=d.drawingBufferHeight,A={tick:0,time:0,viewportWidth:T,viewportHeight:P,framebufferWidth:T,framebufferHeight:P,drawingBufferWidth:T,drawingBufferHeight:P,pixelRatio:p.pixelRatio},O=Ct(d,b),M=function(t,e,i){function r(e){this.id=o++,this.buffer=t.createBuffer(),this.type=e,this.usage=Zt,this.byteLength=0,this.dimension=1,this.dtype=Wt,this.persistentData=null,i.profile&&(this.stats={size:0})}function n(e,i,r){e.byteLength=i.byteLength,t.bufferData(e.type,i,r)}function a(t,e,i,r,a,s){var o;if(t.usage=i,Array.isArray(e)){if(t.dtype=r||Qt,e.length>0){var l;if(Array.isArray(e[0])){o=Ht(e);for(var u=1,f=1;f<o.length;++f)u*=o[f];t.dimension=u,n(t,l=qt(e,o,t.dtype),i),s?t.persistentData=l:Nt.freeType(l)}else if("number"==typeof e[0]){t.dimension=a;var h=Nt.allocType(t.dtype,e.length);R(h,e),n(t,h,i),s?t.persistentData=h:Nt.freeType(h)}else ft(e[0])?(t.dimension=e[0].length,t.dtype=r||E(e[0])||Qt,n(t,l=qt(e,[e.length,e[0].length],t.dtype),i),s?t.persistentData=l:Nt.freeType(l)):kt.raise("invalid buffer data")}}else if(ft(e))t.dtype=r||E(e),t.dimension=a,n(t,e,i),s&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(k(e)){o=e.shape;var c=e.stride,p=e.offset,d=0,m=0,g=0,_=0;1===o.length?(d=o[0],m=1,g=c[0],_=0):2===o.length?(d=o[0],m=o[1],g=c[0],_=c[1]):kt.raise("invalid shape"),t.dtype=r||E(e.data)||Qt,t.dimension=m;var v=Nt.allocType(t.dtype,d*m);F(v,e.data,d,m,g,_,p),n(t,v,i),s?t.persistentData=v:Nt.freeType(v)}else kt.raise("invalid buffer data")}function s(i){e.bufferCount--;var r=i.buffer;kt(r,"buffer must not be deleted already"),t.deleteBuffer(r),i.buffer=null,delete l[i.id]}var o=0,l={};r.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},r.prototype.destroy=function(){s(this)};var u=[];return i.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(l).forEach(function(e){t+=l[e].stats.size}),t}),{create:function(n,o,u,f){function h(e){var r=Zt,n=null,s=0,o=0,l=1;return Array.isArray(e)||ft(e)||k(e)?n=e:"number"==typeof e?s=0|e:e&&(kt.type(e,"object","buffer arguments must be an object, a number or an array"),"data"in e&&(kt(null===n||Array.isArray(n)||ft(n)||k(n),"invalid data for buffer"),n=e.data),"usage"in e&&(kt.parameter(e.usage,Ut,"invalid buffer usage"),r=Ut[e.usage]),"type"in e&&(kt.parameter(e.type,Vt,"invalid buffer type"),o=Vt[e.type]),"dimension"in e&&(kt.type(e.dimension,"number","invalid dimension"),l=0|e.dimension),"length"in e&&(kt.nni(s,"buffer length must be a nonnegative integer"),s=0|e.length)),p.bind(),n?a(p,n,r,o,l,f):(t.bufferData(p.type,s,r),p.dtype=o||Wt,p.usage=r,p.dimension=l,p.byteLength=s),i.profile&&(p.stats.size=p.byteLength*$t[p.dtype]),h}function c(e,i){kt(i+e.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+i+" to a buffer of size "+p.byteLength),t.bufferSubData(p.type,i,e)}e.bufferCount++;var p=new r(o);return l[p.id]=p,u||h(n),h._reglType="buffer",h._buffer=p,h.subdata=function(t,e){var i,r=0|(e||0);if(p.bind(),Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var n=Nt.allocType(p.dtype,t.length);R(n,t),c(n,r),Nt.freeType(n)}else if(Array.isArray(t[0])||ft(t[0])){i=Ht(t);var a=qt(t,i,p.dtype);c(a,r),Nt.freeType(a)}else kt.raise("invalid buffer data")}else if(ft(t))c(t,r);else if(k(t)){i=t.shape;var s=t.stride,o=0,l=0,u=0,f=0;1===i.length?(o=i[0],l=1,u=s[0],f=0):2===i.length?(o=i[0],l=i[1],u=s[0],f=s[1]):kt.raise("invalid shape");var d=Array.isArray(t.data)?p.dtype:E(t.data),m=Nt.allocType(d,o*l);F(m,t.data,o,l,u,f,t.offset),c(m,r),Nt.freeType(m)}else kt.raise("invalid data for buffer subdata");return h},i.profile&&(h.stats=p.stats),h.destroy=function(){s(p)},h},createStream:function(t,e){var i=u.pop();return i||(i=new r(t)),i.bind(),a(i,e,Gt,0,1,!1),i},destroyStream:function(t){u.push(t)},clear:function(){Et(l).forEach(s),u.forEach(s)},getBuffer:function(t){return t&&t._buffer instanceof r?t._buffer:null},restore:function(){Et(l).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:a}}(d,y,p),D=function(t,e,i,r){function n(t){this.id=l++,o[this.id]=this,this.buffer=t,this.primType=ee,this.vertCount=0,this.type=0}function a(r,n,a,s,o,l,u){if(r.buffer.bind(),n){var f=u;u||ft(n)&&(!k(n)||ft(n.data))||(f=e.oes_element_index_uint?oe:ae),i._initBuffer(r.buffer,n,a,f,3)}else t.bufferData(le,l,a),r.buffer.dtype=h||re,r.buffer.usage=a,r.buffer.dimension=3,r.buffer.byteLength=l;var h=u;if(!u){switch(r.buffer.dtype){case re:case ie:h=re;break;case ae:case ne:h=ae;break;case oe:case se:h=oe;break;default:kt.raise("unsupported type for element array")}r.buffer.dtype=h}r.type=h,kt(h!==oe||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var c=o;c<0&&(c=r.buffer.byteLength,h===ae?c>>=1:h===oe&&(c>>=2)),r.vertCount=c;var p=s;if(s<0){p=ee;var d=r.buffer.dimension;1===d&&(p=Jt),2===d&&(p=te),3===d&&(p=ee)}r.primType=p}function s(t){r.elementsCount--,kt(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}var o={},l=0,u={uint8:re,uint16:ae};e.oes_element_index_uint&&(u.uint32=oe),n.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(t,e){function o(t){if(t)if("number"==typeof t)l(t),f.primType=ee,f.vertCount=0|t,f.type=re;else{var e=null,i=fe,r=-1,n=-1,s=0,h=0;Array.isArray(t)||ft(t)||k(t)?e=t:(kt.type(t,"object","invalid arguments for elements"),"data"in t&&(e=t.data,kt(Array.isArray(e)||ft(e)||k(e),"invalid data for element buffer")),"usage"in t&&(kt.parameter(t.usage,Ut,"invalid element buffer usage"),i=Ut[t.usage]),"primitive"in t&&(kt.parameter(t.primitive,Kt,"invalid element buffer primitive"),r=Kt[t.primitive]),"count"in t&&(kt("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),n=0|t.count),"type"in t&&(kt.parameter(t.type,u,"invalid buffer type"),h=u[t.type]),"length"in t?s=0|t.length:(s=n,h===ae||h===ne?s*=2:h!==oe&&h!==se||(s*=4))),a(f,e,i,r,n,s,h)}else l(),f.primType=ee,f.vertCount=0,f.type=re;return o}var l=i.create(null,le,!0),f=new n(l._buffer);return r.elementsCount++,o(t),o._reglType="elements",o._elements=f,o.subdata=function(t,e){return l.subdata(t,e),o},o.destroy=function(){s(f)},o},createStream:function(t){var e=f.pop();return e||(e=new n(i.create(null,le,!0,!1)._buffer)),a(e,t,ue,-1,-1,0,0),e},destroyStream:function(t){f.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof n?t._elements:null},clear:function(){Et(o).forEach(s)}}}(d,b,M,y),C=function(t,e,i,r,n){for(var a=i.maxAttributes,s=new Array(a),o=0;o<a;++o)s[o]=new W;return{Record:W,scope:{},state:s}}(0,0,O),j=Q(d,v,y,p),z=Z(d,b,O,function(){B.procs.poll()},A,y,p),L=Fi(d,b,O,y,p),I=function(t,e,i,r,n,a){function s(t,e,i){this.target=t,this.texture=e,this.renderbuffer=i;var r=0,n=0;e?(r=e.width,n=e.height):i&&(r=i.width,n=i.height),this.width=r,this.height=n}function o(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function l(t,e,i){if(t)if(t.texture){var r=t.texture._texture,n=Math.max(1,r.width),a=Math.max(1,r.height);kt(n===e&&a===i,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var s=t.renderbuffer._renderbuffer;kt(s.width===e&&s.height===i,"inconsistent width/height for renderbuffer"),s.refCount+=1}}function u(e,i){i&&(i.texture?t.framebufferTexture2D(ji,e,i.target,i.texture._texture.texture,0):t.framebufferRenderbuffer(ji,e,zi,i.renderbuffer._renderbuffer.renderbuffer))}function f(t){var e=Li,i=null,r=null,n=t;"object"==typeof t&&(n=t.data,"target"in t&&(e=0|t.target)),kt.type(n,"function","invalid attachment data");var a=n._reglType;return"texture2d"===a?(i=n,kt(e===Li)):"textureCube"===a?(i=n,kt(e>=Ii&&e<Ii+6,"invalid cube map target")):"renderbuffer"===a?(r=n,e=zi):kt.raise("invalid regl object for attachment"),new s(e,i,r)}function h(t,e,i,a,o){if(i){var l=r.create2D({width:t,height:e,format:a,type:o});return l._texture.refCount=0,new s(Li,l,null)}var u=n.create({width:t,height:e,format:a});return u._renderbuffer.refCount=0,new s(zi,null,u)}function c(t){return t&&(t.texture||t.renderbuffer)}function p(t,e,i){t&&(t.texture?t.texture.resize(e,i):t.renderbuffer&&t.renderbuffer.resize(e,i))}function d(){this.id=T++,S[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function m(t){t.colorAttachments.forEach(o),o(t.depthAttachment),o(t.stencilAttachment),o(t.depthStencilAttachment)}function g(e){var i=e.framebuffer;kt(i,"must not double destroy framebuffer"),t.deleteFramebuffer(i),e.framebuffer=null,a.framebufferCount--,delete S[e.id]}function _(e){var r;t.bindFramebuffer(ji,e.framebuffer);var n=e.colorAttachments;for(r=0;r<n.length;++r)u(Bi+r,n[r]);for(r=n.length;r<i.maxColorAttachments;++r)t.framebufferTexture2D(ji,Bi+r,Li,null,0);t.framebufferTexture2D(ji,Xi,Li,null,0),t.framebufferTexture2D(ji,Yi,Li,null,0),t.framebufferTexture2D(ji,Ni,Li,null,0),u(Yi,e.depthAttachment),u(Ni,e.stencilAttachment),u(Xi,e.depthStencilAttachment);var a=t.checkFramebufferStatus(ji);a!==Vi&&kt.raise("framebuffer configuration not supported, status = "+Ki[a]),t.bindFramebuffer(ji,y.next),y.cur=y.next,t.getError()}function v(t,r){function n(t,r){var a;kt(y.next!==s,"can not update framebuffer which is currently in use");var o=e.webgl_draw_buffers,u=0,p=0,d=!0,g=!0,v=null,T=!0,S="rgba",k="uint8",P=1,A=null,O=null,M=null,D=!1;if("number"==typeof t)u=0|t,p=0|r||u;else if(t){kt.type(t,"object","invalid arguments for framebuffer");var C=t;if("shape"in C){var E=C.shape;kt(Array.isArray(E)&&E.length>=2,"invalid shape for framebuffer"),u=E[0],p=E[1]}else"radius"in C&&(u=p=C.radius),"width"in C&&(u=C.width),"height"in C&&(p=C.height);("color"in C||"colors"in C)&&(v=C.color||C.colors,Array.isArray(v)&&kt(1===v.length||o,"multiple render targets not supported")),v||("colorCount"in C&&(P=0|C.colorCount,kt(P>0,"invalid color buffer count")),"colorTexture"in C&&(T=!!C.colorTexture,S="rgba4"),"colorType"in C&&(k=C.colorType,T?(kt(e.oes_texture_float||!("float"===k||"float32"===k),"you must enable OES_texture_float in order to use floating point framebuffer objects"),kt(e.oes_texture_half_float||!("half float"===k||"float16"===k),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===k||"float16"===k?(kt(e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),S="rgba16f"):"float"!==k&&"float32"!==k||(kt(e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),S="rgba32f"),kt.oneOf(k,w,"invalid color type")),"colorFormat"in C&&(S=C.colorFormat,b.indexOf(S)>=0?T=!0:x.indexOf(S)>=0?T=!1:T?kt.oneOf(C.colorFormat,b,"invalid color format for texture"):kt.oneOf(C.colorFormat,x,"invalid color format for renderbuffer"))),("depthTexture"in C||"depthStencilTexture"in C)&&(D=!(!C.depthTexture&&!C.depthStencilTexture),kt(!D||e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in C&&("boolean"==typeof C.depth?d=C.depth:(A=C.depth,g=!1)),"stencil"in C&&("boolean"==typeof C.stencil?g=C.stencil:(O=C.stencil,d=!1)),"depthStencil"in C&&("boolean"==typeof C.depthStencil?d=g=C.depthStencil:(M=C.depthStencil,d=!1,g=!1))}else u=p=1;var R=null,F=null,j=null,z=null;if(Array.isArray(v))R=v.map(f);else if(v)R=[f(v)];else for(R=new Array(P),a=0;a<P;++a)R[a]=h(u,p,T,S,k);kt(e.webgl_draw_buffers||R.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),kt(R.length<=i.maxColorAttachments,"too many color attachments, not supported"),u=u||R[0].width,p=p||R[0].height,A?F=f(A):d&&!g&&(F=h(u,p,D,"depth","uint32")),O?j=f(O):g&&!d&&(j=h(u,p,!1,"stencil","uint8")),M?z=f(M):!A&&!O&&g&&d&&(z=h(u,p,D,"depth stencil","depth stencil")),kt(!!A+!!O+!!M<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var L=null;for(a=0;a<R.length;++a)if(l(R[a],u,p),kt(!R[a]||R[a].texture&&qi.indexOf(R[a].texture._texture.format)>=0||R[a].renderbuffer&&$i.indexOf(R[a].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+a+" is invalid"),R[a]&&R[a].texture){var I=Hi[R[a].texture._texture.format]*Zi[R[a].texture._texture.type];null===L?L=I:kt(L===I,"all color attachments much have the same number of bits per pixel.")}return l(F,u,p),kt(!F||F.texture&&F.texture._texture.format===Ui||F.renderbuffer&&F.renderbuffer._renderbuffer.format===Gi,"invalid depth attachment for framebuffer object"),l(j,u,p),kt(!j||j.renderbuffer&&j.renderbuffer._renderbuffer.format===Wi,"invalid stencil attachment for framebuffer object"),l(z,u,p),kt(!z||z.texture&&z.texture._texture.format===Qi||z.renderbuffer&&z.renderbuffer._renderbuffer.format===Qi,"invalid depth-stencil attachment for framebuffer object"),m(s),s.width=u,s.height=p,s.colorAttachments=R,s.depthAttachment=F,s.stencilAttachment=j,s.depthStencilAttachment=z,n.color=R.map(c),n.depth=c(F),n.stencil=c(j),n.depthStencil=c(z),n.width=s.width,n.height=s.height,_(s),n}var s=new d;return a.framebufferCount++,n(t,r),ht(n,{resize:function(t,e){kt(y.next!==s,"can not resize a framebuffer which is currently in use");var i=0|t,r=0|e||i;if(i===s.width&&r===s.height)return n;for(var a=s.colorAttachments,o=0;o<a.length;++o)p(a[o],i,r);return p(s.depthAttachment,i,r),p(s.stencilAttachment,i,r),p(s.depthStencilAttachment,i,r),s.width=n.width=i,s.height=n.height=r,_(s),n},_reglType:"framebuffer",_framebuffer:s,destroy:function(){g(s),m(s)},use:function(t){y.setFBO({framebuffer:n},t)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},b=["rgba"],x=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&x.push("srgba"),e.ext_color_buffer_half_float&&x.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&x.push("rgba32f");var w=["uint8"];e.oes_texture_half_float&&w.push("half float","float16"),e.oes_texture_float&&w.push("float","float32");var T=0,S={};return ht(y,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof d)return e}return null},create:v,createCube:function(t){function n(t){var i;kt(a.indexOf(y.next)<0,"can not update framebuffer which is currently in use");var s=e.webgl_draw_buffers,o={color:null},l=0,u=null,f="rgba",h="uint8",c=1;if("number"==typeof t)l=0|t;else if(t){kt.type(t,"object","invalid arguments for framebuffer");var p=t;if("shape"in p){var d=p.shape;kt(Array.isArray(d)&&d.length>=2,"invalid shape for framebuffer"),kt(d[0]===d[1],"cube framebuffer must be square"),l=d[0]}else"radius"in p&&(l=0|p.radius),"width"in p?(l=0|p.width,"height"in p&&kt(p.height===l,"must be square")):"height"in p&&(l=0|p.height);("color"in p||"colors"in p)&&(u=p.color||p.colors,Array.isArray(u)&&kt(1===u.length||s,"multiple render targets not supported")),u||("colorCount"in p&&(c=0|p.colorCount,kt(c>0,"invalid color buffer count")),"colorType"in p&&(kt.oneOf(p.colorType,w,"invalid color type"),h=p.colorType),"colorFormat"in p&&(f=p.colorFormat,kt.oneOf(p.colorFormat,b,"invalid color format for texture"))),"depth"in p&&(o.depth=p.depth),"stencil"in p&&(o.stencil=p.stencil),"depthStencil"in p&&(o.depthStencil=p.depthStencil)}else l=1;var m;if(u)if(Array.isArray(u))for(m=[],i=0;i<u.length;++i)m[i]=u[i];else m=[u];else{m=Array(c);var g={radius:l,format:f,type:h};for(i=0;i<c;++i)m[i]=r.createCube(g)}for(o.color=Array(m.length),i=0;i<m.length;++i){var _=m[i];kt("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),l=l||_.width,kt(_.width===l&&_.height===l,"invalid cube map shape"),o.color[i]={target:Ii,data:m[i]}}for(i=0;i<6;++i){for(var x=0;x<m.length;++x)o.color[x].target=Ii+i;i>0&&(o.depth=a[0].depth,o.stencil=a[0].stencil,o.depthStencil=a[0].depthStencil),a[i]?a[i](o):a[i]=v(o)}return ht(n,{width:l,height:l,color:m})}var a=Array(6);return n(t),ht(n,{faces:a,resize:function(t){var e,r=0|t;if(kt(r>0&&r<=i.maxCubeMapSize,"invalid radius for cube fbo"),r===n.width)return n;var s=n.color;for(e=0;e<s.length;++e)s[e].resize(r);for(e=0;e<6;++e)a[e].resize(r);return n.width=n.height=r,n},_reglType:"framebufferCube",destroy:function(){a.forEach(function(t){t.destroy()})}})},clear:function(){Et(S).forEach(g)},restore:function(){Et(S).forEach(function(e){e.framebuffer=t.createFramebuffer(),_(e)})}})}(d,b,O,z,L,y),B=st(d,v,b,O,M,D,0,I,{},C,j,{elements:null,primitive:4,count:-1,offset:0,instances:-1},A,x,p),Y=$(d,I,B.procs.poll,A,m,b),N=B.next,X=d.canvas,V=[],U=[],q=[],H=[p.onDestroy],G=null;X&&(X.addEventListener(pa,n,!1),X.addEventListener(da,a,!1));var K=I.setFBO=s({framebuffer:Ot.define.call(null,ma,"framebuffer")});h();var J=ht(s,{clear:function(t){if(kt("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;e<6;++e)K(ht({framebuffer:t.framebuffer.faces[e]},t),o);else K(t,o);else o(0,t)},prop:Ot.define.bind(null,ma),context:Ot.define.bind(null,ga),this:Ot.define.bind(null,_a),draw:s({}),buffer:function(t){return M.create(t,ca,!1,!1)},elements:function(t){return D.create(t,!1)},texture:z.create2D,cube:z.createCube,renderbuffer:L.create,framebuffer:I.create,framebufferCube:I.createCube,attributes:m,frame:l,on:function(t,e){kt.type(e,"function","listener callback must be a function");var i;switch(t){case"frame":return l(e);case"lost":i=U;break;case"restore":i=q;break;case"destroy":i=H;break;default:kt.raise("invalid event, must be one of frame,lost,restore,destroy")}return i.push(e),{cancel:function(){for(var t=0;t<i.length;++t)if(i[t]===e)return i[t]=i[i.length-1],void i.pop()}}},limits:O,hasExtension:function(t){return O.extensions.indexOf(t.toLowerCase())>=0},read:Y,destroy:function(){V.length=0,r(),X&&(X.removeEventListener(pa,n),X.removeEventListener(da,a)),j.clear(),I.clear(),L.clear(),z.clear(),D.clear(),M.clear(),x&&x.clear(),H.forEach(function(t){t()})},_gl:d,_refresh:h,poll:function(){f(),x&&x.update()},now:c,stats:y});return p.onDone(null,J),J}var ut={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ft=function(t){return Object.prototype.toString.call(t)in ut},ht=function(t,e){for(var i=Object.keys(e),r=0;r<i.length;++r)t[i[r]]=e[i[r]];return t},ct=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],pt=33071,dt=9728,mt=9984,gt=9985,_t=9986,vt=9987,yt=5126,bt=32819,xt=32820,wt=33635,Tt=34042,St={};St[5120]=St[5121]=1,St[5122]=St[5123]=St[36193]=St[wt]=St[bt]=St[xt]=2,St[5124]=St[5125]=St[yt]=St[Tt]=4;var kt=ht(i,{optional:function(t){t()},raise:e,commandRaise:d,command:function(t,e,i){t||d(e,i||u())},parameter:function(t,i,n){t in i||e("unknown parameter ("+t+")"+r(n)+". possible values: "+Object.keys(i).join())},commandParameter:function(t,e,i,n){t in e||d("unknown parameter ("+t+")"+r(i)+". possible values: "+Object.keys(e).join(),n||u())},constructor:function(t){Object.keys(t).forEach(function(t){ct.indexOf(t)<0&&e('invalid regl constructor argument "'+t+'". must be one of '+ct)})},type:function(t,i,n){typeof t!==i&&e("invalid parameter type"+r(n)+". expected "+i+", got "+typeof t)},commandType:m,isTypedArray:function(t,i){ft(t)||e("invalid parameter type"+r(i)+". must be a typed array")},nni:function(t,i){t>=0&&(0|t)===t||e("invalid parameter type, ("+t+")"+r(i)+". must be a nonnegative integer")},oneOf:n,shaderError:c,linkError:function(t,e,r,n,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),o=h(r,a),l='Error linking program with vertex shader, "'+h(n,a)[0].name+'", and fragment shader "'+o[0].name+'"';"undefined"!=typeof document?console.log("%c"+l+"\n%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+"\n"+s),i.raise(l)}},callSite:f,saveCommandRef:p,saveDrawInfo:function(t,e,i,r){function n(t){return t?r.id(t):0}function a(t,e){Object.keys(e).forEach(function(e){t[r.id(e)]=!0})}p(t),t._fragId=n(t.static.frag),t._vertId=n(t.static.vert);var s=t._uniformSet={};a(s,e.static),a(s,e.dynamic);var o=t._attributeSet={};a(o,i.static),a(o,i.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,i){t.texture?n(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):n(t.renderbuffer._renderbuffer.format,i,"unsupported renderbuffer format for attachment")},guessCommand:u,texture2D:function(t,e,r){var n,a=e.width,s=e.height,o=e.channels;i(a>0&&a<=r.maxTextureSize&&s>0&&s<=r.maxTextureSize,"invalid texture shape"),t.wrapS===pt&&t.wrapT===pt||i(_(a)&&_(s),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==a&&1!==s&&i(t.minFilter!==mt&&t.minFilter!==_t&&t.minFilter!==gt&&t.minFilter!==vt,"min filter requires mipmap"):(i(_(a)&&_(s),"texture must be a square power of 2 to support mipmapping"),i(e.mipmask===(a<<1)-1,"missing or incomplete mipmap data")),e.type===yt&&(r.extensions.indexOf("oes_texture_float_linear")<0&&i(t.minFilter===dt&&t.magFilter===dt,"filter not supported, must enable oes_texture_float_linear"),i(!t.genMipmaps,"mipmap generation not supported with float textures"));var l=e.images;for(n=0;n<16;++n)if(l[n]){var u=a>>n,f=s>>n;i(e.mipmask&1<<n,"missing mipmap data");var h=l[n];if(i(h.width===u&&h.height===f,"invalid shape for mip images"),i(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed);else if(h.data){var c=Math.ceil(g(h.type,o)*u/h.unpackAlignment)*h.unpackAlignment;i(h.data.byteLength===c*f,"invalid data for image, buffer size is inconsistent with image format")}else h.element||h.copy}else t.genMipmaps||i(0==(e.mipmask&1<<n),"extra mipmap data");e.compressed&&i(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,r,n){var a=t.width,s=t.height,o=t.channels;i(a>0&&a<=n.maxTextureSize&&s>0&&s<=n.maxTextureSize,"invalid texture shape"),i(a===s,"cube map must be square"),i(e.wrapS===pt&&e.wrapT===pt,"wrap mode not supported by cube map");for(var l=0;l<r.length;++l){var u=r[l];i(u.width===a&&u.height===s,"inconsistent cube map face shape"),e.genMipmaps&&(i(!u.compressed,"can not generate mipmap for compressed textures"),i(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=u.images,h=0;h<16;++h){var c=f[h];if(c){var p=a>>h,d=s>>h;i(u.mipmask&1<<h,"missing mipmap data"),i(c.width===p&&c.height===d,"invalid shape for mip images"),i(c.format===t.format&&c.internalformat===t.internalformat&&c.type===t.type,"incompatible type for mip image"),c.compressed||(c.data?i(c.data.byteLength===p*d*Math.max(g(c.type,o),c.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):c.element||c.copy)}}}}}),Pt=0,At=0,Ot={DynamicVariable:v,define:function(t,e){return new v(t,x(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof v},unbox:function(t,e){return"function"==typeof t?new v(At,t):t},accessor:x},Mt={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},Dt="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Ct=function(t,e){var i=1;e.ext_texture_filter_anisotropic&&(i=t.getParameter(34047));var r=1,n=1;return e.webgl_draw_buffers&&(r=t.getParameter(34852),n=t.getParameter(36063)),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:i,maxDrawbuffers:r,maxColorAttachments:n,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938)}},Et=function(t){return Object.keys(t).map(function(e){return t[e]})},Rt=5120,Ft=5121,jt=5122,zt=5123,Lt=5124,It=5125,Bt=5126,Yt=P(8,function(){return[]}),Nt={alloc:O,free:M,allocType:function(t,e){var i=null;switch(t){case Rt:i=new Int8Array(O(e),0,e);break;case Ft:i=new Uint8Array(O(e),0,e);break;case jt:i=new Int16Array(O(2*e),0,e);break;case zt:i=new Uint16Array(O(2*e),0,e);break;case Lt:i=new Int32Array(O(4*e),0,e);break;case It:i=new Uint32Array(O(4*e),0,e);break;case Bt:i=new Float32Array(O(4*e),0,e);break;default:return null}return i.length!==e?i.subarray(0,e):i},freeType:function(t){M(t.buffer)}},Xt={shape:function(t){for(var e=[],i=t;i.length;i=i[0])e.push(i.length);return e},flatten:function(t,e,i,r){var n=1;if(e.length)for(var a=0;a<e.length;++a)n*=e[a];else n=0;var s=r||Nt.allocType(i,n);switch(e.length){case 0:break;case 1:!function(t,e,i){for(var r=0;r<e;++r)i[r]=t[r]}(t,e[0],s);break;case 2:!function(t,e,i,r){for(var n=0,a=0;a<e;++a)for(var s=t[a],o=0;o<i;++o)r[n++]=s[o]}(t,e[0],e[1],s);break;case 3:D(t,e[0],e[1],e[2],s,0);break;default:C(t,e,0,s,0)}return s}},Vt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ut={dynamic:35048,stream:35040,static:35044},qt=Xt.flatten,Ht=Xt.shape,Zt=35044,Gt=35040,Wt=5121,Qt=5126,$t=[];$t[5120]=1,$t[5122]=2,$t[5124]=4,$t[5121]=1,$t[5123]=2,$t[5125]=4,$t[5126]=4;var Kt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Jt=0,te=1,ee=4,ie=5120,re=5121,ne=5122,ae=5123,se=5124,oe=5125,le=34963,ue=35040,fe=35044,he=new Float32Array(1),ce=new Uint32Array(he.buffer),pe=5123,de=34467,me=3553,ge=34067,_e=34069,ve=6408,ye=6406,be=6407,xe=6409,we=6410,Te=32854,Se=32855,ke=36194,Pe=32819,Ae=32820,Oe=33635,Me=34042,De=6402,Ce=34041,Ee=35904,Re=35906,Fe=36193,je=33776,ze=33777,Le=33778,Ie=33779,Be=35986,Ye=35987,Ne=34798,Xe=35840,Ve=35841,Ue=35842,qe=35843,He=36196,Ze=5121,Ge=5123,We=5125,Qe=5126,$e=10242,Ke=10243,Je=10497,ti=33071,ei=33648,ii=10240,ri=10241,ni=9728,ai=9729,si=9984,oi=9985,li=9986,ui=9987,fi=33170,hi=4352,ci=4353,pi=4354,di=34046,mi=3317,gi=37440,_i=37441,vi=37443,yi=37444,bi=33984,xi=[si,li,oi,ui],wi=[0,xe,we,be,ve],Ti={};Ti[xe]=Ti[ye]=Ti[De]=1,Ti[Ce]=Ti[we]=2,Ti[be]=Ti[Ee]=3,Ti[ve]=Ti[Re]=4;var Si=L("HTMLCanvasElement"),ki=L("CanvasRenderingContext2D"),Pi=L("HTMLImageElement"),Ai=L("HTMLVideoElement"),Oi=Object.keys(ut).concat([Si,ki,Pi,Ai]),Mi=[];Mi[Ze]=1,Mi[Qe]=4,Mi[Fe]=2,Mi[Ge]=2,Mi[We]=4;var Di=[];Di[Te]=2,Di[Se]=2,Di[ke]=2,Di[Ce]=4,Di[je]=.5,Di[ze]=.5,Di[Le]=1,Di[Ie]=1,Di[Be]=.5,Di[Ye]=1,Di[Ne]=1,Di[Xe]=.5,Di[Ve]=.25,Di[Ue]=.5,Di[qe]=.25,Di[He]=.5;var Ci=36161,Ei=32854,Ri=[];Ri[Ei]=2,Ri[32855]=2,Ri[36194]=2,Ri[33189]=2,Ri[36168]=1,Ri[34041]=4,Ri[35907]=4,Ri[34836]=16,Ri[34842]=8,Ri[34843]=6;var Fi=function(t,e,i,r,n){function a(t){this.id=u++,this.refCount=1,this.renderbuffer=t,this.format=Ei,this.width=0,this.height=0,n.profile&&(this.stats={size:0})}function s(e){var i=e.renderbuffer;kt(i,"must not double destroy renderbuffer"),t.bindRenderbuffer(Ci,null),t.deleteRenderbuffer(i),e.renderbuffer=null,e.refCount=0,delete f[e.id],r.renderbufferCount--}var o={rgba4:Ei,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(o.srgba=35907),e.ext_color_buffer_half_float&&(o.rgba16f=34842,o.rgb16f=34843),e.webgl_color_buffer_float&&(o.rgba32f=34836);var l=[];Object.keys(o).forEach(function(t){var e=o[t];l[e]=t});var u=0,f={};return a.prototype.decRef=function(){--this.refCount<=0&&s(this)},n.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(f).forEach(function(e){t+=f[e].stats.size}),t}),{create:function(e,s){function u(e,r){var a=0,s=0,f=Ei;if("object"==typeof e&&e){var c=e;if("shape"in c){var p=c.shape;kt(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),a=0|p[0],s=0|p[1]}else"radius"in c&&(a=s=0|c.radius),"width"in c&&(a=0|c.width),"height"in c&&(s=0|c.height);"format"in c&&(kt.parameter(c.format,o,"invalid renderbuffer format"),f=o[c.format])}else"number"==typeof e?(a=0|e,s="number"==typeof r?0|r:a):e?kt.raise("invalid arguments to renderbuffer constructor"):a=s=1;if(kt(a>0&&s>0&&a<=i.maxRenderbufferSize&&s<=i.maxRenderbufferSize,"invalid renderbuffer size"),a!==h.width||s!==h.height||f!==h.format)return u.width=h.width=a,u.height=h.height=s,h.format=f,t.bindRenderbuffer(Ci,h.renderbuffer),t.renderbufferStorage(Ci,f,a,s),n.profile&&(h.stats.size=G(h.format,h.width,h.height)),u.format=l[h.format],u}var h=new a(t.createRenderbuffer());return f[h.id]=h,r.renderbufferCount++,u(e,s),u.resize=function(e,r){var a=0|e,s=0|r||a;return a===h.width&&s===h.height?u:(kt(a>0&&s>0&&a<=i.maxRenderbufferSize&&s<=i.maxRenderbufferSize,"invalid renderbuffer size"),u.width=h.width=a,u.height=h.height=s,t.bindRenderbuffer(Ci,h.renderbuffer),t.renderbufferStorage(Ci,h.format,a,s),n.profile&&(h.stats.size=G(h.format,h.width,h.height)),u)},u._reglType="renderbuffer",u._renderbuffer=h,n.profile&&(u.stats=h.stats),u.destroy=function(){h.decRef()},u},clear:function(){Et(f).forEach(s)},restore:function(){Et(f).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(Ci,e.renderbuffer),t.renderbufferStorage(Ci,e.format,e.width,e.height)}),t.bindRenderbuffer(Ci,null)}}},ji=36160,zi=36161,Li=3553,Ii=34069,Bi=36064,Yi=36096,Ni=36128,Xi=33306,Vi=36053,Ui=6402,qi=[6408],Hi=[];Hi[6408]=4;var Zi=[];Zi[5121]=1,Zi[5126]=4,Zi[36193]=2;var Gi=33189,Wi=36168,Qi=34041,$i=[32854,32855,36194,35907,34842,34843,34836],Ki={};Ki[Vi]="complete",Ki[36054]="incomplete attachment",Ki[36057]="incomplete dimensions",Ki[36055]="incomplete, missing attachment",Ki[36061]="unsupported";var Ji=5126,tr=35632,er=35633,ir=35718,rr=35721,nr=6408,ar=5121,sr=3333,or=5126,lr="xyzw".split(""),ur=5121,fr=1,hr=2,cr=0,pr=1,dr=2,mr=3,gr=4,_r="dither",vr="blend.enable",yr="blend.color",br="blend.equation",xr="blend.func",wr="depth.enable",Tr="depth.func",Sr="depth.range",kr="depth.mask",Pr="colorMask",Ar="cull.enable",Or="cull.face",Mr="frontFace",Dr="lineWidth",Cr="polygonOffset.enable",Er="polygonOffset.offset",Rr="sample.alpha",Fr="sample.enable",jr="sample.coverage",zr="stencil.enable",Lr="stencil.mask",Ir="stencil.func",Br="stencil.opFront",Yr="stencil.opBack",Nr="scissor.enable",Xr="scissor.box",Vr="viewport",Ur="profile",qr="framebuffer",Hr="vert",Zr="frag",Gr="elements",Wr="primitive",Qr="count",$r="offset",Kr="instances",Jr=qr+"Width",tn=qr+"Height",en=Vr+"Width",rn=Vr+"Height",nn="drawingBufferWidth",an="drawingBufferHeight",sn=[xr,br,Ir,Br,Yr,jr,Vr,Xr,Er],on=34962,ln=34963,un=3553,fn=34067,hn=2884,cn=3042,pn=3024,dn=2960,mn=2929,gn=3089,_n=32823,vn=32926,yn=32928,bn=5126,xn=35664,wn=35665,Tn=35666,Sn=5124,kn=35667,Pn=35668,An=35669,On=35670,Mn=35671,Dn=35672,Cn=35673,En=35674,Rn=35675,Fn=35676,jn=35678,zn=35680,Ln=4,In=1028,Bn=1029,Yn=2304,Nn=2305,Xn=32775,Vn=32776,Un=519,qn=7680,Hn=0,Zn=1,Gn=32774,Wn=513,Qn=36160,$n=36064,Kn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jn=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ta={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ea={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ia={frag:35632,vert:35633},ra={cw:Yn,ccw:Nn},na=new it(!1,!1,!1,function(){}),aa=34918,sa=34919,oa=35007,la=function(t,e){function i(t){o.push(t)}function r(t){var e=o.pop()||s.createQueryEXT();s.beginQueryEXT(oa,e),l.push(e),a(l.length-1,l.length,t)}function n(t){u.push(t)}function a(t,e,i){var r=u.pop()||new function(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null};r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=i,f.push(r)}var s=e.ext_disjoint_timer_query;if(!s)return null;var o=[],l=[],u=[],f=[],h=[],c=[];return{beginQuery:r,endQuery:function(){s.endQueryEXT(oa)},pushScopeStats:a,update:function(){var t,e,r=l.length;if(0!==r){c.length=Math.max(c.length,r+1),h.length=Math.max(h.length,r+1),h[0]=0,c[0]=0;var a=0;for(t=0,e=0;e<l.length;++e){var o=l[e];s.getQueryObjectEXT(o,sa)?(a+=s.getQueryObjectEXT(o,aa),i(o)):l[t++]=o,h[e+1]=a,c[e+1]=t}for(l.length=t,t=0,e=0;e<f.length;++e){var u=f[e],p=u.startQueryIndex,d=u.endQueryIndex;u.sum+=h[d]-h[p];var m=c[p],g=c[d];g===m?(u.stats.gpuTime+=u.sum/1e6,n(u)):(u.startQueryIndex=m,u.endQueryIndex=g,f[t++]=u)}f.length=t}},getNumPendingQueries:function(){return l.length},clear:function(){o.push.apply(o,l);for(var t=0;t<o.length;t++)s.deleteQueryEXT(o[t]);l.length=0,o.length=0},restore:function(){l.length=0,o.length=0}}},ua=16384,fa=256,ha=1024,ca=34962,pa="webglcontextlost",da="webglcontextrestored",ma=1,ga=2,_a=3;return lt})},{}],61:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const r=function(){let t,e,i={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in i)if(t in document){e=i[t];break}return function(i){return i&&document.addEventListener(e,i),!document[t]}}();class n{constructor(t){this.loop=t,this._isPause=!1,this._isFocus=!0,this._shouldFixDeltaTime=!1,this.frameCount=0,this.runTime=0,r(function(){r()?(this._shouldFixDeltaTime=!0,this._isFocus=!0):this._isFocus=!1}.bind(this)),this.start()}start(){this._isFocus&&(this._isPause=!1,this.lastTime=n.now(),requestAnimationFrame(function t(...e){const i=n.now();let r;this._shouldFixDeltaTime?(r=n.fixedDeltaTime,this._shouldFixDeltaTime=!1):r=i-this.lastTime,this.lastTime=i,this.runTime+=r,this._isPause||(this.loop(r,...e),this.frameCount++,requestAnimationFrame(t.bind(this)))}.bind(this)))}pause(){this._isPause=!0}}n.fixedDeltaTime=20,n.now=window.performance.now?()=>performance.now()+performance.timing.navigationStart:()=>Date.now(),i.default=n},{}],62:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var n=r(t("gl-vec3")),a=r(t("gl-mat4")),s=t("./util"),o=(r(t("./Vector2")),r(t("./Mesh"))),l=r(t("./PlaneBufferGeometry"));class u extends o.default{constructor({rayCaster:t,globalScope:e,pointer:i,endProperty:r,endValue:n,error:a=.1,onDragging:o=s.noop,onDragReach:l=s.noop,onDragFail:f=s.noop},...h){super(...h),this.rayCaster=t,this.globalScope=e,this.pointer=i,this.onDragging=o,this.onDragReach=l,this.onDragFail=f,this.start={},this.end={property:r,value:n},this.error=a,this._initVertGroup(),this.YZPlane=this.getPlane(u.DRAG_PLANE.YZ),this.XZPlane=this.getPlane(u.DRAG_PLANE.XZ),this.children.push(this.YZPlane),this.children.push(this.XZPlane),this._draggable(this.globalScope)}_initVertGroup(){this.bottomVerts=this._getVertGroup(1,t=>Math.abs(t[1]+1)<u.vertexCompareError,t=>{this._bottomY=t[1],this.start.bottomY=t[1]}),this.upVerts=this._getVertGroup(1,t=>Math.abs(t[1]-1)<u.vertexCompareError,t=>{this._upY=t[1],this.start.upY=t[1]}),this.frontVerts=this._getVertGroup(2,t=>Math.abs(t[2]-1)<u.vertexCompareError,t=>{this._frontZ=t[2],this.start.frontZ=t[2]}),this.backVerts=this._getVertGroup(2,t=>Math.abs(t[2]+1)<u.vertexCompareError,t=>{this._backZ=t[2],this.start.backZ=t[2]})}_getVertGroup(t,e,i){const r=this.normals.findIndex(e),n=this.positions[r];return i(n),this.positions.filter(e=>Math.abs(e[t]-n[t])<u.vertexCompareError)}get bottomY(){return this._bottomY}set bottomY(t){this.bottomVerts.forEach(e=>{e[1]=t}),this._bottomY=t}get upY(){return this._upY}set upY(t){this.upVerts.forEach(e=>{e[1]=t}),this._upY=t}get frontZ(){return this._frontZ}set frontZ(t){this.frontVerts.forEach(e=>{e[2]=t}),this._frontZ=t}get backZ(){return this._backZ}set backZ(t){this.backVerts.forEach(e=>{e[2]=t}),this._backZ=t}getPlane(t=u.DRAG_PLANE.XY){let e=new l.default({width:10,height:10}),i=new o.default(this.regl,{positions:e.vertices,normals:e.normals,cells:e.indices,center:this.geometryCenter});switch(i.alpha=.4,i.visible=!1,t){case u.DRAG_PLANE.XZ:a.default.rotateX(i.matrix,i.matrix,Math.PI/2);break;case u.DRAG_PLANE.YZ:a.default.rotateY(i.matrix,i.matrix,Math.PI/2)}return i}_draggable(t){let e,i;let r,a=0;this.pointer.addDownListener(r=>{this.enableDrag&&(this.rayCaster.setFromOrthographicCamera(r,{projectionMatrix:t.projectionMatrix,viewMatrix:t.viewMatrix}),this.rayCaster.intersectMesh(this)&&(e=this.rayCaster.intersectMesh(this.XZPlane),i=this.rayCaster.intersectMesh(this.YZPlane),a=3,this.dragStartBottomY=this._bottomY,this.dragStartUpY=this._upY,this.dragStartBackZ=this._backZ,this.dragStartFrontZ=this._frontZ,this.disableHighlight()))}),this.pointer.addUpListener(()=>{this.enableDrag&&(i&&(r?(this.disableHighlight(),this.enableDrag=!1,TweenMax.to(this,4*Math.abs(this[this.end.property]-this.end.value),{[this.end.property]:this.end.value}).eventCallback("onComplete",this.onDragReach)):(this.enableDrag=!1,this.sameAsStart()||this.onDragFail(),TweenMax.to(this,.2,Object.assign({},this.start)).eventCallback("onComplete",()=>{this.enableDrag=!0,this.startHighlight()}))),i=void 0,a=0)});let s,o,l;this.pointer.addMoveListener(u=>{if(!e||!i||!this.enableDrag)return;if(a>0)return void a--;this.rayCaster.setFromOrthographicCamera(u,{projectionMatrix:t.projectionMatrix,viewMatrix:t.viewMatrix});let f=this.rayCaster.intersectMesh(this.XZPlane),h=this.rayCaster.intersectMesh(this.YZPlane);if(!f||!h)return;if(l=n.default.subtract([],f,e),o=n.default.subtract([],h,i),0===a){const t=n.default.normalize([],l),e=n.default.normalize([],o);s=[t[0],e[1],e[2]],a--}const c=this.getDragAxis(s);r=this.drag(c,l,o),this.onDragging()}),this.enableDrag=!0,this.highlightTween=new TweenMax(this,2,{highlight:2,ease:Linear.easeNone,repeat:-1,yoyo:!0})}sameAsStart(){const t=Object.keys(this.start);for(const e of t)if("number"==typeof this.start[e]&&Math.abs(this[e]-this.start[e])>u.vertexCompareError)return!1;return!0}drag(t,e,i){console.log("drag axis: ",t);let r;return 0==t?r=e[0]:1===t?(r=i[1],this.dragY(r)):2===t&&(r=e[2],this.dragZ(r)),Math.abs(this[this.end.property]-this.end.value)<=this.error}dragY(t){const e=this.dragStartBottomY+t,i=this.dragStartUpY+t;e>this.start.bottomY?(this.bottomY=this.start.bottomY,this.upY=i):i<this.start.upY&&(this.upY=this.start.upY,this.bottomY=e)}dragZ(t){const e=this.dragStartBackZ+t,i=this.dragStartFrontZ+t;e>this.start.backZ?(this.backZ=this.start.backZ,this.frontZ=i):i<this.start.frontZ&&(this.frontZ=this.start.frontZ,this.backZ=e)}getAxis(){return[[1,0,0],[0,1,0],[0,0,1]]}getDragAxis(t){let e,i=0;return this.getAxis().map(e=>n.default.dot(t,e)).forEach((t,r)=>{const n=Math.abs(t);n>i&&(i=n,e=r)}),e}startHighlight(){this.highlightTween.play(),this.enableHighlight=!0}disableHighlight(){this.highlightTween.pause(),this.enableHighlight=!1}}u.DRAG_PLANE={XY:Symbol(),XZ:Symbol(),YZ:Symbol()},u.vertexCompareError=.01,i.default=u},{"./Mesh":63,"./PlaneBufferGeometry":66,"./Vector2":70,"./util":74,"gl-mat4":10,"gl-vec3":36}],63:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var n=r(t("gl-vec3")),a=r(t("gl-mat4"));class s{constructor(t,{positions:e,cells:i,normals:r,matrix:s=a.default.identity([]),name:o="",min:l=[0,0,0],max:u=[0,0,0],center:f=[0,0,0]}){this.regl=t,this.center=f,this.geometryCenter=n.default.scale([],n.default.add([],u,l),.5),this.positions=e,this.elements=i,this.normals=r,this.name=o,this.matrix=a.default.translate([],s,f),this.highlight=1,this.enableHighlight=!1,this.visible=!0,this.alpha=1,this.children=[];let h=this;this.draw=t({blend:{enable:!0,func:{src:"src alpha",dst:"one minus src alpha"}},attributes:{position:()=>h.positions,normal:h.normals},elements:()=>h.elements,uniforms:{model:()=>h.matrix,inverseTransposeModel:({viewportWidth:t,viewportHeight:e})=>a.default.transpose([],a.default.invert([],h.matrix)),uHighlight:()=>h.enableHighlight?h.highlight:1,uAlpha:()=>h.alpha}})}}i.default=s},{"gl-mat4":10,"gl-vec3":36}],64:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var n=r(t("gl-mat4")),a=r(t("./ObjLoader"));class s{consstructor(){}static loadObj(t){return fetch(t).then(t=>{if(!t.ok)throw Error(t.statusText);return t.text()}).then(t=>{return a.default.parseObjText(t).map(t=>{const e={positions:[],normals:[],cells:[],matrix:n.default.identity([]),name:t.name};let i=1/0,r=1/0,a=1/0,s=-1/0,o=-1/0,l=-1/0;const{vert:u,norm:f,index:h}=t;for(let t=0;t<u.length;t+=3){const[n,f,h]=[u[t],u[t+1],u[t+2]];e.positions.push([n,f,h]),n<i&&(i=n),f<r&&(r=f),h<a&&(a=h),n>s&&(s=n),f>o&&(o=f),h>l&&(l=h)}e.min=[i,r,a],e.max=[s,o,l];for(let t=0;t<f.length;t+=3)e.normals.push([f[t],f[t+1],f[t+2]]);for(let t=0;t<h.length;t+=3)e.cells.push([h[t],h[t+1],h[t+2]]);return e})},t=>{alert("Model loading failed!"),console.error(t)})}}i.default=s},{"./ObjLoader":65,"gl-mat4":10}],65:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class r{static parseFromDom(t,e){return r.parseObjText(document.getElementById(t).innerHTML,e)}static parseObjText(t,e){function i(t,e,i=[],r,n=""){b.push({vert:t,norm:e,uv:i,index:r,name:n})}let r,n,a,s,o=!1,l=[],u=[],f=[],h=[],c="",p=[],d=[],m=[],g=[],_=0,v=0,y=(t=t.trim().concat("\n")).indexOf("\n",0),b=[];for(;y>v;){switch((r=t.substring(v,y).trim()).charAt(0)){case"o":(n=r.split(" ")).shift(),p.length>0&&(i(p,d,m,g,c),l=[],_=0,p=[],d=[],m=[],g=[]),c=n[0];break;case"v":switch((n=r.split(" ")).shift(),r.charAt(1)){case" ":u.push(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]));break;case"t":h.push(parseFloat(n[0]),parseFloat(n[1]));break;case"n":f.push(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]))}break;case"f":(n=r.split(" ")).shift(),o=!1;for(let t=0;t<n.length;t++)3!=t||o||(t=2,o=!0),n[t]in l?g.push(l[n[t]]):(a=n[t].split("/"),s=3*(parseInt(a[0])-1),p.push(u[s],u[s+1],u[s+2]),s=3*(parseInt(a[2])-1),d.push(f[s],f[s+1],f[s+2]),""!=a[1]&&(s=2*(parseInt(a[1])-1),fUv.push(h[s],e?1-h[s+1]:h[s+1])),l[n[t]]=_,g.push(_),_++),3==t&&o&&g.push(l[n[0]])}v=y+1,(y=t.indexOf("\n",v))===t.length-1&&i(p,d,m,g,c)}return b}}i.default=r},{}],66:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function({width:t=1,height:e=1,widthSegments:i=1,heightSegments:r=1}={}){this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};var n,a,s=t/2,o=e/2,l=Math.floor(i)||1,u=Math.floor(r)||1,f=l+1,h=u+1,c=t/l,p=e/u;for(this.indices=[],this.vertices=[],this.normals=[],this.uvs=[],a=0;a<h;a++){var d=a*p-o;for(n=0;n<f;n++){var m=n*c-s;this.vertices.push([m,-d,0]),this.normals.push([0,0,1]),this.uvs.push([n/l,1-a/u])}}for(a=0;a<u;a++)for(n=0;n<l;n++){var g=n+f*a,_=n+f*(a+1),v=n+1+f*(a+1),y=n+1+f*a;this.indices.push([g,_,y]),this.indices.push([_,v,y])}}},{}],67:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(t("./Vector2")),n=t("./util");class a{constructor(t,{scaleMin:e=.01,scaleMax:i=10,pressureMax:n=1,pressureDuration:s=1e3}={}){if(a.instance)return a.instance;this.dom=t,this.opt={scaleMin:e,scaleMax:i,pressureMax:n,pressureDuration:s},this.pressCheckInterval=20,this.deltaPressure=this.opt.pressureMax/this.opt.pressureDuration*this.pressCheckInterval,this.position=new r.default,this.zoomSpeed=1,this.scale=1,this.dollyStart=new r.default,this.dollyEnd=new r.default,this.dollyDelta=new r.default,this.addMoveListener(this.onMove.bind(this)),this.addDownListener(this.onDown.bind(this)),this.addUpListener(this.onUp.bind(this)),this.dom.addEventListener("touchstart",this._onTouchZoomStart,!1),this.addZoomListener(this.onZoom.bind(this)),this.isPressing=!1,this.pressure=0,a.instance=this}get zoomScale(){return Math.pow(.95,this.zoomSpeed)}setScale(t){this.scale=(0,n.clamp)(t,this.opt.scaleMin,this.opt.scaleMax)}updatePosition(t,e){let i=Math.min(this.dom.clientWidth,this.dom.clientHeight),{x:r,y:n}=this.position;this.position.x=(2*t-this.dom.clientWidth)/i,this.position.y=(2*(this.dom.clientHeight-e)-this.dom.clientHeight)/i,this.dx=this.position.x-r,this.dy=this.position.y-n}onMove(t){let e,i;t.touches?(e=t.touches[0].clientX,i=t.touches[0].clientY):(e=t.clientX,i=t.clientY),this.updatePosition(e,i)}addMoveListener(t){["mousemove","touchmove"].forEach(e=>{this.dom.addEventListener(e,t,!1)})}setPressure(t){let e=t<=this.opt.pressureMax&&t>=0;return this.pressure=(0,n.clamp)(t,0,this.opt.pressureMax),e}onDown(t){if(t instanceof MouseEvent&&t.button!==a.BUTTON.MOUSE_LEFT)return;if(this.isPressing=!0,t.touches){let e=t.touches[0].clientX,i=t.touches[0].clientY;this.updatePosition(e,i)}let e=setInterval(()=>{this.isPressing&&this.setPressure(this.pressure+this.deltaPressure)||clearInterval(e)},this.pressCheckInterval),i=setInterval(()=>{if(this.isPressing){var t=new CustomEvent("Pointer.pressing",{detail:this.pressure});this.dom.dispatchEvent(t)}else clearInterval(i)},this.pressCheckInterval)}addDownListener(t){["mousedown","touchstart"].forEach(e=>{this.dom.addEventListener(e,t,!1)})}addPressingListener(t){["Pointer.pressing","Pointer.postpressing"].forEach(e=>{this.dom.addEventListener(e,t,!1)})}addPressingEndListener(t){this.dom.addEventListener("Pointer.pressingEnd",t,!1)}onUp(t){if(t instanceof MouseEvent&&t.button!==a.BUTTON.MOUSE_LEFT)return;this.isPressing=!1;let e=setInterval(()=>{if(this.isPressing||!this.setPressure(this.pressure-this.deltaPressure)){t=new CustomEvent("Pointer.pressingEnd",{detail:this.pressure});this.dom.dispatchEvent(t),clearInterval(e)}else{var t=new CustomEvent("Pointer.postpressing",{detail:this.pressure});this.dom.dispatchEvent(t)}},this.pressCheckInterval)}addUpListener(t){["mouseup","touchend"].forEach(e=>{this.dom.addEventListener(e,t,!1)})}_onTouchZoomStart(t){if(2!==t.touches.length)return;let e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;this.dollyStart.set(0,Math.sqrt(e*e+i*i))}_onTouchZoom(t){var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;this.dollyEnd.set(0,Math.sqrt(e*e+i*i)),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),dollyDelta.y>0?this.zoomOut():dollyDelta.y<0&&this.zoomIn(),this.dollyStart.copy(this.dollyEnd)}_onWheelZoom(t){t.deltaY>0?this.zoomOut():t.deltaY<0&&this.zoomIn(),t.preventDefault()}onZoom(t){t.touches?this._onTouchZoom(t):this._onWheelZoom(t)}addZoomListener(t){["wheel","touchmove"].forEach(e=>{"touchmove"===e&&(t=(e=>2===e.touches.length?t(e):void 0)),this.dom.addEventListener(e,t,!1)})}zoomIn(t=this.zoomScale){this.setScale(this.scale*t)}zoomOut(t=this.zoomScale){this.setScale(this.scale/t)}}a.instance=null,a.BUTTON={MOUSE_LEFT:0,MOUSE_MIDDLE:1,MOUSE_RIGHT:2},i.default=a},{"./Vector2":70,"./util":74}],68:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var n=r(t("gl-vec3")),a=r(t("gl-mat4")),s=t("./util");class o{constructor(t,e,i){this.gl=t,this.near=e||0,this.far=i||1/0}sortVerticesCounterClockwise(t,e){return e=e||[0,0,0],t.sort(function(t,i){var r=Math.atan2(t[2]-e[2],t[0]-e[0]),n=Math.atan2(i[2]-e[2],i[0]-e[0]);return r>n?1:r<n?-1:0})}intersectMesh(t){for(let e=0;e<t.elements.length;e++){const i=t.elements[e],r=this.sortVerticesCounterClockwise([n.default.transformMat4([],t.positions[i[0]],t.matrix),n.default.transformMat4([],t.positions[i[1]],t.matrix),n.default.transformMat4([],t.positions[i[2]],t.matrix)]),a=this.intersectTriangle(r);if(null!==a&&a>=this.near&&a<=this.far)return n.default.add([],this.rayOrigin,n.default.scale([],this.rayDir,a))}return null}intersectTriangle(t,e=[]){let i=[0,0,0],r=[0,0,0],a=[0,0,0],s=[0,0,0],o=[0,0,0];n.default.subtract(i,t[1],t[0]),n.default.subtract(r,t[2],t[0]),n.default.cross(s,this.rayDir,r);let l=n.default.dot(i,s);if(l>0?n.default.subtract(a,this.rayOrigin,t[0]):(n.default.subtract(a,t[0],this.rayOrigin),l*=-1),l<1e-6&&l>-1e-6)return null;const u=n.default.dot(a,s);if(u<0||u>l)return null;n.default.cross(o,a,i);const f=n.default.dot(this.rayDir,o);if(f<0||u+f>l)return null;let h=n.default.dot(r,o)/l;return h>1e-6&&(e[0]=this.rayOrigin[0]+h*this.rayDir[0],e[1]=this.rayOrigin[1]+h*this.rayDir[1],e[2]=this.rayOrigin[2]+h*this.rayDir[2],h)}static getRelativeMousePosition(t,e){const i=(e=e||t.target).getBoundingClientRect();let r,n;return t.touches?(r=t.touches[0].clientX,n=t.touches[0].clientY):(r=t.clientX,n=t.clientY),{x:r-i.left,y:n-i.top}}getNormalCoord(t){return[t.x/this.gl.canvas.clientWidth*2-1,t.y/this.gl.canvas.clientHeight*-2+1]}setFromPerspectiveCamera(t,{projectionMatrix:e,viewMatrix:i}){const r=o.getRelativeMousePosition(t),s=this.getNormalCoord(r),l=a.default.invert([],a.default.multiply([],e,i));this.rayOrigin=n.default.transformMat4([],[...s,.5],l);const u=n.default.transformMat4([],[0,0,0],a.default.invert([],i));this.rayDir=n.default.normalize([],n.default.subtract([],this.rayOrigin,u))}setFromOrthographicCamera(t,{projectionMatrix:e,viewMatrix:i,near:r=this.near,far:l=this.far}){const u=o.getRelativeMousePosition(t),f=this.getNormalCoord(u),h=a.default.invert([],a.default.multiply([],e,i));this.rayOrigin=n.default.transformMat4([],[...f,(r+l)/(r-l)],h),this.rayDir=n.default.normalize([],(0,s.transformDirection)([0,0,-1],a.default.invert([],i)))}}i.default=o},{"./util":74,"gl-mat4":10,"gl-vec3":36}],69:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ReplayBtn=i.UI=void 0;var r=t("./util");class n{constructor(t){this.el=t,(0,r.bind)(t,["mousedown","mouseout","touchend"],function(){new TweenMax(this,1,{textShadow:"0px 0px 0px rgba(0,0,0,0)"})}),(0,r.bind)(t,["mouseout","touchend"],function(){new TweenMax(this,1,{opacity:.6})}),(0,r.bind)(t,["mouseover","touchstart"],function(){new TweenMax(this,.5,{opacity:.9,textShadow:"-1vh 1vh 1px rgba(168, 2, 40, 0.5)",ease:Linear.easeInOut})})}onClick(t){(0,r.bind)(this.el,"click",t,!1)}}const a={init({cubeMesh:t,drawScope:e,onReversePlaying:i}){const s=r.$`#replay`;TweenLite.defaultEase=Expo.easeIn,a.timeline={reversePlaying:()=>new TimelineMax({paused:!0}).to(t,1,Object.assign({},t.start)).add(i),success:new TimelineMax({paused:!0}).to(e.light1Direction,1.3,e.end.light1Direction).add("scaleUp","-=1").to(e,.8,{viewScale:e.end.viewScale},"scaleUp").to(s,.8,{top:".4em"},"scaleUp").to(".author",.8,{display:"block",opacity:1},"-=1")},a.replayBtn=new n(s)}};i.default=a,i.UI=a,i.ReplayBtn=n},{"./util":74}],70:[function(t,e,i){"use strict";function r(t,e){this.x=t||0,this.y=e||0}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(r.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t=new r,e=new r;return function(i,r){return t.set(i,i),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=this.x-t.x,a=this.y-t.y;return this.x=n*i-a*r+t.x,this.y=n*r+a*i+t.y,this}}),i.default=r,i.Vector2=r},{}],71:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(t("gl-mat4")),n=t("./util");const a=t("glslify");i.default=function(t){const e={end:{light1Direction:[0,-1,0],viewScale:1},gamePhase:"start",initViewMatrix:r.default.lookAt([],[1,1.4142,1],[0,0,0],[0,1,0]),projectionMatrix:new Float32Array(16),near:.1,far:100,viewScale:.8,light1Direction:[1,-.5,1],global:t({uniforms:{view:()=>e.viewMatrix,projection:({viewportWidth:t,viewportHeight:i})=>{const n=t/i*1.3/.52;return e.projectionMatrix=r.default.multiply([],r.default.scale([],r.default.identity([]),[.52,.52,.52]),r.default.ortho([],-n,n,-1/.52,1/.52,e.near,e.far)),e.projectionMatrix},"lights[0].color":(0,n.normalRGB)(168,2,40),"lights[1].color":(0,n.normalRGB)(238,12,84),"lights[2].color":(0,n.normalRGB)(212,7,66),"lights[0].direction":[-1,0,0],"lights[1].direction":()=>e.light1Direction,"lights[2].direction":[0,0,-1]}}),mesh:t({frag:"precision mediump float;\n      "+a(["#define GLSLIFY 1\nuniform vec2 uResolution;\nuniform float uTime;\nuniform vec2 uMouse;\nuniform mat4 model;\nuniform float uHighlight;\nuniform float uAlpha;\n\nstruct Light {\n  vec3 color;\n  vec3 direction;\n};\nuniform Light lights[3];\n\n// https://webgl2fundamentals.org/webgl/lessons/webgl-3d-lighting-directional.html\nvec3 directionalLighting(vec3 lightDirection, vec3 lightColor, vec3 normal) {\n  float diffuse = clamp(\n    // reverse lightDirection to get right diffuse\n    dot(normalize(-lightDirection), normal),\n    0.0, 1.0\n  );\n  return diffuse * lightColor;\n}\n\n// varying vec4 vColor;\nvarying vec3 vNormal;\nvoid main () {\n  // because v_normal is a varying it's interpolated\n  // so it will not be a uint vector. Normalizing it\n  // will make it a unit vector again\n  vec3 normal = normalize(vNormal) * uHighlight;\n  vec3 materialDiffuseColor = vec3(1.0 * uHighlight, 1.0, 1.0);\n\n  vec3 color = vec3(0.0, 0.0, 0.0);\n  for (int i = 0; i < 3; ++i) {\n    color += materialDiffuseColor * directionalLighting(\n      lights[i].direction,\n      lights[i].color,\n      normal\n    );\n  }\n  gl_FragColor = vec4(color, uAlpha);\n  // gl_FragColor = vec4(normal, 1.0);\n  // gl_FragColor = vColor;\n}"]),vert:a(["precision mediump float;\n#define GLSLIFY 1\nattribute vec3 position, normal;\nuniform mat4 projection, view, model, inverseTransposeModel;\n// varying vec4 vColor;\nvarying vec3 vNormal;\nvoid main() {\n  // Multiply by model matrix so that\n  // normal changing with model rotation\n  // See https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-3d-lighting-directional.html\n  // vNormal = mat3(model) * normal;\n\n  // Multiply by inverse transpose of model matrix(i.e. (model^-1)^T) so that\n  // normal also changing with scale on model matrix\n  vNormal = mat3(inverseTransposeModel) * normal;\n\n  // vColor = vec4(position, 1.0);\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"])})};return Object.defineProperty(e,"viewMatrix",{get:function(){return r.default.scale([],this.initViewMatrix,[this.viewScale,this.viewScale,this.viewScale])}}),e}},{"./util":74,"gl-mat4":10,glslify:58}],72:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var n=r(t("regl")),a=(t("gsap"),r(t("./Pointer"))),s=(r(t("./Vector2")),r(t("./UI"))),o=t("./util"),l=(r(t("./PlaneBufferGeometry")),r(t("./Mesh"))),u=r(t("./DraggableMesh")),f=r(t("./ModelLoader")),h=r(t("./AnimeLoop")),c=r(t("./titl3D")),p=r(t("./RayCaster")),d=r(t("./drawScope"));const m=(0,n.default)(),g=m._gl,_=m._gl.canvas,v=(0,d.default)(m),y=new a.default(_),b={flashback:new Audio("./static/sound/167683__minecast__flashback-transition.mp3"),yes:new Audio("./static/sound/245314__bwsmithatl__production-sounder-button-zipper-usage.wav"),no:new Audio("./static/sound/400372__psykoosiossi__fastwhoosh.wav")};Promise.all([f.default.loadObj("./static/oscar1.obj"),(0,o.onceLoaded)()]).then(t=>{let e;const i=t[0].map(t=>"cube"===t.name?(e=new u.default({pointer:y,globalScope:v,rayCaster:new p.default(g,v.near,v.far),endProperty:"bottomY",endValue:-2.46,error:.5,onDragReach:()=>{b.yes.play(),s.default.timeline.success.play()},onDragFail:()=>b.no.play()},m,t),e.enableHighlight=!0,e):new l.default(m,t));s.default.init({cubeMesh:e,drawScope:v,onReversePlaying(){e.enableDrag=!0,e.startHighlight()}}),s.default.replayBtn.onClick(()=>{s.default.timeline.success.reverse().timeScale(2.4),s.default.timeline.reversePlaying().play(),b.flashback.play()});new h.default(t=>{m.poll(),m.clear({depth:1,color:[.2,.53,.9,1]}),v.global(()=>{for(let t of i)v.mesh(()=>{t.visible&&t.draw(v),t.children.forEach(t=>t.visible&&t.draw())})})})}),(0,c.default)("tilt",30)},{"./AnimeLoop":61,"./DraggableMesh":62,"./Mesh":63,"./ModelLoader":64,"./PlaneBufferGeometry":66,"./Pointer":67,"./RayCaster":68,"./UI":69,"./Vector2":70,"./drawScope":71,"./titl3D":73,"./util":74,gsap:59,regl:60}],73:[function(t,e,i){"use strict";function r(t="tilt",e=25){a||function(){const t=document.createElement("style");t.textContent=".tilt {\n      user-select: none;\n      will-change: transform;\n    }",document.head.appendChild(t)}();const i=new Map;(0,n.delegateOnce)(["mouseover","touchstart"],t,function(t){i.set(this,window.getComputedStyle(this).transform)}),(0,n.delegate)(["mouseout","touchend"],t,function(t){this.style.transform=i.get(this)}),(0,n.delegate)(["mousemove","touchmove"],t,function(t){let r,a,s=t.target;if("touchmove"===t.type){let e=t.targetTouches[0];[r,a]=[(0,n.clamp)(e.clientX-s.offsetLeft,0,s.clientWidth),(0,n.clamp)(e.clientY-s.offsetTop,0,s.clientHeight)]}else[r,a]=[t.offsetX,t.offsetY];let[o,l]=[(.5-r/s.clientWidth)*s.clientWidth,(a/s.clientHeight-.5)*s.clientHeight].map(t=>t*e/s.clientWidth);this.style.transform=i.get(this)+` perspective(300px) rotateX(${l}deg) rotateY(${o}deg) scale3D(1.1, 1.1, 1.1)`})}Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;var n=t("./util");let a=!1},{"./util":74}],74:[function(t,e,i){"use strict";function r(t,e,i){return Math.max(e,Math.min(i,t))}function n(t,e,i){return[t/255,e/255,i/255]}function a(t,e){var i=t[0],r=t[1],n=t[2];return[e[0]*i+e[4]*r+e[8]*n,e[1]*i+e[5]*r+e[9]*n,e[2]*i+e[6]*r+e[10]*n]}function s(){}function o(t=s){return new Promise(function(e){document.addEventListener("DOMContentLoaded",function(){e(t())})})}function l(t,...e){return t=t.raw?t:{raw:t},document.querySelector(String.raw(t,...e))}function u(t,...e){return t=t.raw?t:{raw:t},Array.prototype.slice.call(document.querySelectorAll(String.raw(t,...e)))}function f(t,e,i){function r(t){document.addEventListener(t,function(t){for(let r=t.target;r&&r!=this;r=r.parentNode)if(r.classList.contains(e)){i.call(r,t);break}},!1)}Array.isArray(t)?t.forEach(t=>r(t)):r(t)}function h(t,e,i){function r(t){const r=new Set;document.addEventListener(t,function(t){for(let n=t.target;n&&n!=this;n=n.parentNode)if(n.classList.contains(e)&&!r.has(n)){i.call(n,t),r.add(n);break}},!1)}Array.isArray(t)?t.forEach(t=>r(t)):r(t)}function c(t,e,i){const r=t instanceof EventTarget?t:document.querySelector(t);Array.isArray(e)?e.forEach(t=>r.addEventListener(t,i,!1)):r.addEventListener(e,i,!1)}function p(t,e,i){c(t,e,function r(n){!1!==i(n)&&function(t,e,i){const r=t instanceof EventTarget?t:document.querySelector(t);Array.isArray(e)?e.forEach(t=>r.removeEventListener(t,i)):r.removeEventListener(e,i)}(t,e,r)})}Object.defineProperty(i,"__esModule",{value:!0});const d={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:r,transformDirection:a,normalRGB:n,noop:s,onceLoaded:o,$:l,$all:u,bind:c,bindOnce:p,delegate:f,delegateOnce:h};i.default=d,i.clamp=r,i.transformDirection=a,i.normalRGB=n,i.noop=s,i.onceLoaded=o,i.$=l,i.$all=u,i.bind=c,i.bindOnce=p,i.delegate=f,i.delegateOnce=h},{}]},{},[72]);
